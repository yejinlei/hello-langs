<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zig 教程 - Hello 编程语言</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .code-font {
            font-family: 'JetBrains Mono', monospace;
        }
        .gradient-text {
            background: linear-gradient(135deg, #60A5FA 0%, #A78BFA 50%, #F87171 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .syntax-card {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.9));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        .code-block {
            background: rgba(2, 6, 23, 0.9);
            border-left: 4px solid #3B82F6;
        }
        .highlight {
            background: rgba(59, 130, 246, 0.2);
            padding: 2px 4px;
            border-radius: 3px;
        }
        /* Syntax highlighting colors */
        .text-blue-300 { color: #93c5fd; }
        .text-blue-400 { color: #60a5fa; }
        .text-green-300 { color: #86efac; }
        .text-yellow-300 { color: #fde047; }
        .text-purple-300 { color: #a78bfa; }
        .text-red-300 { color: #fca5a5; }
        .text-cyan-300 { color: #22d3ee; }
        .text-gray-400 { color: #94a3b8; }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Sidebar Navigation -->
            <aside class="lg:w-1/4">
                <div class="bg-slate-800/50 backdrop-blur-md rounded-xl p-6 sticky top-24 border border-slate-700">
                    <h3 class="text-lg font-bold mb-4 gradient-text">章节导航</h3>
                    <nav class="space-y-2">
                        <a href="#section-1" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">1. Zig 简介</a>
                        <a href="#section-2" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">2. Zig 基础语法</a>
                        <a href="#section-3" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">3. Zig 函数和控制流</a>
                        <a href="#section-4" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">4. Zig 数据类型</a>
                        <a href="#section-5" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">5. Zig 数组和切片</a>
                        <a href="#section-6" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">6. Zig 结构体和枚举</a>
                        <a href="#section-7" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">7. Zig 指针和内存管理</a>
                        <a href="#section-8" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">8. Zig 错误处理</a>
                        <a href="#section-9" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">9. Zig 泛型</a>
                        <a href="#section-10" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">10. Zig 编译时特性</a>
                        <a href="#section-11" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">11. Zig 模块和导入</a>
                        <a href="#section-12" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">12. Zig 测试</a>
                        <a href="#section-13" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">13. Zig 与 C 交互</a>
                        <a href="#section-14" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">14. Zig 高级特性</a>
                    </nav>
                </div>
            </aside>

            <!-- Main Content -->
            <div class="lg:w-3/4">
                <!-- 1. Zig 简介 -->
                <section id="section-1" class="mb-16">
                    <h2 class="text-3xl font-bold mb-8 text-center">
                        <span class="gradient-text">1. Zig 简介</span>
                    </h2>
                    
                    <div class="language-content" data-lang="zig">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 现代系统编程语言</h4>
                        <p class="text-slate-300 mb-4">Zig是一种现代系统编程语言，专注于安全性、性能和可维护性。它设计为C语言的替代品，提供了更好的内存安全和错误处理机制。</p>
                        
                        <div class="bg-slate-800 rounded-xl p-6 syntax-card">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">Zig 语言特点</h5>
                            <ul class="text-slate-300 list-disc pl-6 space-y-2">
                                <li>无运行时开销</li>
                                <li>显式内存管理</li>
                                <li>强大的错误处理机制</li>
                                <li>编译时泛型</li>
                                <li>与C语言的无缝交互</li>
                                <li>简洁的语法</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- 2. Zig 基础语法 -->
                <section id="section-2" class="mb-16">
                    <h2 class="text-3xl font-bold mb-8 text-center">
                        <span class="gradient-text">2. Zig 基础语法</span>
                    </h2>
                    
                    <div class="language-content" data-lang="zig">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">Zig 基础语法特性</h4>
                        <p class="text-slate-300 mb-4">Zig的语法简洁明了，同时支持现代编程语言的许多特性。基础语法包括变量声明、函数定义、控制流等。</p>
                        
                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">Hello World 示例</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Hello, World!\n"</span>, .{});
}
</code></pre>
                        </div>

                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">变量和常量</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 常量定义
    <span class="text-blue-400">const</span> <span class="text-green-300">answer</span>: <span class="text-blue-300">u32</span> = <span class="text-yellow-300">42</span>;
    
    // 变量定义
    <span class="text-blue-400">var</span> <span class="text-green-300">count</span>: <span class="text-blue-300">u32</span> = <span class="text-yellow-300">10</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">name</span>: <span class="text-blue-300">[]const u8</span> = <span class="text-yellow-300">"Zig"</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">price</span>: <span class="text-blue-300">f64</span> = <span class="text-yellow-300">19.99</span>;
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Answer: {}\n"</span>, .{<span class="text-green-300">answer</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Count: {}\n"</span>, .{<span class="text-green-300">count</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Name: {s}\n"</span>, .{<span class="text-green-300">name</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Price: {d:.2}\n"</span>, .{<span class="text-green-300">price</span>});
    
    // 更新变量
    <span class="text-green-300">count</span> += <span class="text-yellow-300">1</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Updated Count: {}\n"</span>, .{<span class="text-green-300">count</span>});
}
</code></pre>
                        </div>
                    </div>
                </section>

                <!-- 3. Zig 函数和控制流 -->
                <section id="section-3" class="mb-16">
                    <h2 class="text-3xl font-bold mb-8 text-center">
                        <span class="gradient-text">3. Zig 函数和控制流</span>
                    </h2>
                    
                    <div class="language-content" data-lang="zig">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">Zig 函数和控制流特性</h4>
                        <p class="text-slate-300 mb-4">Zig的函数系统支持错误处理、默认参数、可变参数等特性，控制流包括if/else、switch、for和while循环。</p>
                        
                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">函数定义</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 函数定义
<span class="text-blue-400">fn</span> <span class="text-cyan-300">add</span>(<span class="text-green-300">a</span>: <span class="text-blue-300">i32</span>, <span class="text-green-300">b</span>: <span class="text-blue-300">i32</span>) <span class="text-blue-300">i32</span> {
    <span class="text-blue-400">return</span> <span class="text-green-300">a</span> + <span class="text-green-300">b</span>;
}

// 带错误返回的函数
<span class="text-blue-400">fn</span> <span class="text-cyan-300">divide</span>(<span class="text-green-300">a</span>: <span class="text-blue-300">f64</span>, <span class="text-green-300">b</span>: <span class="text-blue-300">f64</span>) <span class="text-purple-300">!</span><span class="text-blue-300">f64</span> {
    <span class="text-blue-400">if</span> (<span class="text-green-300">b</span> == <span class="text-yellow-300">0.0</span>) {
        <span class="text-blue-400">return</span> <span class="text-red-300">error</span>.<span class="text-red-300">DivisionByZero</span>;
    }
    <span class="text-blue-400">return</span> <span class="text-green-300">a</span> / <span class="text-green-300">b</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-blue-400">const</span> <span class="text-green-300">sum</span> = <span class="text-cyan-300">add</span>(<span class="text-yellow-300">5</span>, <span class="text-yellow-300">3</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Sum: {}\n"</span>, .{<span class="text-green-300">sum</span>});
    
    // 错误处理
    <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-cyan-300">divide</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">2.0</span>) <span class="text-purple-300">catch</span> |<span class="text-red-300">err</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Error: {}\n"</span>, .{<span class="text-red-300">err</span>});
        <span class="text-blue-400">return</span> <span class="text-red-300">err</span>;
    };
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Result: {d}\n"</span>, .{<span class="text-green-300">result</span>});
}
</code></pre>
                        </div>

                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">控制流</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 条件语句
    <span class="text-blue-400">const</span> <span class="text-green-300">score</span>: <span class="text-blue-300">u32</span> = <span class="text-yellow-300">85</span>;
    <span class="text-blue-400">if</span> (<span class="text-green-300">score</span> >= <span class="text-yellow-300">90</span>) {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"A\n"</span>, .{});
    } <span class="text-blue-400">else</span> <span class="text-blue-400">if</span> (<span class="text-green-300">score</span> >= <span class="text-yellow-300">80</span>) {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"B\n"</span>, .{});
    } <span class="text-blue-400">else</span> <span class="text-blue-400">if</span> (<span class="text-green-300">score</span> >= <span class="text-yellow-300">70</span>) {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"C\n"</span>, .{});
    } <span class="text-blue-400">else</span> {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"D\n"</span>, .{});
    }
    
    // for 循环
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"For 循环:\n"</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-yellow-300">0</span>..<span class="text-yellow-300">5</span>) |<span class="text-green-300">i</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{}\n"</span>, .{<span class="text-green-300">i</span>});
    }
    
    // while 循环
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"While 循环:\n"</span>, .{});
    <span class="text-blue-400">var</span> <span class="text-green-300">i</span>: <span class="text-blue-300">u32</span> = <span class="text-yellow-300">0</span>;
    <span class="text-blue-400">while</span> (<span class="text-green-300">i</span> < <span class="text-yellow-300">5</span>) : (<span class="text-green-300">i</span> += <span class="text-yellow-300">1</span>) {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{}\n"</span>, .{<span class="text-green-300">i</span>});
    }
}
</code></pre>
                        </div>
                    </div>
                </section>

                <!-- 4. Zig 数据类型 -->
                <section id="section-4" class="mb-16">
                    <h2 class="text-3xl font-bold mb-8 text-center">
                        <span class="gradient-text">4. Zig 数据类型</span>
                    </h2>
                    
                    <div class="language-content" data-lang="zig">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 数据类型系统</h4>
                        <p class="text-slate-300 mb-4">Zig提供了丰富的数据类型，包括基本类型、复合类型和自定义类型。Zig的类型系统注重安全性和性能。</p>
                        
                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">整数类型</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 有符号整数
    <span class="text-blue-400">var</span> <span class="text-green-300">i8_val</span>: <span class="text-blue-300">i8</span> = <span class="text-yellow-300">-128</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">i16_val</span>: <span class="text-blue-300">i16</span> = <span class="text-yellow-300">-32768</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">i32_val</span>: <span class="text-blue-300">i32</span> = <span class="text-yellow-300">-2147483648</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">i64_val</span>: <span class="text-blue-300">i64</span> = <span class="text-yellow-300">-9223372036854775808</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">i128_val</span>: <span class="text-blue-300">i128</span> = <span class="text-yellow-300">-170141183460469231731687303715884105728</span>;
    
    // 无符号整数
    <span class="text-blue-400">var</span> <span class="text-green-300">u8_val</span>: <span class="text-blue-300">u8</span> = <span class="text-yellow-300">255</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">u16_val</span>: <span class="text-blue-300">u16</span> = <span class="text-yellow-300">65535</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">u32_val</span>: <span class="text-blue-300">u32</span> = <span class="text-yellow-300">4294967295</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">u64_val</span>: <span class="text-blue-300">u64</span> = <span class="text-yellow-300">18446744073709551615</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">u128_val</span>: <span class="text-blue-300">u128</span> = <span class="text-yellow-300">340282366920938463463374607431768211455</span>;
    
    // 特定大小的整数
    <span class="text-blue-400">var</span> <span class="text-green-300">usize_val</span>: <span class="text-blue-300">usize</span> = <span class="text-yellow-300">100</span>; // 与指针大小相同
    <span class="text-blue-400">var</span> <span class="text-green-300">isize_val</span>: <span class="text-blue-300">isize</span> = <span class="text-yellow-300">-100</span>; // 与指针大小相同
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"i8: {}\n"</span>, .{<span class="text-green-300">i8_val</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"u8: {}\n"</span>, .{<span class="text-green-300">u8_val</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"usize: {}\n"</span>, .{<span class="text-green-300">usize_val</span>});
}
</code></pre>
                        </div>

                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">浮点类型</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 浮点数
    <span class="text-blue-400">var</span> <span class="text-green-300">f16_val</span>: <span class="text-blue-300">f16</span> = <span class="text-yellow-300">3.14e0</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">f32_val</span>: <span class="text-blue-300">f32</span> = <span class="text-yellow-300">3.14159265359e0</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">f64_val</span>: <span class="text-blue-300">f64</span> = <span class="text-yellow-300">3.14159265358979323846e0</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">f128_val</span>: <span class="text-blue-400">f128</span> = <span class="text-yellow-300">3.14159265358979323846264338327950288e0</span>;
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"f32: {{d:.6}}\n"</span>, .{<span class="text-green-300">f32_val</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"f64: {{d:.15}}\n"</span>, .{<span class="text-green-300">f64_val</span>});
}
</code></pre>
                        </div>

                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">布尔和字符类型</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 布尔类型
    <span class="text-blue-400">var</span> <span class="text-green-300">bool_val</span>: <span class="text-blue-400">bool</span> = <span class="text-yellow-300">true</span>;
    
    // 字符类型
    <span class="text-blue-400">var</span> <span class="text-green-300">char_val</span>: <span class="text-blue-400">u8</span> = <span class="text-yellow-300">'A'</span>; // ASCII字符
    <span class="text-blue-400">var</span> <span class="text-green-300">utf8_char</span>: <span class="text-blue-300">[]const</span> <span class="text-blue-400">u8</span> = <span class="text-yellow-300">"你好"</span>;
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Bool: {}\n"</span>, .{<span class="text-green-300">bool_val</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Char: {{c}}\n"</span>, .{<span class="text-green-300">char_val</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"UTF-8: {{s}}\n"</span>, .{<span class="text-green-300">utf8_char</span>});
}
</code></pre>
                        </div>

                        <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                            <h5 class="text-lg font-medium mb-4 text-purple-300">可选类型</h5>
                            <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 可选类型
    <span class="text-blue-400">var</span> <span class="text-green-300">optional_int</span>: <span class="text-purple-300">?</span><span class="text-blue-400">i32</span> = <span class="text-yellow-300">42</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">null_optional</span>: <span class="text-purple-300">?</span><span class="text-blue-400">i32</span> = <span class="text-blue-400">null</span>;
    
    // 访问可选值
    <span class="text-blue-400">if</span> (<span class="text-green-300">optional_int</span>) |<span class="text-green-300">value</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Optional has value: {}\n"</span>, .{<span class="text-green-300">value</span>});
    } <span class="text-blue-400">else</span> {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Optional is null\n"</span>, .{});
    }
    
    // 使用 orelse 操作符
    <span class="text-blue-400">const</span> <span class="text-green-300">default_val</span> = <span class="text-green-300">null_optional</span> <span class="text-purple-300">orelse</span> <span class="text-yellow-300">0</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Default value: {}\n"</span>, .{<span class="text-green-300">default_val</span>});
}
</code></pre>
                        </div>
            </div>
        </section>

        <!-- 5. Zig 数组和切片 -->
        <section id="section-5" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">5. Zig 数组和切片</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 数组和切片</h4>
                <p class="text-slate-300 mb-4">Zig提供了数组和切片两种序列类型。数组是固定大小的，而切片是动态大小的视图。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">数组</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 固定大小数组
    <span class="text-blue-400">var</span> <span class="text-green-300">arr</span>: [<span class="text-yellow-300">5</span>]<span class="text-blue-300">i32</span> = [<span class="text-yellow-300">5</span>]<span class="text-blue-300">i32</span>{<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>, <span class="text-yellow-300">4</span>, <span class="text-yellow-300">5</span>};
    
    // 自动推断大小
    <span class="text-blue-400">var</span> <span class="text-green-300">arr2</span> = [<span class="text-purple-300">_</span>]<span class="text-blue-300">i32</span>{<span class="text-yellow-300">6</span>, <span class="text-yellow-300">7</span>, <span class="text-yellow-300">8</span>, <span class="text-yellow-300">9</span>, <span class="text-yellow-300">10</span>};
    
    // 数组初始化
    <span class="text-blue-400">var</span> <span class="text-green-300">zero_arr</span>: [<span class="text-yellow-300">10</span>]<span class="text-blue-300">u8</span> = [<span class="text-yellow-300">10</span>]<span class="text-blue-300">u8</span>{<span class="text-yellow-300">0</span>} ** <span class="text-yellow-300">10</span>; // 全零初始化
    
    // 访问数组元素
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"arr[0]: {}\n"</span>, .{<span class="text-green-300">arr</span>[<span class="text-yellow-300">0</span>]});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"arr[4]: {}\n"</span>, .{<span class="text-green-300">arr</span>[<span class="text-yellow-300">4</span>]});
    
    // 修改数组元素
    <span class="text-green-300">arr</span>[<span class="text-yellow-300">0</span>] = <span class="text-yellow-300">100</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Modified arr[0]: {}\n"</span>, .{<span class="text-green-300">arr</span>[<span class="text-yellow-300">0</span>]});
    
    // 数组长度
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Array length: {}\n"</span>, .{<span class="text-green-300">arr</span>.<span class="text-cyan-300">len</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">切片</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 从数组创建切片
    <span class="text-blue-400">var</span> <span class="text-green-300">arr</span> = [<span class="text-purple-300">_</span>]<span class="text-blue-300">i32</span>{<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>, <span class="text-yellow-300">4</span>, <span class="text-yellow-300">5</span>};
    <span class="text-blue-400">var</span> <span class="text-green-300">slice</span> = <span class="text-green-300">arr</span>[<span class="text-yellow-300">0</span>..<span class="text-yellow-300">3</span>]; // 前三个元素
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Slice length: {}\n"</span>, .{<span class="text-green-300">slice</span>.<span class="text-cyan-300">len</span>});
    
    // 访问切片元素
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"slice[0]: {}\n"</span>, .{<span class="text-green-300">slice</span>[<span class="text-yellow-300">0</span>]});
    
    // 修改切片元素（会影响原始数组）
    <span class="text-green-300">slice</span>[<span class="text-yellow-300">0</span>] = <span class="text-yellow-300">100</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Modified slice[0]: {}\n"</span>, .{<span class="text-green-300">slice</span>[<span class="text-yellow-300">0</span>]});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Original arr[0]: {}\n"</span>, .{<span class="text-green-300">arr</span>[<span class="text-yellow-300">0</span>]});
    
    // 切片切片
    <span class="text-blue-400">var</span> <span class="text-green-300">subslice</span> = <span class="text-green-300">slice</span>[<span class="text-yellow-300">1</span>..<span class="text-yellow-300">2</span>];
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Subslice: {}\n"</span>, .{<span class="text-green-300">subslice</span>[<span class="text-yellow-300">0</span>]});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">动态数组（使用std.ArrayList）</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 创建ArrayList
    <span class="text-blue-400">var</span> <span class="text-green-300">gpa</span> = <span class="text-green-300">std</span>.<span class="text-green-300">heap</span>.<span class="text-cyan-300">GeneralPurposeAllocator</span>(.{}){};
    <span class="text-blue-400">const</span> <span class="text-green-300">allocator</span> = <span class="text-green-300">gpa</span>.<span class="text-cyan-300">allocator</span>();
    <span class="text-blue-400">defer</span> _ = <span class="text-green-300">gpa</span>.<span class="text-cyan-300">deinit</span>();
    
    <span class="text-blue-400">var</span> <span class="text-green-300">list</span> = <span class="text-green-300">std</span>.<span class="text-green-300">ArrayList</span>(<span class="text-blue-300">i32</span>).<span class="text-cyan-300">init</span>(<span class="text-green-300">allocator</span>);
    <span class="text-blue-400">defer</span> <span class="text-green-300">list</span>.<span class="text-cyan-300">deinit</span>();
    
    // 添加元素
    <span class="text-purple-300">try</span> <span class="text-green-300">list</span>.<span class="text-cyan-300">append</span>(<span class="text-yellow-300">1</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">list</span>.<span class="text-cyan-300">append</span>(<span class="text-yellow-300">2</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">list</span>.<span class="text-cyan-300">append</span>(<span class="text-yellow-300">3</span>);
    
    // 访问元素
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"First element: {}\n"</span>, .{<span class="text-green-300">list</span>.<span class="text-green-300">items</span>[<span class="text-yellow-300">0</span>]});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Last element: {}\n"</span>, .{<span class="text-green-300">list</span>.<span class="text-green-300">items</span>[<span class="text-green-300">list</span>.<span class="text-green-300">items</span>.<span class="text-cyan-300">len</span> - <span class="text-yellow-300">1</span>]});
    
    // 遍历列表
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"List elements: "</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">list</span>.<span class="text-green-300">items</span>) |<span class="text-green-300">item</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">item</span>});
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
    
    // 插入元素
    <span class="text-purple-300">try</span> <span class="text-green-300">list</span>.<span class="text-cyan-300">insert</span>(<span class="text-yellow-300">1</span>, <span class="text-yellow-300">10</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"After insert: "</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">list</span>.<span class="text-green-300">items</span>) |<span class="text-green-300">item</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">item</span>});
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
    
    // 删除元素
    _ = <span class="text-green-300">list</span>.<span class="text-cyan-300">swapRemove</span>(<span class="text-yellow-300">2</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"After remove: "</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">list</span>.<span class="text-green-300">items</span>) |<span class="text-green-300">item</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">item</span>});
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">多维数组</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 二维数组
    <span class="text-blue-400">var</span> <span class="text-green-300">matrix</span>: [<span class="text-yellow-300">3</span>][<span class="text-yellow-300">3</span>]<span class="text-blue-300">i32</span> = [<span class="text-yellow-300">3</span>][<span class="text-yellow-300">3</span>]<span class="text-blue-300">i32</span>{
        [<span class="text-yellow-300">3</span>]<span class="text-blue-300">i32</span>{<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>},
        [<span class="text-yellow-300">3</span>]<span class="text-blue-300">i32</span>{<span class="text-yellow-300">4</span>, <span class="text-yellow-300">5</span>, <span class="text-yellow-300">6</span>},
        [<span class="text-yellow-300">3</span>]<span class="text-blue-300">i32</span>{<span class="text-yellow-300">7</span>, <span class="text-yellow-300">8</span>, <span class="text-yellow-300">9</span>},
    };
    
    // 访问二维数组元素
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"matrix[0][0]: {}\n"</span>, .{<span class="text-green-300">matrix</span>[<span class="text-yellow-300">0</span>][<span class="text-yellow-300">0</span>]});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"matrix[2][2]: {}\n"</span>, .{<span class="text-green-300">matrix</span>[<span class="text-yellow-300">2</span>][<span class="text-yellow-300">2</span>]});
    
    // 遍历二维数组
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Matrix:\n"</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">matrix</span>) |<span class="text-green-300">row</span>| {
        <span class="text-blue-400">for</span> (<span class="text-green-300">row</span>) |<span class="text-green-300">element</span>| {
            <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">element</span>});
        }
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
    }
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 6. Zig 结构体和枚举 -->
        <section id="section-6" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">6. Zig 结构体和枚举</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 结构体和枚举</h4>
                <p class="text-slate-300 mb-4">Zig提供了结构体和枚举来定义复杂的数据类型，支持面向对象的编程范式。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">结构体</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 定义结构体
<span class="text-blue-400">const</span> <span class="text-purple-300">Person</span> = <span class="text-blue-400">struct</span> {
    <span class="text-green-300">name</span>: <span class="text-blue-400">[]const</span> <span class="text-blue-400">u8</span>,
    <span class="text-green-300">age</span>: <span class="text-blue-400">u8</span>,
    <span class="text-green-300">email</span>: <span class="text-purple-300">?</span><span class="text-blue-400">[]const</span> <span class="text-blue-400">u8</span>, // 可选字段
};

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 创建结构体实例
    <span class="text-blue-400">const</span> <span class="text-green-300">alice</span> = <span class="text-purple-300">Person</span>{
        .<span class="text-green-300">name</span> = <span class="text-yellow-300">"Alice"</span>,
        .<span class="text-green-300">age</span> = <span class="text-yellow-300">30</span>,
        .<span class="text-green-300">email</span> = <span class="text-yellow-300">"alice@example.com"</span>,
    };
    
    <span class="text-blue-400">const</span> <span class="text-green-300">bob</span> = <span class="text-purple-300">Person</span>{
        .<span class="text-green-300">name</span> = <span class="text-yellow-300">"Bob"</span>,
        .<span class="text-green-300">age</span> = <span class="text-yellow-300">25</span>,
        .<span class="text-green-300">email</span> = <span class="text-blue-400">null</span>,
    };
    
    // 访问结构体字段
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} is {} years old\n"</span>, .{<span class="text-green-300">alice</span>.<span class="text-green-300">name</span>, <span class="text-green-300">alice</span>.<span class="text-green-300">age</span>});
    
    <span class="text-blue-400">if</span> (<span class="text-green-300">alice</span>.<span class="text-green-300">email</span>) |<span class="text-green-300">email</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Email: {}\n"</span>, .{<span class="text-green-300">email</span>});
    } <span class="text-blue-400">else</span> {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"No email\n"</span>, .{});
    }
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">带方法的结构体</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">const</span> <span class="text-purple-300">Rectangle</span> = <span class="text-blue-400">struct</span> {
    <span class="text-green-300">width</span>: <span class="text-blue-400">f64</span>,
    <span class="text-green-300">height</span>: <span class="text-blue-400">f64</span>,
    
    // 方法
    <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">area</span>(<span class="text-green-300">self</span>: <span class="text-purple-300">Rectangle</span>) <span class="text-blue-400">f64</span> {
        <span class="text-blue-400">return</span> <span class="text-green-300">self</span>.<span class="text-green-300">width</span> * <span class="text-green-300">self</span>.<span class="text-green-300">height</span>;
    }
    
    <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">perimeter</span>(<span class="text-green-300">self</span>: <span class="text-purple-300">Rectangle</span>) <span class="text-blue-400">f64</span> {
        <span class="text-blue-400">return</span> <span class="text-yellow-300">2</span> * (<span class="text-green-300">self</span>.<span class="text-green-300">width</span> + <span class="text-green-300">self</span>.<span class="text-green-300">height</span>);
    }
    
    // 关联函数（静态方法）
    <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">new</span>(<span class="text-green-300">width</span>: <span class="text-blue-400">f64</span>, <span class="text-green-300">height</span>: <span class="text-blue-400">f64</span>) <span class="text-purple-300">Rectangle</span> {
        <span class="text-blue-400">return</span> <span class="text-purple-300">Rectangle</span>{
            .<span class="text-green-300">width</span> = <span class="text-green-300">width</span>,
            .<span class="text-green-300">height</span> = <span class="text-green-300">height</span>,
        };
    }
};

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 使用关联函数创建实例
    <span class="text-blue-400">const</span> <span class="text-green-300">rect</span> = <span class="text-purple-300">Rectangle</span>.<span class="text-cyan-300">new</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">5.0</span>);
    
    // 调用方法
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Area: {{d:.2}}\n"</span>, .{<span class="text-green-300">rect</span>.<span class="text-cyan-300">area</span>()});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Perimeter: {{d:.2}}\n"</span>, .{<span class="text-green-300">rect</span>.<span class="text-cyan-300">perimeter</span>()});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">枚举</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 定义枚举
<span class="text-blue-400">const</span> <span class="text-purple-300">Color</span> = <span class="text-blue-400">enum</span> {
    <span class="text-cyan-300">red</span>,
    <span class="text-cyan-300">green</span>,
    <span class="text-cyan-300">blue</span>,
    <span class="text-cyan-300">yellow</span>,
    <span class="text-cyan-300">purple</span>,
};

// 带值的枚举
<span class="text-blue-400">const</span> <span class="text-purple-300">Direction</span> = <span class="text-blue-400">enum</span>(<span class="text-blue-400">u8</span>) {
    <span class="text-cyan-300">north</span> = <span class="text-yellow-300">0</span>,
    <span class="text-cyan-300">east</span> = <span class="text-yellow-300">90</span>,
    <span class="text-cyan-300">south</span> = <span class="text-yellow-300">180</span>,
    <span class="text-cyan-300">west</span> = <span class="text-yellow-300">270</span>,
};

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 使用枚举
    <span class="text-blue-400">const</span> <span class="text-green-300">favorite_color</span> = <span class="text-purple-300">Color</span>.<span class="text-cyan-300">blue</span>;
    
    // 分支匹配
    <span class="text-blue-400">switch</span> (<span class="text-green-300">favorite_color</span>) {
        <span class="text-purple-300">Color</span>.<span class="text-cyan-300">red</span> => <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Red\n"</span>, .{}),
        <span class="text-purple-300">Color</span>.<span class="text-cyan-300">green</span> => <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Green\n"</span>, .{}),
        <span class="text-purple-300">Color</span>.<span class="text-cyan-300">blue</span> => <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Blue\n"</span>, .{}),
        <span class="text-purple-300">Color</span>.<span class="text-cyan-300">yellow</span> => <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Yellow\n"</span>, .{}),
        <span class="text-purple-300">Color</span>.<span class="text-cyan-300">purple</span> => <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Purple\n"</span>, .{}),
    }
    
    // 带值枚举操作
    <span class="text-blue-400">const</span> <span class="text-green-300">dir</span> = <span class="text-purple-300">Direction</span>.<span class="text-cyan-300">east</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Direction value: {}\n"</span>, .{<span class="text-purple-300">@intFromEnum</span>(<span class="text-green-300">dir</span>)});
    
    // 从值转换为枚举
    <span class="text-blue-400">const</span> <span class="text-green-300">north</span> = <span class="text-purple-300">@enumFromInt</span>(<span class="text-purple-300">Direction</span>, <span class="text-yellow-300">0</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Direction from value: {}\n"</span>, .{<span class="text-green-300">north</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">联合体</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 定义联合体
<span class="text-blue-400">const</span> <span class="text-purple-300">Variant</span> = <span class="text-blue-400">union</span> {
    <span class="text-green-300">number</span>: <span class="text-blue-400">i32</span>,
    <span class="text-green-300">text</span>: <span class="text-blue-400">[]const</span> <span class="text-blue-400">u8</span>,
    <span class="text-green-300">boolean</span>: <span class="text-blue-400">bool</span>,
};

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 使用联合体
    <span class="text-blue-400">var</span> <span class="text-green-300">value</span> = <span class="text-purple-300">Variant</span>{.<span class="text-green-300">number</span> = <span class="text-yellow-300">42</span>};
    
    // 访问联合体字段
    <span class="text-blue-400">switch</span> (<span class="text-green-300">value</span>) {
        <span class="text-purple-300">Variant</span>.<span class="text-green-300">number</span> => |<span class="text-green-300">n</span>| <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Number: {}\n"</span>, .{<span class="text-green-300">n</span>}),
        <span class="text-purple-300">Variant</span>.<span class="text-green-300">text</span> => |<span class="text-green-300">t</span>| <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Text: {}\n"</span>, .{<span class="text-green-300">t</span>}),
        <span class="text-purple-300">Variant</span>.<span class="text-green-300">boolean</span> => |<span class="text-green-300">b</span>| <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Boolean: {}\n"</span>, .{<span class="text-green-300">b</span>}),
    }
    
    // 更改联合体类型
    <span class="text-green-300">value</span> = <span class="text-purple-300">Variant</span>{.<span class="text-green-300">text</span> = <span class="text-yellow-300">"Hello"</span>};
    
    // 使用if匹配
    <span class="text-blue-400">if</span> (<span class="text-green-300">value</span> == .<span class="text-green-300">text</span>) {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"New value is text: {}\n"</span>, .{<span class="text-green-300">value</span>.<span class="text-green-300">text</span>});
    }
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 7. Zig 指针和内存管理 -->
        <section id="section-7" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">7. Zig 指针和内存管理</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 指针和内存管理</h4>
                <p class="text-slate-300 mb-4">Zig提供了强大的指针系统和显式内存管理，确保内存安全的同时提供了高性能。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">基本指针操作</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 创建变量
    <span class="text-blue-400">var</span> <span class="text-green-300">x</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">42</span>;
    
    // 获取指针
    <span class="text-blue-400">var</span> <span class="text-green-300">ptr</span> = &<span class="text-green-300">x</span>;
    
    // 访问指针指向的值（解引用）
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Value: {}\n"</span>, .{<span class="text-green-300">x</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Pointer value: {}\n"</span>, .{<span class="text-green-300">ptr</span>.*});
    
    // 通过指针修改值
    <span class="text-green-300">ptr</span>.* = <span class="text-yellow-300">100</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Modified value: {}\n"</span>, .{<span class="text-green-300">x</span>});
    
    // 指针类型
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Pointer type: {}\n"</span>, .{<span class="text-purple-300">@TypeOf</span>(<span class="text-green-300">ptr</span>)});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">指针类型</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-blue-400">var</span> <span class="text-green-300">x</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">42</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">y</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">100</span>;
    
    // 可变指针（可以修改指向的值）
    <span class="text-blue-400">var</span> <span class="text-green-300">mutable_ptr</span>: <span class="text-blue-400">*</span><span class="text-blue-400">i32</span> = &<span class="text-green-300">x</span>;
    
    // 常量指针（不能修改指向的值）
    <span class="text-blue-400">const</span> <span class="text-green-300">const_ptr</span>: <span class="text-blue-400">*</span><span class="text-blue-400">const</span> <span class="text-blue-400">i32</span> = &<span class="text-green-300">y</span>;
    
    // 常量指针指向常量
    <span class="text-blue-400">const</span> <span class="text-green-300">const_ptr_const</span>: <span class="text-blue-400">*</span><span class="text-blue-400">const</span> <span class="text-blue-400">i32</span> = &<span class="text-green-300">x</span>;
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Mutable pointer value: {}\n"</span>, .{<span class="text-green-300">mutable_ptr</span>.*});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Const pointer value: {}\n"</span>, .{<span class="text-green-300">const_ptr</span>.*});
    
    // 修改可变指针的值
    <span class="text-green-300">mutable_ptr</span>.* = <span class="text-yellow-300">200</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Modified value: {}\n"</span>, .{<span class="text-green-300">x</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">内存分配</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 创建通用内存分配器
    <span class="text-blue-400">var</span> <span class="text-green-300">gpa</span> = <span class="text-green-300">std</span>.<span class="text-green-300">heap</span>.<span class="text-cyan-300">GeneralPurposeAllocator</span>(.{}){};
    <span class="text-blue-400">const</span> <span class="text-green-300">allocator</span> = <span class="text-green-300">gpa</span>.<span class="text-cyan-300">allocator</span>();
    <span class="text-blue-400">defer</span> _ = <span class="text-green-300">gpa</span>.<span class="text-cyan-300">deinit</span>();
    
    // 分配内存
    <span class="text-blue-400">const</span> <span class="text-green-300">ptr</span> = <span class="text-purple-300">try</span> <span class="text-green-300">allocator</span>.<span class="text-cyan-300">create</span>(<span class="text-blue-400">i32</span>);
    <span class="text-blue-400">defer</span> <span class="text-green-300">allocator</span>.<span class="text-cyan-300">destroy</span>(<span class="text-green-300">ptr</span>);
    
    // 使用分配的内存
    <span class="text-green-300">ptr</span>.* = <span class="text-yellow-300">42</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Allocated value: {}\n"</span>, .{<span class="text-green-300">ptr</span>.*});
    
    // 分配数组
    <span class="text-blue-400">const</span> <span class="text-green-300">count</span> = <span class="text-yellow-300">5</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">arr_ptr</span> = <span class="text-purple-300">try</span> <span class="text-green-300">allocator</span>.<span class="text-cyan-300">alloc</span>(<span class="text-blue-400">i32</span>, <span class="text-green-300">count</span>);
    <span class="text-blue-400">defer</span> <span class="text-green-300">allocator</span>.<span class="text-cyan-300">free</span>(<span class="text-green-300">arr_ptr</span>);
    
    // 初始化数组
    <span class="text-blue-400">for</span> (<span class="text-green-300">arr_ptr</span>, <span class="text-yellow-300">0</span>..) |*<span class="text-green-300">item</span>, <span class="text-green-300">i</span>| {
        <span class="text-green-300">item</span>.* = <span class="text-purple-300">@as</span>(<span class="text-blue-400">i32</span>, <span class="text-purple-300">@intCast</span>(<span class="text-green-300">i</span>)) * <span class="text-yellow-300">10</span>;
    }
    
    // 打印数组
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Allocated array: "</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">arr_ptr</span>) |<span class="text-green-300">item</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">item</span>});
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">栈分配</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 栈分配单个值
    <span class="text-blue-400">var</span> <span class="text-green-300">stack_value</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">42</span>;
    
    // 栈分配数组
    <span class="text-blue-400">var</span> <span class="text-green-300">stack_array</span>: [<span class="text-yellow-300">5</span>]<span class="text-blue-400">i32</span> = <span class="text-blue-400">undefined</span>;
    
    // 初始化栈数组
    <span class="text-blue-400">for</span> (<span class="text-green-300">stack_array</span>, <span class="text-yellow-300">0</span>..) |*<span class="text-green-300">item</span>, <span class="text-green-300">i</span>| {
        <span class="text-green-300">item</span>.* = <span class="text-purple-300">@as</span>(<span class="text-blue-400">i32</span>, <span class="text-purple-300">@intCast</span>(<span class="text-green-300">i</span>)) * <span class="text-yellow-300">5</span>;
    }
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Stack value: {}\n"</span>, .{<span class="text-green-300">stack_value</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Stack array: "</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">stack_array</span>) |<span class="text-green-300">item</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">item</span>});
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
    
    // 使用alloca在栈上动态分配
    <span class="text-blue-400">const</span> <span class="text-green-300">count</span> = <span class="text-yellow-300">3</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">dynamic_stack_array</span> = <span class="text-green-300">std</span>.<span class="text-green-300">fmt</span>.<span class="text-cyan-300">alloca</span>(<span class="text-blue-400">u8</span>, <span class="text-green-300">count</span>) <span class="text-blue-400">catch</span> <span class="text-blue-400">unreachable</span>;
    <span class="text-blue-400">for</span> (<span class="text-green-300">dynamic_stack_array</span>, <span class="text-yellow-300">0</span>..) |*<span class="text-green-300">item</span>, <span class="text-green-300">i</span>| {
        <span class="text-green-300">item</span>.* = <span class="text-purple-300">@as</span>(<span class="text-blue-400">u8</span>, <span class="text-purple-300">@intCast</span>(<span class="text-green-300">i</span> + <span class="text-yellow-300">65</span>)); // 'A', 'B', 'C'
    }
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Dynamic stack array: {s}\n"</span>, .{<span class="text-green-300">dynamic_stack_array</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">指针转换和切片</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-blue-400">var</span> <span class="text-green-300">buffer</span>: [<span class="text-yellow-300">10</span>]<span class="text-blue-400">u8</span> = <span class="text-yellow-300">"Hello"</span>[<span class="text-yellow-300">0</span>..];
    
    // 指针转换
    <span class="text-blue-400">var</span> <span class="text-green-300">ptr_u8</span>: <span class="text-blue-400">*</span><span class="text-blue-400">u8</span> = &<span class="text-green-300">buffer</span>[<span class="text-yellow-300">0</span>];
    <span class="text-blue-400">var</span> <span class="text-green-300">ptr_usize</span>: <span class="text-blue-400">*</span><span class="text-blue-400">const</span> <span class="text-blue-400">usize</span> = <span class="text-purple-300">@ptrCast</span>(<span class="text-blue-400">*</span><span class="text-blue-400">const</span> <span class="text-blue-400">usize</span>, <span class="text-green-300">ptr_u8</span>);
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Buffer: {s}\n"</span>, .{<span class="text-green-300">buffer</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"First byte: {}\n"</span>, .{<span class="text-green-300">ptr_u8</span>.*});
    
    // 从指针创建切片
    <span class="text-blue-400">const</span> <span class="text-green-300">slice</span> = <span class="text-purple-300">@as</span>(<span class="text-blue-400">[]</span><span class="text-blue-400">u8</span>, <span class="text-purple-300">@ptrCast</span>(<span class="text-purple-300">@alignCast</span>(&<span class="text-green-300">buffer</span>[<span class="text-yellow-300">0</span>]), <span class="text-green-300">buffer</span>.<span class="text-green-300">len</span>));
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Slice from pointer: {s}\n"</span>, .{<span class="text-green-300">slice</span>});
    
    // 指针数组
    <span class="text-blue-400">var</span> <span class="text-green-300">x</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">10</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">y</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">20</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">z</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">30</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">ptr_array</span> = [<span class="text-purple-300">_</span>]<span class="text-blue-400">*</span><span class="text-blue-400">i32</span>{&<span class="text-green-300">x</span>, &<span class="text-green-300">y</span>, &<span class="text-green-300">z</span>};
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Pointer array values: "</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">ptr_array</span>) |<span class="text-green-300">ptr</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">ptr</span>.*});
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 8. Zig 错误处理 -->
        <section id="section-8" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">8. Zig 错误处理</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 错误处理</h4>
                <p class="text-slate-300 mb-4">Zig提供了显式的错误处理机制，没有异常，所有错误都通过返回值处理，确保错误不会被忽略。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">基本错误处理</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 定义错误集
<span class="text-blue-400">const</span> <span class="text-purple-300">FileError</span> = <span class="text-blue-400">error</span> {
    <span class="text-purple-300">NotFound</span>,
    <span class="text-purple-300">PermissionDenied</span>,
    <span class="text-purple-300">ReadError</span>,
    <span class="text-purple-300">WriteError</span>,
};

// 可能返回错误的函数
<span class="text-blue-400">fn</span> <span class="text-cyan-300">openFile</span>(<span class="text-green-300">filename</span>: <span class="text-blue-400">[]const</span> <span class="text-blue-400">u8</span>) <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">if</span> (<span class="text-green-300">std</span>.<span class="text-green-300">mem</span>.<span class="text-cyan-300">eql</span>(<span class="text-blue-400">u8</span>, <span class="text-green-300">filename</span>, <span class="text-yellow-300">"nonexistent.txt"</span>)) {
        <span class="text-blue-400">return</span> <span class="text-blue-400">error</span>.<span class="text-purple-300">NotFound</span>;
    }
    <span class="text-blue-400">if</span> (<span class="text-green-300">std</span>.<span class="text-green-300">mem</span>.<span class="text-cyan-300">eql</span>(<span class="text-blue-400">u8</span>, <span class="text-green-300">filename</span>, <span class="text-yellow-300">"protected.txt"</span>)) {
        <span class="text-blue-400">return</span> <span class="text-blue-400">error</span>.<span class="text-purple-300">PermissionDenied</span>;
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>().<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"File opened successfully: {}\n"</span>, .{<span class="text-green-300">filename</span>});
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 使用 try 传播错误
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Trying to open file...\n"</span>, .{});
    
    // 使用 catch 处理错误
    <span class="text-cyan-300">openFile</span>(<span class="text-yellow-300">"nonexistent.txt"</span>) <span class="text-blue-400">catch</span> |<span class="text-green-300">err</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Error opening file: {}\n"</span>, .{<span class="text-green-300">err</span>});
    };
    
    // 使用 if 表达式处理错误
    <span class="text-blue-400">if</span> (<span class="text-cyan-300">openFile</span>(<span class="text-yellow-300">"protected.txt"</span>)) |_| {
        // 成功的分支
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"This won't be reached\n"</span>, .{});
    } <span class="text-blue-400">else</span> |<span class="text-green-300">err</span>| {
        // 错误的分支
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Another error: {}\n"</span>, .{<span class="text-green-300">err</span>});
    }
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">错误传播</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">const</span> <span class="text-purple-300">AppError</span> = <span class="text-blue-400">error</span> {
    <span class="text-purple-300">NetworkError</span>,
    <span class="text-purple-300">ParseError</span>,
    <span class="text-purple-300">ValidationError</span>,
};

<span class="text-blue-400">fn</span> <span class="text-cyan-300">fetchData</span>() <span class="text-purple-300">!</span><span class="text-blue-400">[]const</span> <span class="text-blue-400">u8</span> {
    // 模拟网络错误
    <span class="text-blue-400">return</span> <span class="text-blue-400">error</span>.<span class="text-purple-300">NetworkError</span>;
}

<span class="text-blue-400">fn</span> <span class="text-cyan-300">parseData</span>(<span class="text-green-300">data</span>: <span class="text-blue-400">[]const</span> <span class="text-blue-400">u8</span>) <span class="text-purple-300">!</span><span class="text-blue-400">i32</span> {
    // 模拟解析错误
    <span class="text-blue-400">return</span> <span class="text-blue-400">error</span>.<span class="text-purple-300">ParseError</span>;
}

<span class="text-blue-400">fn</span> <span class="text-cyan-300">validateData</span>(<span class="text-green-300">value</span>: <span class="text-blue-400">i32</span>) <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">if</span> (<span class="text-green-300">value</span> < <span class="text-yellow-300">0</span>) {
        <span class="text-blue-400">return</span> <span class="text-blue-400">error</span>.<span class="text-purple-300">ValidationError</span>;
    }
}

// 错误自动传播
<span class="text-blue-400">fn</span> <span class="text-cyan-300">processRequest</span>() <span class="text-purple-300">!</span><span class="text-blue-400">i32</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">data</span> = <span class="text-purple-300">try</span> <span class="text-cyan-300">fetchData</span>();
    <span class="text-blue-400">const</span> <span class="text-green-300">value</span> = <span class="text-purple-300">try</span> <span class="text-cyan-300">parseData</span>(<span class="text-green-300">data</span>);
    <span class="text-purple-300">try</span> <span class="text-cyan-300">validateData</span>(<span class="text-green-300">value</span>);
    <span class="text-blue-400">return</span> <span class="text-green-300">value</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-cyan-300">processRequest</span>() <span class="text-blue-400">catch</span> |<span class="text-green-300">err</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Request failed with error: {}\n"</span>, .{<span class="text-green-300">err</span>});
        <span class="text-blue-400">return</span> <span class="text-green-300">err</span>;
    };
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Result: {}\n"</span>, .{<span class="text-green-300">result</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">errdefer</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">fn</span> <span class="text-cyan-300">createResource</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Creating resource...\n"</span>, .{});
    
    // 无论函数正常返回还是出错，都会执行 errdefer 块
    <span class="text-purple-300">errdefer</span> {
        <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Cleaning up resource on error\n"</span>, .{}) <span class="text-blue-400">catch</span> {};
    };
    
    // 正常返回时执行的清理
    <span class="text-blue-400">defer</span> {
        <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Normal cleanup\n"</span>, .{}) <span class="text-blue-400">catch</span> {};
    };
    
    // 模拟错误
    <span class="text-blue-400">return</span> <span class="text-blue-400">error</span>.<span class="text-purple-300">ResourceError</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-cyan-300">createResource</span>() <span class="text-blue-400">catch</span> |<span class="text-green-300">err</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Error: {}\n"</span>, .{<span class="text-green-300">err</span>});
    };
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Program completed\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">错误联合类型和类型转换</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">const</span> <span class="text-purple-300">MathError</span> = <span class="text-blue-400">error</span> {
    <span class="text-purple-300">DivisionByZero</span>,
    <span class="text-purple-300">Overflow</span>,
};

<span class="text-blue-400">const</span> <span class="text-purple-300">IoError</span> = <span class="text-blue-400">error</span> {
    <span class="text-purple-300">FileNotFound</span>,
    <span class="text-purple-300">PermissionDenied</span>,
};

// 函数返回错误联合类型
<span class="text-blue-400">fn</span> <span class="text-cyan-300">safeDivide</span>(<span class="text-green-300">a</span>: <span class="text-blue-400">i32</span>, <span class="text-green-300">b</span>: <span class="text-blue-400">i32</span>) <span class="text-purple-300">MathError!</span><span class="text-blue-400">i32</span> {
    <span class="text-blue-400">if</span> (<span class="text-green-300">b</span> == <span class="text-yellow-300">0</span>) {
        <span class="text-blue-400">return</span> <span class="text-purple-300">MathError</span>.<span class="text-purple-300">DivisionByZero</span>;
    }
    <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-purple-300">@mulWithOverflow</span>(<span class="text-blue-400">i32</span>, <span class="text-green-300">a</span>, <span class="text-yellow-300">1</span>);
    <span class="text-blue-400">if</span> (<span class="text-green-300">result</span>[<span class="text-yellow-300">1</span>]) {
        <span class="text-blue-400">return</span> <span class="text-purple-300">MathError</span>.<span class="text-purple-300">Overflow</span>;
    }
    <span class="text-blue-400">return</span> <span class="text-green-300">result</span>[<span class="text-yellow-300">0</span>] / <span class="text-green-300">b</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 错误联合类型转换
    <span class="text-blue-400">const</span> <span class="text-green-300">result</span>: <span class="text-blue-400">anyerror!</span><span class="text-blue-400">i32</span> = <span class="text-cyan-300">safeDivide</span>(<span class="text-yellow-300">10</span>, <span class="text-yellow-300">0</span>);
    
    <span class="text-blue-400">switch</span> (<span class="text-green-300">result</span>) {
        <span class="text-purple-300">MathError</span>.<span class="text-purple-300">DivisionByZero</span> => <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Division by zero\n"</span>, .{}),
        <span class="text-purple-300">MathError</span>.<span class="text-purple-300">Overflow</span> => <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Overflow\n"</span>, .{}),
        <span class="text-blue-400">else</span> => |<span class="text-green-300">val</span>| <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Result: {}\n"</span>, .{<span class="text-green-300">val</span>}),
    }
    
    // 错误联合类型检查
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Result type: {}\n"</span>, .{<span class="text-purple-300">@TypeOf</span>(<span class="text-green-300">result</span>)});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">自定义错误处理函数</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">fn</span> <span class="text-cyan-300">handleError</span>(<span class="text-green-300">err</span>: <span class="text-blue-400">anyerror</span>) <span class="text-blue-400">noreturn</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Fatal error: {}\n"</span>, .{<span class="text-green-300">err</span>}) <span class="text-blue-400">catch</span> {};
    <span class="text-green-300">std</span>.<span class="text-green-300">process</span>.<span class="text-cyan-300">exit</span>(<span class="text-yellow-300">1</span>);
}

<span class="text-blue-400">fn</span> <span class="text-cyan-300">riskyOperation</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    // 模拟错误
    <span class="text-blue-400">return</span> <span class="text-blue-400">error</span>.<span class="text-purple-300">CriticalError</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Starting program...\n"</span>, .{});
    
    // 使用自定义错误处理
    <span class="text-cyan-300">riskyOperation</span>() <span class="text-blue-400">catch</span> <span class="text-cyan-300">handleError</span>;
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"This won't be reached\n"</span>, .{});
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 9. Zig 泛型 -->
        <section id="section-9" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">9. Zig 泛型</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 泛型</h4>
                <p class="text-slate-300 mb-4">Zig通过编译时参数和comptime机制实现泛型，提供类型安全的通用编程能力，同时保持高性能。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">泛型函数</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 泛型函数：交换两个值
<span class="text-blue-400">fn</span> <span class="text-cyan-300">swap</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">a</span>: <span class="text-blue-400">*</span><span class="text-green-300">T</span>, <span class="text-green-300">b</span>: <span class="text-blue-400">*</span><span class="text-green-300">T</span>) <span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">temp</span> = <span class="text-green-300">a</span>.*;
    <span class="text-green-300">a</span>.* = <span class="text-green-300">b</span>.*;
    <span class="text-green-300">b</span>.* = <span class="text-green-300">temp</span>;
}

// 泛型函数：返回最大值
<span class="text-blue-400">fn</span> <span class="text-cyan-300">max</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">a</span>: <span class="text-green-300">T</span>, <span class="text-green-300">b</span>: <span class="text-green-300">T</span>) <span class="text-green-300">T</span> {
    <span class="text-blue-400">return</span> <span class="text-blue-400">if</span> (<span class="text-green-300">a</span> > <span class="text-green-300">b</span>) <span class="text-green-300">a</span> <span class="text-blue-400">else</span> <span class="text-green-300">b</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 使用泛型函数交换整数
    <span class="text-blue-400">var</span> <span class="text-green-300">x</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">10</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">y</span>: <span class="text-blue-400">i32</span> = <span class="text-yellow-300">20</span>;
    <span class="text-cyan-300">swap</span>(<span class="text-blue-400">i32</span>, &<span class="text-green-300">x</span>, &<span class="text-green-300">y</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"After swap: x={}, y={}\n"</span>, .{<span class="text-green-300">x</span>, <span class="text-green-300">y</span>});
    
    // 使用泛型函数交换浮点数
    <span class="text-blue-400">var</span> <span class="text-green-300">a</span>: <span class="text-blue-400">f64</span> = <span class="text-yellow-300">3.14</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">b</span>: <span class="text-blue-400">f64</span> = <span class="text-yellow-300">2.71</span>;
    <span class="text-cyan-300">swap</span>(<span class="text-blue-400">f64</span>, &<span class="text-green-300">a</span>, &<span class="text-green-300">b</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"After swap: a={d:.2}, b={d:.2}\n"</span>, .{<span class="text-green-300">a</span>, <span class="text-green-300">b</span>});
    
    // 使用泛型函数比较值
    <span class="text-blue-400">const</span> <span class="text-green-300">max_int</span> = <span class="text-cyan-300">max</span>(<span class="text-blue-400">i32</span>, <span class="text-yellow-300">100</span>, <span class="text-yellow-300">200</span>);
    <span class="text-blue-400">const</span> <span class="text-green-300">max_float</span> = <span class="text-cyan-300">max</span>(<span class="text-blue-400">f64</span>, <span class="text-yellow-300">3.14159</span>, <span class="text-yellow-300">2.71828</span>);
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Max int: {}\n"</span>, .{<span class="text-green-300">max_int</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Max float: {d:.5}\n"</span>, .{<span class="text-green-300">max_float</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">泛型结构体</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 泛型结构体：可选类型包装器
<span class="text-blue-400">fn</span> <span class="text-cyan-300">Optional</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>) <span class="text-blue-400">type</span> {
    <span class="text-blue-400">return</span> <span class="text-blue-400">struct</span> {
        <span class="text-green-300">value</span>: <span class="text-green-300">T</span>,
        <span class="text-green-300">has_value</span>: <span class="text-blue-400">bool</span>,
        
        // 构造函数
        <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">some</span>(<span class="text-green-300">val</span>: <span class="text-green-300">T</span>) <span class="text-purple-300">@This</span>() {
            <span class="text-blue-400">return</span> .{ .<span class="text-green-300">value</span> = <span class="text-green-300">val</span>, .<span class="text-green-300">has_value</span> = <span class="text-blue-400">true</span> };
        }
        
        <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">none</span>() <span class="text-purple-300">@This</span>() {
            <span class="text-blue-400">return</span> .{ .<span class="text-green-300">value</span> = <span class="text-blue-400">undefined</span>, .<span class="text-green-300">has_value</span> = <span class="text-blue-400">false</span> };
        }
        
        // 获取值，如果没有值则返回默认值
        <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">unwrapOr</span>(<span class="text-green-300">self</span>: <span class="text-purple-300">@This</span>(), <span class="text-green-300">default</span>: <span class="text-green-300">T</span>) <span class="text-green-300">T</span> {
            <span class="text-blue-400">return</span> <span class="text-blue-400">if</span> (<span class="text-green-300">self</span>.<span class="text-green-300">has_value</span>) <span class="text-green-300">self</span>.<span class="text-green-300">value</span> <span class="text-blue-400">else</span> <span class="text-green-300">default</span>;
        }
        
        // 映射函数
        <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">map</span>(<span class="text-green-300">self</span>: <span class="text-purple-300">@This</span>(), <span class="text-purple-300">comptime</span> <span class="text-green-300">Fn</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">f</span>: <span class="text-green-300">Fn</span>) <span class="text-cyan-300">Optional</span>(<span class="text-purple-300">@typeInfo</span>(<span class="text-green-300">Fn</span>).<span class="text-green-300">Fn</span>.<span class="text-green-300">return_type</span>.?) {
            <span class="text-blue-400">if</span> (<span class="text-green-300">self</span>.<span class="text-green-300">has_value</span>) {
                <span class="text-blue-400">return</span> <span class="text-cyan-300">Optional</span>(<span class="text-purple-300">@typeInfo</span>(<span class="text-green-300">Fn</span>).<span class="text-green-300">Fn</span>.<span class="text-green-300">return_type</span>.?).<span class="text-cyan-300">some</span>(<span class="text-green-300">f</span>(<span class="text-green-300">self</span>.<span class="text-green-300">value</span>));
            } <span class="text-blue-400">else</span> {
                <span class="text-blue-400">return</span> <span class="text-cyan-300">Optional</span>(<span class="text-purple-300">@typeInfo</span>(<span class="text-green-300">Fn</span>).<span class="text-green-300">Fn</span>.<span class="text-green-300">return_type</span>.?).<span class="text-cyan-300">none</span>();
            }
        }
    };
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 创建泛型结构体实例
    <span class="text-blue-400">const</span> <span class="text-green-300">optional_int</span> = <span class="text-cyan-300">Optional</span>(<span class="text-blue-400">i32</span>).<span class="text-cyan-300">some</span>(<span class="text-yellow-300">42</span>);
    <span class="text-blue-400">const</span> <span class="text-green-300">optional_none</span> = <span class="text-cyan-300">Optional</span>(<span class="text-blue-400">f64</span>).<span class="text-cyan-300">none</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Optional int has value: {}\n"</span>, .{<span class="text-green-300">optional_int</span>.<span class="text-green-300">has_value</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Optional none has value: {}\n"</span>, .{<span class="text-green-300">optional_none</span>.<span class="text-green-300">has_value</span>});
    
    // 使用方法
    <span class="text-blue-400">const</span> <span class="text-green-300">int_value</span> = <span class="text-green-300">optional_int</span>.<span class="text-cyan-300">unwrapOr</span>(<span class="text-yellow-300">0</span>);
    <span class="text-blue-400">const</span> <span class="text-green-300">float_value</span> = <span class="text-green-300">optional_none</span>.<span class="text-cyan-300">unwrapOr</span>(<span class="text-yellow-300">3.14</span>);
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Unwrapped int: {}\n"</span>, .{<span class="text-green-300">int_value</span>});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Unwrapped none float: {d:.2}\n"</span>, .{<span class="text-green-300">float_value</span>});
    
    // 使用映射函数
    <span class="text-blue-400">const</span> <span class="text-green-300">doubled</span> = <span class="text-green-300">optional_int</span>.<span class="text-cyan-300">map</span>(<span class="text-blue-400">fn</span>(<span class="text-green-300">x</span>: <span class="text-blue-400">i32</span>) <span class="text-blue-400">i32</span> { <span class="text-blue-400">return</span> <span class="text-green-300">x</span> * <span class="text-yellow-300">2</span>; });
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Doubled value: {}\n"</span>, .{<span class="text-green-300">doubled</span>.<span class="text-green-300">value</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">编译时类型检查和约束</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 泛型函数：只接受可比较类型
<span class="text-blue-400">fn</span> <span class="text-cyan-300">compare</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">a</span>: <span class="text-green-300">T</span>, <span class="text-green-300">b</span>: <span class="text-green-300">T</span>) <span class="text-green-300">std</span>.<span class="text-green-300">math</span>.<span class="text-purple-300">Order</span> {
    // 编译时检查类型是否支持比较操作
    <span class="text-purple-300">comptime</span> {
        <span class="text-blue-400">const</span> <span class="text-green-300">type_info</span> = <span class="text-purple-300">@typeInfo</span>(<span class="text-green-300">T</span>);
        <span class="text-blue-400">if</span> (<span class="text-green-300">type_info</span> != .<span class="text-purple-300">Int</span> and <span class="text-green-300">type_info</span> != .<span class="text-purple-300">Float</span> and <span class="text-green-300">type_info</span> != .<span class="text-purple-300">Bool</span>) {
            <span class="text-purple-300">@compileError</span>(<span class="text-yellow-300">"Type must be comparable (int, float, or bool)"</span>);
        }
    }
    
    <span class="text-blue-400">if</span> (<span class="text-green-300">a</span> < <span class="text-green-300">b</span>) <span class="text-blue-400">return</span> .<span class="text-purple-300">lt</span>;
    <span class="text-blue-400">if</span> (<span class="text-green-300">a</span> > <span class="text-green-300">b</span>) <span class="text-blue-400">return</span> .<span class="text-purple-300">gt</span>;
    <span class="text-blue-400">return</span> .<span class="text-purple-300">eq</span>;
}

// 泛型函数：只接受整数类型
<span class="text-blue-400">fn</span> <span class="text-cyan-300">addOne</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">value</span>: <span class="text-green-300">T</span>) <span class="text-green-300">T</span> {
    <span class="text-purple-300">comptime</span> {
        <span class="text-blue-400">if</span> (<span class="text-purple-300">@typeInfo</span>(<span class="text-green-300">T</span>) != .<span class="text-purple-300">Int</span>) {
            <span class="text-purple-300">@compileError</span>(<span class="text-yellow-300">"Type must be integer"</span>);
        }
    }
    <span class="text-blue-400">return</span> <span class="text-green-300">value</span> + <span class="text-yellow-300">1</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 比较整数
    <span class="text-blue-400">const</span> <span class="text-green-300">order_int</span> = <span class="text-cyan-300">compare</span>(<span class="text-blue-400">i32</span>, <span class="text-yellow-300">10</span>, <span class="text-yellow-300">20</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Compare 10 and 20: {}\n"</span>, .{<span class="text-green-300">order_int</span>});
    
    // 比较浮点数
    <span class="text-blue-400">const</span> <span class="text-green-300">order_float</span> = <span class="text-cyan-300">compare</span>(<span class="text-blue-400">f64</span>, <span class="text-yellow-300">3.14</span>, <span class="text-yellow-300">2.71</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Compare 3.14 and 2.71: {}\n"</span>, .{<span class="text-green-300">order_float</span>});
    
    // 整数加一
    <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-cyan-300">addOne</span>(<span class="text-blue-400">u8</span>, <span class="text-yellow-300">255</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"255 + 1 = {}\n"</span>, .{<span class="text-green-300">result</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">泛型数组操作</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 泛型函数：查找元素
<span class="text-blue-400">fn</span> <span class="text-cyan-300">find</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">array</span>: []<span class="text-blue-400">const</span> <span class="text-green-300">T</span>, <span class="text-green-300">value</span>: <span class="text-green-300">T</span>) ?<span class="text-blue-400">usize</span> {
    <span class="text-blue-400">for</span> (<span class="text-green-300">array</span>, <span class="text-yellow-300">0</span>..) |<span class="text-green-300">item</span>, <span class="text-green-300">index</span>| {
        <span class="text-blue-400">if</span> (<span class="text-green-300">item</span> == <span class="text-green-300">value</span>) {
            <span class="text-blue-400">return</span> <span class="text-green-300">index</span>;
        }
    }
    <span class="text-blue-400">return</span> <span class="text-blue-400">null</span>;
}

// 泛型函数：数组反转
<span class="text-blue-400">fn</span> <span class="text-cyan-300">reverse</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">array</span>: []<span class="text-green-300">T</span>) <span class="text-blue-400">void</span> {
    <span class="text-blue-400">var</span> <span class="text-green-300">left</span>: <span class="text-blue-400">usize</span> = <span class="text-yellow-300">0</span>;
    <span class="text-blue-400">var</span> <span class="text-green-300">right</span>: <span class="text-blue-400">usize</span> = <span class="text-green-300">array</span>.<span class="text-green-300">len</span> - <span class="text-yellow-300">1</span>;
    
    <span class="text-blue-400">while</span> (<span class="text-green-300">left</span> < <span class="text-green-300">right</span>) {
        // 使用之前定义的swap函数
        <span class="text-cyan-300">swap</span>(<span class="text-green-300">T</span>, &<span class="text-green-300">array</span>[<span class="text-green-300">left</span>], &<span class="text-green-300">array</span>[<span class="text-green-300">right</span>]);
        <span class="text-green-300">left</span> += <span class="text-yellow-300">1</span>;
        <span class="text-green-300">right</span> -= <span class="text-yellow-300">1</span>;
    }
}

// 泛型函数：数组求和
<span class="text-blue-400">fn</span> <span class="text-cyan-300">sum</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">array</span>: []<span class="text-blue-400">const</span> <span class="text-green-300">T</span>) <span class="text-green-300">T</span> {
    <span class="text-blue-400">var</span> <span class="text-green-300">result</span>: <span class="text-green-300">T</span> = <span class="text-yellow-300">0</span>;
    <span class="text-blue-400">for</span> (<span class="text-green-300">array</span>) |<span class="text-green-300">item</span>| {
        <span class="text-green-300">result</span> += <span class="text-green-300">item</span>;
    }
    <span class="text-blue-400">return</span> <span class="text-green-300">result</span>;
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 整数数组操作
    <span class="text-blue-400">var</span> <span class="text-green-300">int_array</span> = [<span class="text-yellow-300">_</span>]<span class="text-blue-400">i32</span>{<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>, <span class="text-yellow-300">4</span>, <span class="text-yellow-300">5</span>};
    <span class="text-blue-400">const</span> <span class="text-green-300">int_sum</span> = <span class="text-cyan-300">sum</span>(<span class="text-blue-400">i32</span>, &<span class="text-green-300">int_array</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Int array sum: {}\n"</span>, .{<span class="text-green-300">int_sum</span>});
    
    // 查找元素
    <span class="text-blue-400">const</span> <span class="text-green-300">index</span> = <span class="text-cyan-300">find</span>(<span class="text-blue-400">i32</span>, &<span class="text-green-300">int_array</span>, <span class="text-yellow-300">3</span>);
    <span class="text-blue-400">if</span> (<span class="text-green-300">index</span>) |<span class="text-green-300">i</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Found 3 at index: {}\n"</span>, .{<span class="text-green-300">i</span>});
    }
    
    // 反转数组
    <span class="text-cyan-300">reverse</span>(<span class="text-blue-400">i32</span>, &<span class="text-green-300">int_array</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Reversed array: "</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">int_array</span>) |<span class="text-green-300">item</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{} "</span>, .{<span class="text-green-300">item</span>});
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"\n"</span>, .{});
    
    // 浮点数数组操作
    <span class="text-blue-400">const</span> <span class="text-green-300">float_array</span> = [<span class="text-yellow-300">_</span>]<span class="text-blue-400">f64</span>{<span class="text-yellow-300">1.1</span>, <span class="text-yellow-300">2.2</span>, <span class="text-yellow-300">3.3</span>, <span class="text-yellow-300">4.4</span>, <span class="text-yellow-300">5.5</span>};
    <span class="text-blue-400">const</span> <span class="text-green-300">float_sum</span> = <span class="text-cyan-300">sum</span>(<span class="text-blue-400">f64</span>, &<span class="text-green-300">float_array</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Float array sum: {d:.2}\n"</span>, .{<span class="text-green-300">float_sum</span>});
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 10. Zig 编译时特性 -->
        <section id="section-10" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">10. Zig 编译时特性</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 编译时特性</h4>
                <p class="text-slate-300 mb-4">Zig提供了强大的编译时编程能力，允许在编译阶段执行代码、进行类型检查和生成优化的运行时代码。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">comptime变量和表达式</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 编译时常量表达式
<span class="text-blue-400">const</span> <span class="text-green-300">COMPILE_TIME_CONST</span> = <span class="text-yellow-300">10</span> * <span class="text-yellow-300">20</span> + <span class="text-yellow-300">5</span>;

// 编译时变量
<span class="text-purple-300">comptime</span> <span class="text-blue-400">var</span> <span class="text-green-300">comptime_counter</span>: <span class="text-blue-400">u32</span> = <span class="text-yellow-300">0</span>;

// 编译时函数
<span class="text-blue-400">fn</span> <span class="text-cyan-300">comptimeAdd</span>(<span class="text-green-300">a</span>: <span class="text-blue-400">u32</span>, <span class="text-green-300">b</span>: <span class="text-blue-400">u32</span>) <span class="text-blue-400">u32</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-green-300">comptime_counter</span> += <span class="text-yellow-300">1</span>;
    <span class="text-blue-400">return</span> <span class="text-green-300">a</span> + <span class="text-green-300">b</span>;
} }

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 编译时计算的常量
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Compile time const: {}\n"</span>, .{<span class="text-green-300">COMPILE_TIME_CONST</span>});
    
    // 编译时函数调用
    <span class="text-blue-400">const</span> <span class="text-green-300">sum</span> = <span class="text-cyan-300">comptimeAdd</span>(<span class="text-yellow-300">100</span>, <span class="text-yellow-300">200</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Comptime sum: {}\n"</span>, .{<span class="text-green-300">sum</span>});
    
    // 编译时计数器的值在编译时已确定
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Comptime counter: {}\n"</span>, .{<span class="text-green-300">comptime_counter</span>});
    
    // 编译时字符串连接
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">hello</span> = <span class="text-yellow-300">"Hello, "</span> ++ <span class="text-yellow-300">"World!"</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Comptime string: {}\n"</span>, .{<span class="text-green-300">hello</span>});
    
    // 编译时条件
    <span class="text-purple-300">comptime</span> {
        <span class="text-blue-400">if</span> (<span class="text-green-300">COMPILE_TIME_CONST</span> > <span class="text-yellow-300">100</span>) {
            <span class="text-purple-300">@compileLog</span>(<span class="text-yellow-300">"Compiled with large constant"</span>);
        } <span class="text-blue-400">else</span> {
            <span class="text-purple-300">@compileLog</span>(<span class="text-yellow-300">"Compiled with small constant"</span>);
        }
    }
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">编译时类型检查和反射</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 编译时类型检查
<span class="text-blue-400">fn</span> <span class="text-cyan-300">checkType</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">T</span>: <span class="text-blue-400">type</span>) <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">type_info</span> = <span class="text-purple-300">@typeInfo</span>(<span class="text-green-300">T</span>);
    
    <span class="text-blue-400">switch</span> (<span class="text-green-300">type_info</span>) {
        .<span class="text-purple-300">Int</span> => <span class="text-purple-300">@compileLog</span>(<span class="text-yellow-300">"Type is integer: "</span>, .{<span class="text-purple-300">@typeName</span>(<span class="text-green-300">T</span>)}),
        .<span class="text-purple-300">Float</span> => <span class="text-purple-300">@compileLog</span>(<span class="text-yellow-300">"Type is float: "</span>, .{<span class="text-purple-300">@typeName</span>(<span class="text-green-300">T</span>)}),
        .<span class="text-purple-300">Bool</span> => <span class="text-purple-300">@compileLog</span>(<span class="text-yellow-300">"Type is boolean: "</span>, .{<span class="text-purple-300">@typeName</span>(<span class="text-green-300">T</span>)}),
        .<span class="text-purple-300">Struct</span> => <span class="text-purple-300">@compileLog</span>(<span class="text-yellow-300">"Type is struct: "</span>, .{<span class="text-purple-300">@typeName</span>(<span class="text-green-300">T</span>)}),
        <span class="text-blue-400">else</span> => <span class="text-purple-300">@compileLog</span>(<span class="text-yellow-300">"Type is: "</span>, .{<span class="text-purple-300">@typeName</span>(<span class="text-green-300">T</span>)}),
    }
} }

// 编译时类型转换
<span class="text-blue-400">fn</span> <span class="text-cyan-300">safeCast</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">To</span>: <span class="text-blue-400">type</span>, <span class="text-green-300">from</span>: <span class="text-blue-400">anytype</span>) <span class="text-green-300">To</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">from_info</span> = <span class="text-purple-300">@typeInfo</span>(<span class="text-purple-300">@TypeOf</span>(<span class="text-green-300">from</span>));
    <span class="text-blue-400">const</span> <span class="text-green-300">to_info</span> = <span class="text-purple-300">@typeInfo</span>(<span class="text-green-300">To</span>);
    
    // 编译时检查类型兼容性
    <span class="text-blue-400">if</span> (<span class="text-green-300">from_info</span> == .<span class="text-purple-300">Int</span> and <span class="text-green-300">to_info</span> == .<span class="text-purple-300">Int</span>) {
        <span class="text-blue-400">return</span> <span class="text-purple-300">@intCast</span>(<span class="text-green-300">To</span>, <span class="text-green-300">from</span>);
    } <span class="text-blue-400">else</span> <span class="text-blue-400">if</span> (<span class="text-green-300">from_info</span> == .<span class="text-purple-300">Float</span> and <span class="text-green-300">to_info</span> == .<span class="text-purple-300">Float</span>) {
        <span class="text-blue-400">return</span> <span class="text-purple-300">@floatCast</span>(<span class="text-green-300">To</span>, <span class="text-green-300">from</span>);
    } <span class="text-blue-400">else</span> {
        <span class="text-purple-300">@compileError</span>(<span class="text-yellow-300">"Incompatible types for casting"</span>);
    }
} }

// 结构体定义
<span class="text-blue-400">const</span> <span class="text-green-300">Point</span> = <span class="text-blue-400">struct</span> {
    <span class="text-green-300">x</span>: <span class="text-blue-400">f64</span>,
    <span class="text-green-300">y</span>: <span class="text-blue-400">f64</span>,
};

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 编译时类型检查
    <span class="text-cyan-300">checkType</span>(<span class="text-blue-400">i32</span>);
    <span class="text-cyan-300">checkType</span>(<span class="text-blue-400">f64</span>);
    <span class="text-cyan-300">checkType</span>(<span class="text-blue-400">bool</span>);
    <span class="text-cyan-300">checkType</span>(<span class="text-green-300">Point</span>);
    
    // 安全的编译时类型转换
    <span class="text-blue-400">const</span> <span class="text-green-300">a</span>: <span class="text-blue-400">u8</span> = <span class="text-yellow-300">255</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">b</span>: <span class="text-blue-400">i16</span> = <span class="text-cyan-300">safeCast</span>(<span class="text-blue-400">i16</span>, <span class="text-green-300">a</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Safe cast u8 to i16: {}\n"</span>, .{<span class="text-green-300">b</span>});
    
    <span class="text-blue-400">const</span> <span class="text-green-300">c</span>: <span class="text-blue-400">f32</span> = <span class="text-yellow-300">3.14</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">d</span>: <span class="text-blue-400">f64</span> = <span class="text-cyan-300">safeCast</span>(<span class="text-blue-400">f64</span>, <span class="text-green-300">c</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Safe cast f32 to f64: {d:.2}\n"</span>, .{<span class="text-green-300">d</span>});
    
    // 编译时获取类型名称
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">int_name</span> = <span class="text-purple-300">@typeName</span>(<span class="text-blue-400">i32</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Type name of i32: {}\n"</span>, .{<span class="text-green-300">int_name</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">编译时循环和条件</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 编译时斐波那契数列
<span class="text-blue-400">fn</span> <span class="text-cyan-300">fibonacci</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">n</span>: <span class="text-blue-400">u32</span>) <span class="text-blue-400">u64</span> { <span class="text-purple-300">comptime</span> { 
    <span class="text-blue-400">if</span> (<span class="text-green-300">n</span> <= <span class="text-yellow-300">1</span>) {
        <span class="text-blue-400">return</span> <span class="text-green-300">n</span>;
    }
    <span class="text-blue-400">return</span> <span class="text-cyan-300">fibonacci</span>(<span class="text-green-300">n</span> - <span class="text-yellow-300">1</span>) + <span class="text-cyan-300">fibonacci</span>(<span class="text-green-300">n</span> - <span class="text-yellow-300">2</span>);
} }

// 编译时生成数组
<span class="text-blue-400">fn</span> <span class="text-cyan-300">generateArray</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">size</span>: <span class="text-blue-400">u32</span>, <span class="text-purple-300">comptime</span> <span class="text-green-300">multiplier</span>: <span class="text-blue-400">u32</span>) [<span class="text-green-300">size</span>]<span class="text-blue-400">u32</span> { <span class="text-purple-300">comptime</span> { 
    <span class="text-blue-400">var</span> <span class="text-green-300">array</span>: [<span class="text-green-300">size</span>]<span class="text-blue-400">u32</span> = <span class="text-blue-400">undefined</span>;
    <span class="text-blue-400">for</span> (<span class="text-yellow-300">0</span>..<span class="text-green-300">size</span>) |<span class="text-green-300">i</span>| {
        <span class="text-green-300">array</span>[<span class="text-green-300">i</span>] = <span class="text-purple-300">@intCast</span>(<span class="text-blue-400">u32</span>, <span class="text-green-300">i</span>) * <span class="text-green-300">multiplier</span>;
    }
    <span class="text-blue-400">return</span> <span class="text-green-300">array</span>;
} }

// 编译时条件类型生成
<span class="text-blue-400">fn</span> <span class="text-cyan-300">SelectType</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">condition</span>: <span class="text-blue-400">bool</span>) <span class="text-blue-400">type</span> { <span class="text-purple-300">comptime</span> { 
    <span class="text-blue-400">return</span> <span class="text-blue-400">if</span> (<span class="text-green-300">condition</span>) <span class="text-blue-400">i32</span> <span class="text-blue-400">else</span> <span class="text-blue-400">f64</span>;
} }

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 编译时计算斐波那契数
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">fib_20</span> = <span class="text-cyan-300">fibonacci</span>(<span class="text-yellow-300">20</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Fibonacci(20) = {}\n"</span>, .{<span class="text-green-300">fib_20</span>});
    
    // 编译时生成的数组
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">generated_array</span> = <span class="text-cyan-300">generateArray</span>(<span class="text-yellow-300">5</span>, <span class="text-yellow-300">3</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Generated array: ["</span>, .{});
    <span class="text-blue-400">for</span> (<span class="text-green-300">generated_array</span>) |<span class="text-green-300">item</span>, <span class="text-green-300">i</span>| {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"{}{s}"</span>, .{<span class="text-green-300">item</span>, <span class="text-blue-400">if</span> (<span class="text-green-300">i</span> == <span class="text-green-300">generated_array</span>.<span class="text-green-300">len</span> - <span class="text-yellow-300">1</span>) <span class="text-yellow-300">"]\n"</span> <span class="text-blue-400">else</span> <span class="text-yellow-300">", "</span>});
    }
    
    // 条件类型
    <span class="text-blue-400">const</span> <span class="text-green-300">IntOrFloat</span> = <span class="text-cyan-300">SelectType</span>(<span class="text-blue-400">true</span>); // 选择i32
    <span class="text-blue-400">var</span> <span class="text-green-300">value</span>: <span class="text-green-300">IntOrFloat</span> = <span class="text-yellow-300">42</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Selected type value: {}\n"</span>, .{<span class="text-green-300">value</span>});
    
    // 编译时循环展开
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">var</span> <span class="text-green-300">sum</span>: <span class="text-blue-400">u32</span> = <span class="text-yellow-300">0</span>;
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">for</span> (<span class="text-yellow-300">0</span>..<span class="text-yellow-300">10</span>) |<span class="text-green-300">i</span>| {
        <span class="text-green-300">sum</span> += <span class="text-green-300">i</span>;
    }
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Sum from 0 to 9 (compile time): {}\n"</span>, .{<span class="text-green-300">sum</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">编译时字符串操作</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-purple-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 编译时字符串长度
<span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">hello_len</span> = <span class="text-yellow-300">"Hello, World!"</span>.<span class="text-green-300">len</span>;

// 编译时字符串连接
<span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">full_name</span> = <span class="text-yellow-300">"John"</span> ++ <span class="text-yellow-300">" "</span> ++ <span class="text-yellow-300">"Doe"</span>;

// 编译时字符串比较
<span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">strings_equal</span> = <span class="text-green-300">std</span>.<span class="text-green-300">mem</span>.<span class="text-cyan-300">eql</span>(<span class="text-blue-400">u8</span>, <span class="text-yellow-300">"zig"</span>, <span class="text-yellow-300">"ZIG"</span>) == <span class="text-blue-400">false</span>;

// 编译时字符串转换为大写
<span class="text-blue-400">fn</span> <span class="text-cyan-300">toUpper</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">str</span>: []<span class="text-blue-400">const</span> <span class="text-blue-400">u8</span>) []<span class="text-blue-400">const</span> <span class="text-blue-400">u8</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-blue-400">var</span> <span class="text-green-300">result</span>: [<span class="text-green-300">str</span>.<span class="text-green-300">len</span>]<span class="text-blue-400">u8</span> = <span class="text-blue-400">undefined</span>;
    <span class="text-blue-400">for</span> (<span class="text-green-300">str</span>, <span class="text-yellow-300">0</span>..) |<span class="text-green-300">c</span>, <span class="text-green-300">i</span>| {
        <span class="text-blue-400">if</span> (<span class="text-green-300">c</span> >= <span class="text-yellow-300">'a'</span> and <span class="text-green-300">c</span> <= <span class="text-yellow-300">'z'</span>) {
            <span class="text-green-300">result</span>[<span class="text-green-300">i</span>] = <span class="text-green-300">c</span> - <span class="text-yellow-300">32</span>;
        } <span class="text-blue-400">else</span> {
            <span class="text-green-300">result</span>[<span class="text-green-300">i</span>] = <span class="text-green-300">c</span>;
        }
    }
    <span class="text-blue-400">return</span> &<span class="text-green-300">result</span>;
} }

// 编译时格式化字符串
<span class="text-blue-400">fn</span> <span class="text-cyan-300">formatInt</span>(<span class="text-purple-300">comptime</span> <span class="text-green-300">n</span>: <span class="text-blue-400">u32</span>) []<span class="text-blue-400">const</span> <span class="text-blue-400">u8</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-blue-400">var</span> <span class="text-green-300">buffer</span>: [<span class="text-yellow-300">20</span>]<span class="text-blue-400">u8</span> = <span class="text-blue-400">undefined</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">len</span> = <span class="text-green-300">std</span>.<span class="text-green-300">fmt</span>.<span class="text-cyan-300">formatInt</span>(<span class="text-green-300">n</span>, <span class="text-yellow-300">10</span>, .<span class="text-purple-300">lower</span>, .{}, &<span class="text-green-300">buffer</span>) <span class="text-blue-400">catch</span> <span class="text-blue-400">unreachable</span>;
    <span class="text-blue-400">return</span> <span class="text-green-300">buffer</span>[<span class="text-yellow-300">0</span>..<span class="text-green-300">len</span>];
} }

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 编译时字符串长度
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"String length: {}\n"</span>, .{<span class="text-green-300">hello_len</span>});
    
    // 编译时字符串连接
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Full name: {}\n"</span>, .{<span class="text-green-300">full_name</span>});
    
    // 编译时字符串比较
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Strings equal: {}\n"</span>, .{<span class="text-green-300">strings_equal</span>});
    
    // 编译时字符串转换
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">uppercase</span> = <span class="text-cyan-300">toUpper</span>(<span class="text-yellow-300">"hello zig programming"</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Uppercase: {}\n"</span>, .{<span class="text-green-300">uppercase</span>});
    
    // 编译时格式化
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">formatted</span> = <span class="text-cyan-300">formatInt</span>(<span class="text-yellow-300">12345</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Formatted int: {}\n"</span>, .{<span class="text-green-300">formatted</span>});
    
    // 编译时字符串切片
    <span class="text-purple-300">comptime</span> <span class="text-blue-400">const</span> <span class="text-green-300">slice</span> = <span class="text-yellow-300">"Hello, World!"</span>.[<span class="text-yellow-300">7</span>..<span class="text-yellow-300">12</span>];
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"String slice: {}\n"</span>, .{<span class="text-green-300">slice</span>});
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 11. Zig 模块和导入 -->
        <section id="section-11" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">11. Zig 模块和导入</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 模块和导入</h4>
                <p class="text-slate-300 mb-4">Zig使用模块系统组织代码，通过import语句导入其他模块，支持相对路径和绝对路径导入。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">基本模块导入</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
// 导入标准库模块

// 导入用户自定义模块
// <span class="text-blue-400">const</span> <span class="text-green-300">my_module</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./my_module.zig"</span>);
// <span class="text-blue-400">const</span> <span class="text-green-300">utils</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./utils/utils.zig"</span>);

// 导入模块并定义别名
// <span class="text-blue-400">const</span> <span class="text-green-300">m</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./my_module.zig"</span>);

// 导入标准库的特定子模块
<span class="text-blue-400">const</span> <span class="text-green-300">math</span> = <span class="text-green-300">std</span>.<span class="text-green-300">math</span>;
<span class="text-blue-400">const</span> <span class="text-green-300">fmt</span> = <span class="text-green-300">std</span>.<span class="text-green-300">fmt</span>;
<span class="text-blue-400">const</span> <span class="text-green-300">mem</span> = <span class="text-green-300">std</span>.<span class="text-green-300">mem</span>;

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 使用标准库模块
    <span class="text-blue-400">const</span> <span class="text-green-300">pi</span> = <span class="text-green-300">math</span>.<span class="text-green-300">pi</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Pi: {d:.4}\n"</span>, .{<span class="text-green-300">pi</span>});
    
    // 使用标准库的格式化功能
    <span class="text-blue-400">const</span> <span class="text-green-300">formatted</span> = <span class="text-purple-300">try</span> <span class="text-green-300">fmt</span>.<span class="text-cyan-300">allocPrint</span>(<span class="text-green-300">std</span>.<span class="text-green-300">heap</span>.<span class="text-green-300">page_allocator</span>, <span class="text-yellow-300">"Number: {d}, Text: {s}"</span>, .{<span class="text-yellow-300">42</span>, <span class="text-yellow-300">"Zig"</span>});
    <span class="text-purple-300">defer</span> <span class="text-green-300">std</span>.<span class="text-green-300">heap</span>.<span class="text-green-300">page_allocator</span>.<span class="text-cyan-300">free</span>(<span class="text-green-300">formatted</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Formatted: {s}\n"</span>, .{<span class="text-green-300">formatted</span>});
    
    // 使用内存操作函数
    <span class="text-blue-400">const</span> <span class="text-green-300">text</span> = <span class="text-yellow-300">"Hello, Zig!"</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">is_equal</span> = <span class="text-green-300">mem</span>.<span class="text-cyan-300">eql</span>(<span class="text-yellow-300">u8</span>, <span class="text-green-300">text</span>, <span class="text-yellow-300">"Hello, Zig!"</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Strings equal: {}\n"</span>, .{<span class="text-green-300">is_equal</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">创建和使用自定义模块</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">// === my_math.zig (自定义模块) ===
// <span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
// 
// // 导出常量
// <span class="text-blue-400">pub</span> <span class="text-blue-400">const</span> <span class="text-yellow-300">PI</span> = <span class="text-yellow-300">3.14159265359</span>;
// <span class="text-blue-400">pub</span> <span class="text-blue-400">const</span> <span class="text-yellow-300">E</span> = <span class="text-yellow-300">2.71828182846</span>;
// 
// // 导出函数
// <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">add</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">f64</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">f64</span>) <span class="text-yellow-300">f64</span> { <span class="text-blue-400">return</span> <span class="text-green-300">a</span> + <span class="text-green-300">b</span>; }
// <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">subtract</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">f64</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">f64</span>) <span class="text-yellow-300">f64</span> { <span class="text-blue-400">return</span> <span class="text-green-300">a</span> - <span class="text-green-300">b</span>; }
// <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">multiply</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">f64</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">f64</span>) <span class="text-yellow-300">f64</span> { <span class="text-blue-400">return</span> <span class="text-green-300">a</span> * <span class="text-green-300">b</span>; }
// <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">divide</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">f64</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">f64</span>) <span class="text-purple-300">!</span><span class="text-yellow-300">f64</span> {
//     <span class="text-blue-400">if</span> (<span class="text-green-300">b</span> == <span class="text-yellow-300">0</span>) <span class="text-blue-400">return</span> <span class="text-red-400">error</span>.<span class="text-red-400">DivisionByZero</span>;
//     <span class="text-blue-400">return</span> <span class="text-green-300">a</span> / <span class="text-green-300">b</span>;
// }
// 
// // 私有函数（不导出）
// <span class="text-blue-400">fn</span> <span class="text-cyan-300">square</span>(<span class="text-green-300">x</span>: <span class="text-yellow-300">f64</span>) <span class="text-yellow-300">f64</span> { <span class="text-blue-400">return</span> <span class="text-green-300">x</span> * <span class="text-green-300">x</span>; }

// === main.zig (主程序) ===
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
// <span class="text-blue-400">const</span> <span class="text-green-300">my_math</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./my_math.zig"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 模拟使用自定义模块
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"PI: {d:.4}\n"</span>, .{<span class="text-green-300">my_math</span>.<span class="text-yellow-300">PI</span>});
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"E: {d:.4}\n"</span>, .{<span class="text-green-300">my_math</span>.<span class="text-yellow-300">E</span>});
    // 
    // <span class="text-blue-400">const</span> <span class="text-green-300">sum</span> = <span class="text-green-300">my_math</span>.<span class="text-cyan-300">add</span>(<span class="text-yellow-300">10.5</span>, <span class="text-yellow-300">20.7</span>);
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Sum: {d:.2}\n"</span>, .{<span class="text-green-300">sum</span>});
    // 
    // <span class="text-blue-400">const</span> <span class="text-green-300">quotient</span> = <span class="text-purple-300">try</span> <span class="text-green-300">my_math</span>.<span class="text-cyan-300">divide</span>(<span class="text-yellow-300">100.0</span>, <span class="text-yellow-300">20.0</span>);
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Quotient: {d:.2}\n"</span>, .{<span class="text-green-300">quotient</span>});
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"模块示例: 定义了my_math.zig模块，包含基本数学函数\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">模块的公共和私有成员</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">// === utils.zig (工具模块) ===
// // 公共常量（可被导入模块访问）
// <span class="text-blue-400">pub</span> <span class="text-blue-400">const</span> <span class="text-yellow-300">VERSION</span> = <span class="text-yellow-300">"1.0.0"</span>;
// 
// // 公共结构体
// <span class="text-blue-400">pub</span> <span class="text-blue-400">const</span> <span class="text-purple-300">Point</span> = <span class="text-blue-400">struct</span> {
//     <span class="text-green-300">x</span>: <span class="text-yellow-300">f64</span>,
//     <span class="text-green-300">y</span>: <span class="text-yellow-300">f64</span>,
//     
//     // 公共方法
//     <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">distance</span>(<span class="text-green-300">self</span>: <span class="text-cyan-300">@This</span>(), <span class="text-green-300">other</span>: <span class="text-cyan-300">@This</span>()) <span class="text-yellow-300">f64</span> {
//         <span class="text-blue-400">const</span> <span class="text-green-300">dx</span> = <span class="text-green-300">self</span>.<span class="text-green-300">x</span> - <span class="text-green-300">other</span>.<span class="text-green-300">x</span>;
//         <span class="text-blue-400">const</span> <span class="text-green-300">dy</span> = <span class="text-green-300">self</span>.<span class="text-green-300">y</span> - <span class="text-green-300">other</span>.<span class="text-green-300">y</span>;
//         <span class="text-blue-400">return</span> <span class="text-cyan-300">@sqrt</span>(<span class="text-green-300">dx</span> * <span class="text-green-300">dx</span> + <span class="text-green-300">dy</span> * <span class="text-green-300">dy</span>);
//     }
// };
// 
// // 公共函数
// <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">formatError</span>(<span class="text-green-300">err</span>: <span class="text-yellow-300">anyerror</span>) []<span class="text-blue-400">const</span> <span class="text-yellow-300">u8</span> { <span class="text-purple-300">comptime</span> {
//     <span class="text-blue-400">return</span> <span class="text-cyan-300">@errorName</span>(<span class="text-green-300">err</span>);
// } }
// 
// // 私有常量（只能在当前模块访问）
// <span class="text-blue-400">const</span> <span class="text-yellow-300">PRIVATE_KEY</span> = <span class="text-yellow-300">"secret_key"</span>;
// 
// // 私有函数（只能在当前模块访问）
// <span class="text-blue-400">fn</span> <span class="text-cyan-300">privateHelper</span>() <span class="text-blue-400">void</span> {
//     // 实现细节
// }

// === main.zig ===
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
// <span class="text-blue-400">const</span> <span class="text-green-300">utils</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./utils.zig"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 模拟使用工具模块
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Utils version: {s}\n"</span>, .{<span class="text-green-300">utils</span>.<span class="text-yellow-300">VERSION</span>});
    // 
    // <span class="text-blue-400">const</span> <span class="text-green-300">p1</span> = <span class="text-green-300">utils</span>.<span class="text-purple-300">Point</span>{ .<span class="text-green-300">x</span> = <span class="text-yellow-300">0</span>, .<span class="text-green-300">y</span> = <span class="text-yellow-300">0</span> };
    // <span class="text-blue-400">const</span> <span class="text-green-300">p2</span> = <span class="text-green-300">utils</span>.<span class="text-purple-300">Point</span>{ .<span class="text-green-300">x</span> = <span class="text-yellow-300">3</span>, .<span class="text-green-300">y</span> = <span class="text-yellow-300">4</span> };
    // <span class="text-blue-400">const</span> <span class="text-green-300">dist</span> = <span class="text-green-300">p1</span>.<span class="text-cyan-300">distance</span>(<span class="text-green-300">p2</span>);
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Distance: {d:.2}\n"</span>, .{<span class="text-green-300">dist</span>});
    // 
    // <span class="text-blue-400">const</span> <span class="text-green-300">err_msg</span> = <span class="text-green-300">utils</span>.<span class="text-cyan-300">formatError</span>(<span class="text-red-400">error</span>.<span class="text-red-400">FileNotFound</span>);
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Error message: {s}\n"</span>, .{<span class="text-green-300">err_msg</span>});
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"模块成员可见性: 使用pub关键字导出公共成员，私有成员仅模块内可见\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">模块的依赖管理</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">// === complex_module.zig ===
// // 导入其他模块
// <span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
// <span class="text-blue-400">const</span> <span class="text-green-300">my_math</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./my_math.zig"</span>);
// <span class="text-blue-400">const</span> <span class="text-green-300">utils</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./utils.zig"</span>);
// 
// // 导出组合功能
// <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">calculateComplex</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">f64</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">f64</span>, <span class="text-green-300">c</span>: <span class="text-yellow-300">f64</span>) <span class="text-purple-300">!</span><span class="text-yellow-300">f64</span> {
//     <span class="text-blue-400">const</span> <span class="text-green-300">sum</span> = <span class="text-green-300">my_math</span>.<span class="text-cyan-300">add</span>(<span class="text-green-300">a</span>, <span class="text-green-300">my_math</span>.<span class="text-cyan-300">add</span>(<span class="text-green-300">b</span>, <span class="text-green-300">c</span>));
//     <span class="text-blue-400">const</span> <span class="text-green-300">product</span> = <span class="text-green-300">my_math</span>.<span class="text-cyan-300">multiply</span>(<span class="text-green-300">sum</span>, <span class="text-yellow-300">2.0</span>);
//     <span class="text-blue-400">return</span> <span class="text-green-300">my_math</span>.<span class="text-cyan-300">divide</span>(<span class="text-green-300">product</span>, <span class="text-yellow-300">3.0</span>);
// }
// 
// <span class="text-blue-400">pub</span> <span class="text-blue-400">const</span> <span class="text-purple-300">ComplexResult</span> = <span class="text-blue-400">struct</span> {
//     <span class="text-green-300">value</span>: <span class="text-yellow-300">f64</span>,
//     <span class="text-green-300">status</span>: []<span class="text-blue-400">const</span> <span class="text-yellow-300">u8</span>,
// };

// === main.zig ===
<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
// <span class="text-blue-400">const</span> <span class="text-green-300">complex_module</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"./complex_module.zig"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 模拟使用复杂模块
    // <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-purple-300">try</span> <span class="text-green-300">complex_module</span>.<span class="text-cyan-300">calculateComplex</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">20.0</span>, <span class="text-yellow-300">30.0</span>);
    // <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Complex calculation result: {d:.2}\n"</span>, .{<span class="text-green-300">result</span>});
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"模块依赖: 模块可以导入其他模块，形成依赖关系\n"</span>, .{});
    
    // 使用标准库的包管理相关功能
    <span class="text-blue-400">const</span> <span class="text-green-300">package_name</span> = <span class="text-yellow-300">"zig-example"</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">version</span> = <span class="text-yellow-300">"1.0.0"</span>;
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Package: {s}, Version: {s}\n"</span>, .{<span class="text-green-300">package_name</span>, <span class="text-green-300">version</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">使用zigmod包管理器</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">// === build.zig (构建文件) ===
// <span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
// 
// <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">build</span>(<span class="text-green-300">b</span>: <span class="text-purple-300">*</span><span class="text-green-300">std</span>.<span class="text-green-300">build</span>.<span class="text-purple-300">Builder</span>) <span class="text-blue-400">void</span> {
//     // 设置目标和优化级别
//     <span class="text-blue-400">const</span> <span class="text-green-300">target</span> = <span class="text-green-300">b</span>.<span class="text-cyan-300">standardTargetOptions</span>(.{});
//     <span class="text-blue-400">const</span> <span class="text-green-300">optimize</span> = <span class="text-green-300">b</span>.<span class="text-cyan-300">standardOptimizeOption</span>(.{});
//     
//     // 创建可执行文件
//     <span class="text-blue-400">const</span> <span class="text-green-300">exe</span> = <span class="text-green-300">b</span>.<span class="text-cyan-300">addExecutable</span>(.{
//         .<span class="text-green-300">name</span> = <span class="text-yellow-300">"my_program"</span>,
//         .<span class="text-green-300">root_source_file</span> = .{ .<span class="text-green-300">path</span> = <span class="text-yellow-300">"src/main.zig"</span> },
//         .<span class="text-green-300">target</span> = <span class="text-green-300">target</span>,
//         .<span class="text-green-300">optimize</span> = <span class="text-green-300">optimize</span>,
//     });
//     
//     // 添加依赖（如果使用zigmod）
//     // <span class="text-green-300">exe</span>.<span class="text-cyan-300">addPackagePath</span>(<span class="text-yellow-300">"some_package"</span>, <span class="text-yellow-300">"zigmod/vendor/some_package/src/main.zig"</span>);
//     
//     // 安装可执行文件
//     <span class="text-green-300">b</span>.<span class="text-cyan-300">installArtifact</span>(<span class="text-green-300">exe</span>);
//     
//     // 添加测试
//     <span class="text-blue-400">const</span> <span class="text-green-300">test_exe</span> = <span class="text-green-300">b</span>.<span class="text-cyan-300">addTest</span>(.{
//         .<span class="text-green-300">root_source_file</span> = .{ .<span class="text-green-300">path</span> = <span class="text-yellow-300">"src/main.zig"</span> },
//         .<span class="text-green-300">target</span> = <span class="text-green-300">target</span>,
//         .<span class="text-green-300">optimize</span> = <span class="text-green-300">optimize</span>,
//     });
//     
//     <span class="text-blue-400">const</span> <span class="text-green-300">test_step</span> = <span class="text-green-300">b</span>.<span class="text-cyan-300">step</span>(<span class="text-yellow-300">"test"</span>, <span class="text-yellow-300">"Run tests"</span>);
//     <span class="text-green-300">test_step</span>.<span class="text-cyan-300">dependOn</span>(<span class="text-purple-300">*</span><span class="text-green-300">test_exe</span>.<span class="text-green-300">step</span>);
// }

// === zig.mod (包描述文件) ===
// name = "my_project"
// description = "A Zig project"
// version = "0.1.0"
// license = "MIT"
// authors = ["Author Name"]

// === 命令行使用 ===
// # 初始化项目
// zig init
// 
// # 运行程序
// zig run src/main.zig
// 
// # 构建程序
// zig build
// 
// # 运行测试
// zig test src/main.zig
// 
// # 使用zigmod
// zigmod init
// zigmod add some_package
// zigmod fetch

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"包管理: Zig使用zigmod或内置构建系统管理依赖\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"构建命令: zig build, zig run, zig test\n"</span>, .{});
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 12. Zig 测试 -->
        <section id="section-12" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">12. Zig 测试</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 测试</h4>
                <p class="text-slate-300 mb-4">Zig内置了强大的测试框架，支持单元测试、集成测试和属性测试，提供了简洁的语法和丰富的断言功能。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">基本测试</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
<span class="text-blue-400">const</span> <span class="text-green-300">assert</span> = <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-green-300">assert</span>;

// 要测试的函数
<span class="text-blue-400">fn</span> <span class="text-cyan-300">add</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">i32</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">i32</span>) <span class="text-yellow-300">i32</span> {
    <span class="text-blue-400">return</span> <span class="text-green-300">a</span> + <span class="text-green-300">b</span>;
}

<span class="text-blue-400">fn</span> <span class="text-cyan-300">subtract</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">i32</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">i32</span>) <span class="text-yellow-300">i32</span> {
    <span class="text-blue-400">return</span> <span class="text-green-300">a</span> - <span class="text-green-300">b</span>;
}

// 基本测试
<span class="text-blue-400">fn</span> <span class="text-cyan-300">testAdd</span>() <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-green-300">assert</span>(<span class="text-cyan-300">add</span>(<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>) == <span class="text-yellow-300">3</span>);
    <span class="text-green-300">assert</span>(<span class="text-cyan-300">add</span>(<span class="text-yellow-300">-1</span>, <span class="text-yellow-300">1</span>) == <span class="text-yellow-300">0</span>);
    <span class="text-green-300">assert</span>(<span class="text-cyan-300">add</span>(<span class="text-yellow-300">0</span>, <span class="text-yellow-300">0</span>) == <span class="text-yellow-300">0</span>);
} }

// 使用test关键字的测试
<span class="text-blue-400">fn</span> <span class="text-cyan-300">testSubtract</span>() <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-green-300">assert</span>(<span class="text-cyan-300">subtract</span>(<span class="text-yellow-300">5</span>, <span class="text-yellow-300">3</span>) == <span class="text-yellow-300">2</span>);
    <span class="text-green-300">assert</span>(<span class="text-cyan-300">subtract</span>(<span class="text-yellow-300">3</span>, <span class="text-yellow-300">5</span>) == <span class="text-yellow-300">-2</span>);
    <span class="text-green-300">assert</span>(<span class="text-cyan-300">subtract</span>(<span class="text-yellow-300">0</span>, <span class="text-yellow-300">0</span>) == <span class="text-yellow-300">0</span>);
} }

// 使用test块的测试
<span class="text-blue-400">const</span> <span class="text-purple-300">TestSuite</span> = <span class="text-blue-400">struct</span> {
    <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">testAll</span>() <span class="text-blue-400">void</span> {
        <span class="text-cyan-300">testAdd</span>();
        <span class="text-cyan-300">testSubtract</span>();
        <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"All tests passed!\n"</span>, .{});
    }
};

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Running tests...\n"</span>, .{});
    <span class="text-green-300">TestSuite</span>.<span class="text-cyan-300">testAll</span>();
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Tests completed successfully!\n"</span>, .{});
}

// Zig内置测试格式
// test "add function" {
//     const result = add(1, 2);
//     try std.testing.expectEqual(@as(i32, 3), result);
// }
// 
// test "subtract function" {
//     const result = subtract(5, 3);
//     try std.testing.expectEqual(@as(i32, 2), result);
// }
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">测试错误处理</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 可能返回错误的函数
<span class="text-blue-400">const</span> <span class="text-red-400">MathError</span> = <span class="text-red-400">error</span> {
    <span class="text-red-400">DivisionByZero</span>,
};

<span class="text-blue-400">fn</span> <span class="text-cyan-300">safeDivide</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">f64</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">f64</span>) <span class="text-red-400">MathError</span><span class="text-purple-300">!</span><span class="text-yellow-300">f64</span> {
    <span class="text-blue-400">if</span> (<span class="text-green-300">b</span> == <span class="text-yellow-300">0</span>) <span class="text-blue-400">return</span> <span class="text-red-400">MathError</span>.<span class="text-red-400">DivisionByZero</span>;
    <span class="text-blue-400">return</span> <span class="text-green-300">a</span> / <span class="text-green-300">b</span>;
}

// 测试成功的情况
<span class="text-blue-400">fn</span> <span class="text-cyan-300">testSafeDivideSuccess</span>() <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-cyan-300">safeDivide</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">2.0</span>) <span class="text-blue-400">catch</span> <span class="text-blue-400">unreachable</span>;
    <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-green-300">assert</span>(<span class="text-green-300">result</span> == <span class="text-yellow-300">5.0</span>);
} }

// 测试错误的情况
<span class="text-blue-400">fn</span> <span class="text-cyan-300">testSafeDivideError</span>() <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-cyan-300">safeDivide</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">0.0</span>) <span class="text-blue-400">catch</span> |<span class="text-green-300">err</span>| {
        <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-green-300">assert</span>(<span class="text-green-300">err</span> == <span class="text-red-400">MathError</span>.<span class="text-red-400">DivisionByZero</span>);
        <span class="text-blue-400">return</span>;
    };
    // 如果没有发生错误，测试失败
    <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-green-300">assert</span>(<span class="text-yellow-300">false</span>);
} }

// 使用标准库测试API
// <span class="text-blue-400">test</span> <span class="text-yellow-300">"safeDivide success"</span> {
//     <span class="text-blue-400">const</span> <span class="text-green-300">result</span> = <span class="text-purple-300">try</span> <span class="text-cyan-300">safeDivide</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">2.0</span>);
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectApproxEqAbs</span>(<span class="text-cyan-300">@as</span>(<span class="text-yellow-300">f64</span>, <span class="text-yellow-300">5.0</span>), <span class="text-green-300">result</span>, <span class="text-yellow-300">0.001</span>);
// }
// 
// <span class="text-blue-400">test</span> <span class="text-yellow-300">"safeDivide division by zero"</span> {
//     <span class="text-yellow-300">_</span> = <span class="text-cyan-300">safeDivide</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">0.0</span>) <span class="text-blue-400">catch</span> |<span class="text-green-300">err</span>| {
//         <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectError</span>(<span class="text-red-400">MathError</span>.<span class="text-red-400">DivisionByZero</span>, <span class="text-green-300">err</span>);
//         <span class="text-blue-400">return</span>;
//     };
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expect</span>(<span class="text-yellow-300">false</span>); // 不应该到达这里
// }

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Testing error handling...\n"</span>, .{});
    <span class="text-cyan-300">testSafeDivideSuccess</span>();
    <span class="text-cyan-300">testSafeDivideError</span>();
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Error handling tests passed!\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">组织测试</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);
<span class="text-blue-400">const</span> <span class="text-green-300">assert</span> = <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-green-300">assert</span>;

// 数学运算模块
<span class="text-blue-400">const</span> <span class="text-purple-300">Math</span> = <span class="text-blue-400">struct</span> {
    <span class="text-blue-400">fn</span> <span class="text-cyan-300">add</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">i32</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">i32</span>) <span class="text-yellow-300">i32</span> { <span class="text-blue-400">return</span> <span class="text-green-300">a</span> + <span class="text-green-300">b</span>; }
    <span class="text-blue-400">fn</span> <span class="text-cyan-300">subtract</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">i32</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">i32</span>) <span class="text-yellow-300">i32</span> { <span class="text-blue-400">return</span> <span class="text-green-300">a</span> - <span class="text-green-300">b</span>; }
    <span class="text-blue-400">fn</span> <span class="text-cyan-300">multiply</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">i32</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">i32</span>) <span class="text-yellow-300">i32</span> { <span class="text-blue-400">return</span> <span class="text-green-300">a</span> * <span class="text-green-300">b</span>; }
    <span class="text-blue-400">fn</span> <span class="text-cyan-300">divide</span>(<span class="text-green-300">a</span>: <span class="text-yellow-300">i32</span>, <span class="text-green-300">b</span>: <span class="text-yellow-300">i32</span>) <span class="text-yellow-300">i32</span> { <span class="text-blue-400">return</span> <span class="text-green-300">a</span> / <span class="text-green-300">b</span>; }
};

// 字符串处理模块
<span class="text-blue-400">const</span> <span class="text-purple-300">StringUtils</span> = <span class="text-blue-400">struct</span> {
    <span class="text-blue-400">fn</span> <span class="text-cyan-300">isEmpty</span>(<span class="text-green-300">str</span>: []<span class="text-blue-400">const</span> <span class="text-yellow-300">u8</span>) <span class="text-yellow-300">bool</span> { <span class="text-blue-400">return</span> <span class="text-green-300">str</span>.<span class="text-green-300">len</span> == <span class="text-yellow-300">0</span>; }
    <span class="text-blue-400">fn</span> <span class="text-cyan-300">startsWith</span>(<span class="text-green-300">str</span>: []<span class="text-blue-400">const</span> <span class="text-yellow-300">u8</span>, <span class="text-green-300">prefix</span>: []<span class="text-blue-400">const</span> <span class="text-yellow-300">u8</span>) <span class="text-yellow-300">bool</span> { 
        <span class="text-blue-400">return</span> <span class="text-green-300">str</span>.<span class="text-green-300">len</span> >= <span class="text-green-300">prefix</span>.<span class="text-green-300">len</span> and <span class="text-green-300">std</span>.<span class="text-green-300">mem</span>.<span class="text-cyan-300">eql</span>(<span class="text-yellow-300">u8</span>, <span class="text-green-300">str</span>[<span class="text-yellow-300">0</span>..<span class="text-green-300">prefix</span>.<span class="text-green-300">len</span>], <span class="text-green-300">prefix</span>); 
    }
};

// 测试套件：数学运算
<span class="text-blue-400">const</span> <span class="text-purple-300">MathTests</span> = <span class="text-blue-400">struct</span> {
    <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">run</span>() <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
        // 测试加法
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">add</span>(<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>) == <span class="text-yellow-300">3</span>);
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">add</span>(<span class="text-yellow-300">-1</span>, <span class="text-yellow-300">1</span>) == <span class="text-yellow-300">0</span>);
        
        // 测试减法
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">subtract</span>(<span class="text-yellow-300">5</span>, <span class="text-yellow-300">3</span>) == <span class="text-yellow-300">2</span>);
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">subtract</span>(<span class="text-yellow-300">3</span>, <span class="text-yellow-300">5</span>) == <span class="text-yellow-300">-2</span>);
        
        // 测试乘法
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">multiply</span>(<span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>) == <span class="text-yellow-300">6</span>);
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">multiply</span>(<span class="text-yellow-300">-2</span>, <span class="text-yellow-300">3</span>) == <span class="text-yellow-300">-6</span>);
        
        // 测试除法
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">divide</span>(<span class="text-yellow-300">6</span>, <span class="text-yellow-300">3</span>) == <span class="text-yellow-300">2</span>);
        <span class="text-green-300">assert</span>(<span class="text-purple-300">Math</span>.<span class="text-cyan-300">divide</span>(<span class="text-yellow-300">5</span>, <span class="text-yellow-300">2</span>) == <span class="text-yellow-300">2</span>); // 整数除法
        
        <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Math tests passed!\n"</span>, .{});
    } }
};

// 测试套件：字符串处理
<span class="text-blue-400">const</span> <span class="text-purple-300">StringTests</span> = <span class="text-blue-400">struct</span> {
    <span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">run</span>() <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
        // 测试isEmpty
        <span class="text-green-300">assert</span>(<span class="text-purple-300">StringUtils</span>.<span class="text-cyan-300">isEmpty</span>(<span class="text-yellow-300">""</span>) == <span class="text-yellow-300">true</span>);
        <span class="text-green-300">assert</span>(<span class="text-purple-300">StringUtils</span>.<span class="text-cyan-300">isEmpty</span>(<span class="text-yellow-300">"hello"</span>) == <span class="text-yellow-300">false</span>);
        
        // 测试startsWith
        <span class="text-green-300">assert</span>(<span class="text-purple-300">StringUtils</span>.<span class="text-cyan-300">startsWith</span>(<span class="text-yellow-300">"hello world"</span>, <span class="text-yellow-300">"hello"</span>) == <span class="text-yellow-300">true</span>);
        <span class="text-green-300">assert</span>(<span class="text-purple-300">StringUtils</span>.<span class="text-cyan-300">startsWith</span>(<span class="text-yellow-300">"hello world"</span>, <span class="text-yellow-300">"world"</span>) == <span class="text-yellow-300">false</span>);
        <span class="text-green-300">assert</span>(<span class="text-purple-300">StringUtils</span>.<span class="text-cyan-300">startsWith</span>(<span class="text-yellow-300">"hello"</span>, <span class="text-yellow-300">"hello world"</span>) == <span class="text-yellow-300">false</span>);
        
        <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"String tests passed!\n"</span>, .{});
    } }
};

// 主测试运行器
<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">runAllTests</span>() <span class="text-blue-400">void</span> { <span class="text-purple-300">comptime</span> {
    <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Running all tests...\n"</span>, .{});
    <span class="text-purple-300">MathTests</span>.<span class="text-cyan-300">run</span>();
    <span class="text-purple-300">StringTests</span>.<span class="text-cyan-300">run</span>();
    <span class="text-green-300">std</span>.<span class="text-green-300">debug</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"All tests passed successfully!\n"</span>, .{});
} }

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Running organized tests...\n"</span>, .{});
    <span class="text-cyan-300">runAllTests</span>();
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"All test suites completed!\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">使用标准库测试API</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 使用标准库的测试API
// <span class="text-blue-400">test</span> <span class="text-yellow-300">"basic assertions"</span> {
//     <span class="text-blue-400">const</span> <span class="text-green-300">a</span> = <span class="text-yellow-300">1</span>;
//     <span class="text-blue-400">const</span> <span class="text-green-300">b</span> = <span class="text-yellow-300">2</span>;
//     
//     // 基本相等断言
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectEqual</span>(<span class="text-cyan-300">@as</span>(<span class="text-yellow-300">i32</span>, <span class="text-yellow-300">1</span>), <span class="text-green-300">a</span>);
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectEqual</span>(<span class="text-cyan-300">@as</span>(<span class="text-yellow-300">i32</span>, <span class="text-yellow-300">2</span>), <span class="text-green-300">b</span>);
//     
//     // 不相等断言
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectNotEqual</span>(<span class="text-green-300">a</span>, <span class="text-green-300">b</span>);
//     
//     // 布尔断言
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expect</span>(<span class="text-green-300">a</span> < <span class="text-green-300">b</span>);
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expect</span>(!<span class="text-green-300">a</span> > <span class="text-green-300">b</span>);
// }
// 
// <span class="text-blue-400">test</span> <span class="text-yellow-300">"string assertions"</span> {
//     <span class="text-blue-400">const</span> <span class="text-green-300">str1</span> = <span class="text-yellow-300">"hello"</span>;
//     <span class="text-blue-400">const</span> <span class="text-green-300">str2</span> = <span class="text-yellow-300">"world"</span>;
//     <span class="text-blue-400">const</span> <span class="text-green-300">str3</span> = <span class="text-yellow-300">"hello"</span>;
//     
//     // 字符串相等
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectEqualStrings</span>(<span class="text-green-300">str1</span>, <span class="text-green-300">str3</span>);
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expect</span>(!<span class="text-green-300">std</span>.<span class="text-green-300">mem</span>.<span class="text-cyan-300">eql</span>(<span class="text-yellow-300">u8</span>, <span class="text-green-300">str1</span>, <span class="text-green-300">str2</span>));
//     
//     // 字符串包含
//     <span class="text-blue-400">const</span> <span class="text-green-300">full_str</span> = <span class="text-yellow-300">"hello world"</span>;
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expect</span>(<span class="text-green-300">std</span>.<span class="text-green-300">mem</span>.<span class="text-cyan-300">containsAtLeast</span>(<span class="text-yellow-300">u8</span>, <span class="text-green-300">full_str</span>, <span class="text-yellow-300">1</span>, <span class="text-yellow-300">"hello"</span>));
// }
// 
// <span class="text-blue-400">test</span> <span class="text-yellow-300">"error assertions"</span> {
//     <span class="text-blue-400">const</span> <span class="text-red-400">TestError</span> = <span class="text-red-400">error</span> {
//         <span class="text-red-400">TestFailed</span>,
//     };
//     
//     <span class="text-blue-400">fn</span> <span class="text-cyan-300">failingFunction</span>() <span class="text-red-400">TestError</span><span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
//         <span class="text-blue-400">return</span> <span class="text-red-400">error</span>.<span class="text-red-400">TestFailed</span>;
//     }
//     
//     <span class="text-blue-400">fn</span> <span class="text-cyan-300">successfulFunction</span>() <span class="text-red-400">TestError</span><span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
//         <span class="text-blue-400">return</span>;
//     }
//     
//     // 测试函数返回错误
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectError</span>(<span class="text-red-400">TestError</span>.<span class="text-red-400">TestFailed</span>, <span class="text-cyan-300">failingFunction</span>());
//     
//     // 测试函数不返回错误
//     <span class="text-purple-300">try</span> <span class="text-cyan-300">successfulFunction</span>();
// }
// 
// <span class="text-blue-400">test</span> <span class="text-yellow-300">"float assertions"</span> {
//     <span class="text-blue-400">const</span> <span class="text-green-300">f1</span>: <span class="text-yellow-300">f64</span> = <span class="text-yellow-300">3.14159</span>;
//     <span class="text-blue-400">const</span> <span class="text-green-300">f2</span>: <span class="text-yellow-300">f64</span> = <span class="text-yellow-300">3.14</span>;
//     
//     // 浮点近似相等
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectApproxEqAbs</span>(<span class="text-cyan-300">@as</span>(<span class="text-yellow-300">f64</span>, <span class="text-yellow-300">3.14</span>), <span class="text-green-300">f2</span>, <span class="text-yellow-300">0.01</span>);
//     <span class="text-purple-300">try</span> <span class="text-green-300">std</span>.<span class="text-green-300">testing</span>.<span class="text-cyan-300">expectApproxEqRel</span>(<span class="text-green-300">f1</span>, <span class="text-yellow-300">3.14159265359</span>, <span class="text-yellow-300">1e-6</span>);
// }

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Standard library testing API:\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"- std.testing.expectEqual\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"- std.testing.expectNotEqual\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"- std.testing.expect\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"- std.testing.expectError\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"- std.testing.expectEqualStrings\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"- std.testing.expectApproxEqAbs/Rel\n"</span>, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">运行测试</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">// 命令行运行测试
// zig test filename.zig
// zig test filename.zig --release-safe
// zig test filename.zig -Dtarget=x86_64-windows

// 运行特定测试
// zig test filename.zig -Dtest-filter=test_name

// 构建测试
// zig build test

// 测试覆盖率（实验性功能）
// zig test filename.zig --test-cov

// 示例输出
// $ zig test math.zig
// 1/1 test "add function"... OK
// 1/1 test "subtract function"... OK
// 2 passed; 0 failed. 0 skipped.

<span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"=== Zig Testing Commands ===\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Run all tests: zig test filename.zig\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Run specific test: zig test filename.zig -Dtest-filter=test_name\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Build and run tests: zig build test\n"</span>, .{});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Run tests with coverage: zig test filename.zig --test-cov\n"</span>, .{});
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 13. Zig 与 C 交互 -->
        <section id="section-13" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">13. Zig 与 C 交互</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 与 C 交互</h4>
                <p class="text-slate-300 mb-4">Zig提供了强大的C语言互操作能力，允许直接调用C函数、使用C结构体和与C库无缝集成，同时保持类型安全。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">基本C函数调用</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 导入标准C库
<span class="text-blue-400">const</span> <span class="text-green-300">c</span> = <span class="text-cyan-300">@cImport</span>({
    <span class="text-cyan-300">@cInclude</span>(<span class="text-yellow-300">"stdio.h"</span>);
    <span class="text-cyan-300">@cInclude</span>(<span class="text-yellow-300">"stdlib.h"</span>);
    <span class="text-cyan-300">@cInclude</span>(<span class="text-yellow-300">"string.h"</span>);
});

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 调用C的printf函数
    _ = <span class="text-green-300">c</span>.<span class="text-cyan-300">printf</span>(<span class="text-yellow-300">"Hello from C printf!\n"</span>);
    
    // 调用C的malloc分配内存
    <span class="text-blue-400">const</span> <span class="text-green-300">buffer</span> = <span class="text-green-300">c</span>.<span class="text-cyan-300">malloc</span>(<span class="text-yellow-300">1024</span>) <span class="text-blue-400">orelse</span> {
        <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Failed to allocate memory\n"</span>, .{});
        <span class="text-blue-400">return</span> <span class="text-red-400">error</span>.<span class="text-red-400">OutOfMemory</span>;
    };
    <span class="text-blue-400">defer</span> <span class="text-green-300">c</span>.<span class="text-cyan-300">free</span>(<span class="text-green-300">buffer</span>);
    
    // 使用C的strcpy和strlen函数
    <span class="text-blue-400">const</span> <span class="text-green-300">message</span> = <span class="text-yellow-300">"Hello Zig from C string functions"</span>;
    _ = <span class="text-green-300">c</span>.<span class="text-cyan-300">strcpy</span>(<span class="text-cyan-300">@as</span>([<span class="text-blue-400">*c</span>]<span class="text-yellow-300">u8</span>, <span class="text-green-300">buffer</span>), <span class="text-green-300">message</span>);
    <span class="text-blue-400">const</span> <span class="text-green-300">length</span> = <span class="text-green-300">c</span>.<span class="text-cyan-300">strlen</span>(<span class="text-cyan-300">@as</span>([<span class="text-blue-400">*c</span>]<span class="text-blue-400">const</span> <span class="text-yellow-300">u8</span>, <span class="text-green-300">buffer</span>));
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"C string: {s}\n"</span>, .{<span class="text-cyan-300">@as</span>([<span class="text-blue-400">*c</span>]<span class="text-blue-400">const</span> <span class="text-yellow-300">u8</span>, <span class="text-green-300">buffer</span>)});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"C string length: {}\n"</span>, .{<span class="text-green-300">length</span>});
    
    // 使用C的atoi函数
    <span class="text-blue-400">const</span> <span class="text-green-300">number_str</span> = <span class="text-yellow-300">"12345"</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">number</span> = <span class="text-green-300">c</span>.<span class="text-cyan-300">atoi</span>(<span class="text-green-300">number_str</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"C atoi result: {}\n"</span>, .{<span class="text-green-300">number</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">C结构体和枚举</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300"><span class="text-blue-400">const</span> <span class="text-green-300">std</span> = <span class="text-cyan-300">@import</span>(<span class="text-yellow-300">"std"</span>);

// 定义与C兼容的结构体
<span class="text-blue-400">const</span> <span class="text-purple-300">Point</span> = <span class="text-blue-400">extern struct</span> {
    <span class="text-green-300">x</span>: <span class="text-yellow-300">f64</span>,
    <span class="text-green-300">y</span>: <span class="text-yellow-300">f64</span>,
};

// 定义与C兼容的枚举
<span class="text-blue-400">const</span> <span class="text-purple-300">Color</span> = <span class="text-blue-400">extern enum</span>(<span class="text-yellow-300">c_int</span>) {
    <span class="text-purple-300">Red</span>,
    <span class="text-purple-300">Green</span>,
    <span class="text-purple-300">Blue</span>,
    <span class="text-purple-300">Yellow</span>,
};

// 定义包含结构体的C风格复合类型
<span class="text-blue-400">const</span> <span class="text-purple-300">Rectangle</span> = <span class="text-blue-400">extern struct</span> {
    <span class="text-green-300">top_left</span>: <span class="text-purple-300">Point</span>,
    <span class="text-green-300">bottom_right</span>: <span class="text-purple-300">Point</span>,
    <span class="text-green-300">color</span>: <span class="text-purple-300">Color</span>,
    <span class="text-green-300">visible</span>: <span class="text-blue-400">bool</span>,
};

// 导入C函数声明
<span class="text-blue-400">const</span> <span class="text-green-300">c</span> = <span class="text-cyan-300">@cImport</span>({
    <span class="text-cyan-300">@cInclude</span>(<span class="text-yellow-300">"stdio.h"</span>);
    <span class="text-cyan-300">@cInclude</span>(<span class="text-yellow-300">"math.h"</span>);
    
    // 假设在C头文件中定义了这些函数
    // double distance(struct Point p1, struct Point p2);
    // void print_point(struct Point p);
});

// 计算两点之间的距离
<span class="text-blue-400">fn</span> <span class="text-cyan-300">distance</span>(<span class="text-green-300">p1</span>: <span class="text-purple-300">Point</span>, <span class="text-green-300">p2</span>: <span class="text-purple-300">Point</span>) <span class="text-yellow-300">f64</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">dx</span> = <span class="text-green-300">p1</span>.<span class="text-green-300">x</span> - <span class="text-green-300">p2</span>.<span class="text-green-300">x</span>;
    <span class="text-blue-400">const</span> <span class="text-green-300">dy</span> = <span class="text-green-300">p1</span>.<span class="text-green-300">y</span> - <span class="text-green-300">p2</span>.<span class="text-green-300">y</span>;
    <span class="text-blue-400">return</span> <span class="text-cyan-300">@sqrt</span>(<span class="text-green-300">dx</span> * <span class="text-green-300">dx</span> + <span class="text-green-300">dy</span> * <span class="text-green-300">dy</span>);
}

// 打印点的信息
<span class="text-blue-400">fn</span> <span class="text-cyan-300">printPoint</span>(<span class="text-green-300">p</span>: <span class="text-purple-300">Point</span>) <span class="text-blue-400">void</span> {
    _ = <span class="text-green-300">c</span>.<span class="text-cyan-300">printf</span>(<span class="text-yellow-300">"Point: (%.2f, %.2f)\n"</span>, <span class="text-green-300">p</span>.<span class="text-green-300">x</span>, <span class="text-green-300">p</span>.<span class="text-green-300">y</span>);
}

<span class="text-blue-400">pub</span> <span class="text-blue-400">fn</span> <span class="text-cyan-300">main</span>() <span class="text-purple-300">!</span><span class="text-blue-400">void</span> {
    <span class="text-blue-400">const</span> <span class="text-green-300">stdout</span> = <span class="text-green-300">std</span>.<span class="text-green-300">io</span>.<span class="text-cyan-300">getStdOut</span>().<span class="text-cyan-300">writer</span>();
    
    // 创建C兼容结构体实例
    <span class="text-blue-400">const</span> <span class="text-green-300">p1</span> = <span class="text-purple-300">Point</span>{ .<span class="text-green-300">x</span> = <span class="text-yellow-300">1.0</span>, .<span class="text-green-300">y</span> = <span class="text-yellow-300">2.0</span> };
    <span class="text-blue-400">const</span> <span class="text-green-300">p2</span> = <span class="text-purple-300">Point</span>{ .<span class="text-green-300">x</span> = <span class="text-yellow-300">4.0</span>, .<span class="text-green-300">y</span> = <span class="text-yellow-300">6.0</span> };
    
    // 使用结构体
    <span class="text-cyan-300">printPoint</span>(<span class="text-green-300">p1</span>);
    <span class="text-cyan-300">printPoint</span>(<span class="text-green-300">p2</span>);
    
    <span class="text-blue-400">const</span> <span class="text-green-300">dist</span> = <span class="text-cyan-300">distance</span>(<span class="text-green-300">p1</span>, <span class="text-green-300">p2</span>);
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Distance between points: {d:.2}\n"</span>, .{<span class="text-green-300">dist</span>});
    
    // 使用C兼容枚举
    <span class="text-blue-400">const</span> <span class="text-green-300">rect</span> = <span class="text-purple-300">Rectangle</span>{
        .<span class="text-green-300">top_left</span> = <span class="text-green-300">p1</span>,
        .<span class="text-green-300">bottom_right</span> = <span class="text-green-300">p2</span>,
        .<span class="text-green-300">color</span> = <span class="text-purple-300">Color</span>.<span class="text-purple-300">Blue</span>,
        .<span class="text-green-300">visible</span> = <span class="text-blue-400">true</span>,
    };
    
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Rectangle color: {}\n"</span>, .{<span class="text-cyan-300">@enumToInt</span>(<span class="text-green-300">rect</span>.<span class="text-green-300">color</span>)});
    <span class="text-purple-300">try</span> <span class="text-green-300">stdout</span>.<span class="text-cyan-300">print</span>(<span class="text-yellow-300">"Rectangle visible: {}\n"</span>, .{<span class="text-green-300">rect</span>.<span class="text-green-300">visible</span>});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">C指针和内存管理</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">const std = @import("std");

// 导入C标准库
const c = @cImport({
    @cInclude("stdio.h");
    @cInclude("stdlib.h");
    @cInclude("string.h");
});

pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    // C指针操作
    var number: c_int = 42;
    const c_ptr: *c_int = &number;
    
    _ = c.printf("C pointer value: %d\n", c_ptr.*);
    
    // 修改指针指向的值
    c_ptr.* = 100;
    try stdout.print("After modification: {}\n", .{number});
    
    // 动态分配内存 (C风格)
    const array_size = 10;
    const c_array = c.malloc(@sizeOf(c_int) * array_size) orelse {
        try stdout.print("Failed to allocate array\n", .{});
        return error.OutOfMemory;
    };
    defer c.free(c_array);
    
    // 将C指针转换为Zig切片进行操作
    const zig_array = @as([*c]c_int, c_array)[0..array_size];
    
    // 填充数组
    for (0..array_size) |i| {
        zig_array[i] = @intCast(c_int, i * 2);
    }
    
    // 打印数组元素
    try stdout.print("C array elements: ", .{});
    for (zig_array) |value| {
        try stdout.print("{} ", .{value});
    }
    try stdout.print("\n", .{});
    
    // 使用C的memcpy函数
    const src = [_]c_int{1, 2, 3, 4, 5};
    var dest: [5]c_int = undefined;
    
    _ = c.memcpy(@as([*c]u8, &dest), @as([*c]const u8, &src), @sizeOf(@TypeOf(src)));
    
    try stdout.print("After memcpy: ", .{});
    for (dest) |value| {
        try stdout.print("{} ", .{value});
    }
    try stdout.print("\n", .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">从C调用Zig函数</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">// === zig_library.zig ===
// const std = @import("std");
// 
// // 导出函数供C调用 (使用export关键字)
// export fn zig_add(a: c_int, b: c_int) c_int {
//     return a + b;
// }
// 
// export fn zig_multiply(a: c_double, b: c_double) c_double {
//     return a * b;
// }
// 
// // 导出带字符串参数的函数
// export fn zig_hello(name: [*c]const u8) void {
//     const stdout = std.io.getStdOut().writer();
//     _ = stdout.print("Hello from Zig, {s}!\n", .{name}) catch return;
// }
// 
// // 导出处理数组的函数
// export fn zig_sum_array(array: [*c]c_int, size: c_int) c_int {
//     var sum: c_int = 0;
//     for (0..@intCast(usize, size)) |i| {
//         sum += array[i];
//     }
//     return sum;
// }

// === main.zig ===
const std = @import("std");

// 导入C标准库
const c = @cImport({
    @cInclude("stdio.h");
});

// 模拟C调用Zig函数的场景
pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    try stdout.print("=== Zig Functions Callable from C ===\n", .{});
    try stdout.print("1. int zig_add(int a, int b);\n", .{});
    try stdout.print("2. double zig_multiply(double a, double b);\n", .{});
    try stdout.print("3. void zig_hello(const char* name);\n", .{});
    try stdout.print("4. int zig_sum_array(int* array, int size);\n", .{});
    
    try stdout.print("\nTo build as library: zig build-lib -dynamic zig_library.zig\n", .{});
    try stdout.print("Or statically: zig build-lib -static zig_library.zig\n", .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">使用C库示例</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">// 示例：使用SDL2库 (需要安装SDL2开发库)
// const std = @import("std");
// 
// // 导入SDL2库
// const sdl = @cImport({
//     @cInclude("SDL2/SDL.h");
// });
// 
// pub fn main() !void {
//     const stdout = std.io.getStdOut().writer();
//     
//     // 初始化SDL
//     if (sdl.SDL_Init(sdl.SDL_INIT_VIDEO) != 0) {
//         try stdout.print("SDL_Init failed: {s}\n", .{sdl.SDL_GetError()});
//         return error.SDLInitFailed;
//     }
//     defer sdl.SDL_Quit();
//     
//     // 创建窗口
//     const window = sdl.SDL_CreateWindow(
//         "Zig SDL2 Window",
//         sdl.SDL_WINDOWPOS_UNDEFINED,
//         sdl.SDL_WINDOWPOS_UNDEFINED,
//         800,
//         600,
//         sdl.SDL_WINDOW_SHOWN
//     ) orelse {
//         try stdout.print("SDL_CreateWindow failed: {s}\n", .{sdl.SDL_GetError()});
//         return error.WindowCreationFailed;
//     };
//     defer sdl.SDL_DestroyWindow(window);
//     
//     // 创建渲染器
//     const renderer = sdl.SDL_CreateRenderer(
//         window,
//         -1,
//         sdl.SDL_RENDERER_ACCELERATED
//     ) orelse {
//         try stdout.print("SDL_CreateRenderer failed: {s}\n", .{sdl.SDL_GetError()});
//         return error.RendererCreationFailed;
//     };
//     defer sdl.SDL_DestroyRenderer(renderer);
//     
//     try stdout.print("SDL2 window created successfully!\n", .{});
//     try stdout.print("Press any key to exit...\n", .{});
//     
//     // 主循环
//     var running = true;
//     while (running) {
//         var event: sdl.SDL_Event = undefined;
//         while (sdl.SDL_PollEvent(&event) != 0) {
//             if (event.type == sdl.SDL_QUIT) {
//                 running = false;
//             } else if (event.type == sdl.SDL_KEYDOWN) {
//                 running = false;
//             }
//         }
//         
//         // 清除屏幕
//         _ = sdl.SDL_SetRenderDrawColor(renderer, 0, 0, 0, 255);
//         _ = sdl.SDL_RenderClear(renderer);
//         
//         // 绘制矩形
//         const rect = sdl.SDL_Rect{ .x = 300, .y = 200, .w = 200, .h = 200 };
//         _ = sdl.SDL_SetRenderDrawColor(renderer, 255, 0, 0, 255);
//         _ = sdl.SDL_RenderDrawRect(renderer, &rect);
//         
//         // 渲染
//         sdl.SDL_RenderPresent(renderer);
//         
//         // 延迟
//         sdl.SDL_Delay(16);
//     }
// }

// 示例：使用curl库下载文件
// const std = @import("std");
// 
// const c = @cImport({
//     @cInclude("curl/curl.h");
// });
// 
// pub fn main() !void {
//     const stdout = std.io.getStdOut().writer();
//     
//     // 初始化curl
//     _ = c.curl_global_init(c.CURL_GLOBAL_ALL);
//     defer c.curl_global_cleanup();
//     
//     // 创建curl句柄
//     const curl = c.curl_easy_init() orelse {
//         try stdout.print("Failed to initialize curl\n", .{});
//         return error.CurlInitFailed;
//     };
//     defer c.curl_easy_cleanup(curl);
//     
//     // 设置URL
//     _ = c.curl_easy_setopt(curl, c.CURLOPT_URL, "https://example.com");
//     
//     // 执行请求
//     const res = c.curl_easy_perform(curl);
//     if (res != c.CURLE_OK) {
//         try stdout.print("curl_easy_perform() failed: {s}\n", .{c.curl_easy_strerror(res)});
//         return error.CurlRequestFailed;
//     }
//     
//     try stdout.print("Request completed successfully\n", .{});
// }

pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    try stdout.print("=== Using C Libraries in Zig ===\n", .{});
    try stdout.print("1. SDL2 for graphics and input\n", .{});
    try stdout.print("2. libcurl for HTTP requests\n", .{});
    try stdout.print("3. OpenGL for 3D graphics\n", .{});
    try stdout.print("4. SQLite for database access\n", .{});
    try stdout.print("\nBuild command example:\n", .{});
    try stdout.print("zig build-exe main.zig -lc -lSDL2\n", .{});
}
</code></pre>
                </div>
            </div>
        </section>

        <!-- 14. Zig 高级特性 -->
        <section id="section-14" class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">14. Zig 高级特性</span>
            </h2>
            
            <div class="language-content" data-lang="zig">
                <h4 class="text-lg font-medium mb-4 text-purple-400">Zig - 高级特性</h4>
                <p class="text-slate-300 mb-4">Zig提供了一系列高级特性，包括异步编程、原子操作、内存对齐控制、自定义分配器和强大的编译时代码生成能力。</p>
                
                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">异步编程</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">const std = @import("std");

// Zig的异步函数使用async/await语法
fn asyncOperation(delay_ms: u32) !void {
    const stdout = std.io.getStdOut().writer();
    try stdout.print("Starting async operation with delay {}ms\n", .{delay_ms});
    
    // 使用标准库的async sleep函数
    const timer = try std.time.Timer.start();
    while (timer.read() < delay_ms * std.time.ns_per_ms) {
        // 让出执行权
        std.event.Loop.instance.?.runNext() catch |err| {
            try stdout.print("Error in event loop: {}\n", .{err});
            return err;
        };
    }
    
    try stdout.print("Completed async operation after {}ms\n", .{delay_ms});
}

// 异步函数可以被其他异步函数调用
async fn performMultipleAsyncOps() !void {
    const stdout = std.io.getStdOut().writer();
    
    // 并发执行多个异步操作
    const handle1 = async asyncOperation(1000);
    const handle2 = async asyncOperation(500);
    const handle3 = async asyncOperation(1500);
    
    try stdout.print("All async operations started\n", .{});
    
    // 等待所有操作完成
    await handle1;
    await handle2;
    await handle3;
    
    try stdout.print("All async operations completed\n", .{});
}

pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    try stdout.print("Zig async programming example\n", .{});
    try stdout.print("Note: This example demonstrates async syntax but may need event loop setup\n", .{});
    
    // 在实际应用中，需要设置事件循环
    // const loop = std.event.Loop.instance.?;
    // try loop.run(async performMultipleAsyncOps, .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">原子操作</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">const std = @import("std");

// 原子整数类型
var atomic_counter: std.atomic.Atomic(i32) = .{ .value = 0 };

// 使用原子操作进行线程安全的递增
fn incrementCounter() void {
    for (0..1000) |_| {
        // 原子递增
        _ = atomic_counter.fetchAdd(1, .Acquire);
    }
}

// 使用原子操作进行线程安全的比较并交换
fn compareAndSwap() void {
    var old_value = atomic_counter.load(.Acquire);
    while (true) {
        const new_value = old_value + 100;
        const result = atomic_counter.compareAndSwap(old_value, new_value, .Release, .Acquire);
        if (result == null) break;
        old_value = result.?;
    }
}

// 使用原子操作实现简单的自旋锁
type SpinLock = struct {
    locked: std.atomic.Atomic(bool),
    
    pub fn init() SpinLock {
        return SpinLock{ .locked = .{ .value = false } };
    }
    
    pub fn lock(self: *SpinLock) void {
        while (self.locked.swap(true, .Acquire)) {
            // 自旋等待
        }
    }
    
    pub fn unlock(self: *SpinLock) void {
        self.locked.store(false, .Release);
    }
};

// 测试自旋锁
var lock: SpinLock = SpinLock.init();
var shared_resource: i32 = 0;

fn updateSharedResource() void {
    lock.lock();
    defer lock.unlock();
    
    // 安全地更新共享资源
    shared_resource += 1;
}

pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    try stdout.print("Atomic operations example\n", .{});
    
    // 测试原子计数器
    incrementCounter();
    const counter_value = atomic_counter.load(.Acquire);
    try stdout.print("Atomic counter value: {}\n", .{counter_value});
    
    // 测试比较并交换
    compareAndSwap();
    const cas_value = atomic_counter.load(.Acquire);
    try stdout.print("After compareAndSwap: {}\n", .{cas_value});
    
    // 测试自旋锁
    updateSharedResource();
    try stdout.print("Shared resource value: {}\n", .{shared_resource});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">内存对齐控制</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">const std = @import("std");

// 默认对齐的结构体
const DefaultAligned = struct {
    a: u8,   // 1 byte
    b: u32,  // 4 bytes
    c: u16,  // 2 bytes
};

// 显式对齐的结构体
const ExplicitAligned = struct {
    a: u8,    // 1 byte
    // 手动填充以确保对齐
    _padding: [3]u8 align(4),
    b: u32,   // 4 bytes, aligned to 4 bytes
    c: u16,   // 2 bytes
};

// 使用align关键字的结构体
const AlignStruct = packed struct {
    a: u8,
    b: u32 align(4),
    c: u16,
};

// 对齐到特定边界的全局变量
var aligned_buffer: [1024]u8 align(4096) = undefined;

// 内存对齐检查函数
fn checkAlignment(comptime T: type) void {
    std.debug.print("Type {} size: {} bytes\n", .{@typeName(T), @sizeOf(T)});
    std.debug.print("Type {} alignment: {} bytes\n", .{@typeName(T), @alignOf(T)});
}

// 对齐分配函数
fn alignedAlloc(allocator: std.mem.Allocator, size: usize, alignment: usize) ![]u8 {
    // 使用标准库的alignedAlloc函数
    return allocator.alignedAlloc(u8, alignment, size);
}

pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    try stdout.print("Memory alignment example\n", .{});
    
    // 检查结构体对齐
    checkAlignment(DefaultAligned);
    checkAlignment(ExplicitAligned);
    checkAlignment(AlignStruct);
    
    // 检查全局变量对齐
    const buffer_align = @alignOf(@TypeOf(aligned_buffer));
    try stdout.print("Global buffer alignment: {} bytes\n", .{buffer_align});
    
    // 分配对齐内存
    const aligned_mem = try alignedAlloc(std.heap.page_allocator, 1024, 64);
    defer std.heap.page_allocator.free(aligned_mem);
    
    // 检查分配的内存对齐
    const addr = @ptrToInt(aligned_mem.ptr);
    const is_aligned = (addr & (64 - 1)) == 0;
    try stdout.print("Allocated memory address: 0x{x}, aligned to 64 bytes: {}\n", .{addr, is_aligned});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">自定义分配器</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">const std = @import("std");

// 简单的线性分配器
const LinearAllocator = struct {
    buffer: []u8,
    offset: usize,
    
    pub fn init(buffer: []u8) LinearAllocator {
        return LinearAllocator{ .buffer = buffer, .offset = 0 };
    }
    
    pub fn allocator(self: *LinearAllocator) std.mem.Allocator {
        return .{
            .ptr = self,
            .vtable = &LinearAllocator.vtable,
        };
    }
    
    fn alloc(self: *LinearAllocator, len: usize, ptr_align: u8, len_align: u29, ret_addr: usize) ?[*]u8 {
        _ = len_align;
        _ = ret_addr;
        
        // 计算对齐后的偏移量
        const aligned_offset = std.mem.alignForward(self.offset, ptr_align);
        if (aligned_offset + len > self.buffer.len) {
            return null;
        }
        
        const ptr = @ptrCast([*]u8, &self.buffer[aligned_offset]);
        self.offset = aligned_offset + len;
        return ptr;
    }
    
    fn resize(self: *LinearAllocator, buf: []u8, buf_align: u8, new_len: usize, len_align: u29, ret_addr: usize) bool {
        _ = self;
        _ = buf_align;
        _ = len_align;
        _ = ret_addr;
        
        // 线性分配器不支持缩小，只支持在原地扩展
        return new_len <= buf.len;
    }
    
    fn free(self: *LinearAllocator, buf: []u8, buf_align: u8, ret_addr: usize) void {
        _ = self;
        _ = buf;
        _ = buf_align;
        _ = ret_addr;
        // 线性分配器不支持单独释放内存
    }
    
    // 重置分配器，允许重用内存
    pub fn reset(self: *LinearAllocator) void {
        self.offset = 0;
    }
    
    pub const vtable: std.mem.Allocator.VTable = .{
        .alloc = alloc,
        .resize = resize,
        .free = free,
    };
};

pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    try stdout.print("Custom allocator example\n", .{});
    
    // 创建内存池
    var memory_pool: [4096]u8 = undefined;
    
    // 初始化线性分配器
    var linear_allocator = LinearAllocator.init(&memory_pool);
    const allocator = linear_allocator.allocator();
    
    // 使用自定义分配器
    const buffer = try allocator.alloc(u8, 1024);
    defer allocator.free(buffer);
    
    // 填充并使用内存
    std.mem.set(u8, buffer, 'A');
    try stdout.print("Allocated buffer size: {} bytes, first 10 bytes: {s}\n", .{buffer.len, buffer[0..10]});
    
    // 分配更多内存
    const string = try std.fmt.allocPrint(allocator, "Hello from custom allocator!", .{});
    defer allocator.free(string);
    
    try stdout.print("Allocated string: {s}\n", .{string});
    
    // 重置分配器
    linear_allocator.reset();
    try stdout.print("Allocator reset, memory can be reused\n", .{});
}
</code></pre>
                </div>

                <div class="bg-slate-800 rounded-xl p-6 syntax-card mb-6">
                    <h5 class="text-lg font-medium mb-4 text-purple-300">编译时代码生成</h5>
                    <pre class="code-block p-4 rounded-lg overflow-x-auto"><code class="code-font text-slate-300">const std = @import("std");

// 编译时生成函数
fn generateMathFunction(comptime operation: []const u8) type {
    return struct {
        pub fn apply(a: f64, b: f64) f64 {
            if (std.mem.eql(u8, operation, "add")) {
                return a + b;
            } else if (std.mem.eql(u8, operation, "subtract")) {
                return a - b;
            } else if (std.mem.eql(u8, operation, "multiply")) {
                return a * b;
            } else if (std.mem.eql(u8, operation, "divide")) {
                return a / b;
            } else {
                @compileError("Unknown operation: " ++ operation);
            }
        }
    };
}

// 编译时生成结构体字段
fn generateVector(comptime dimensions: u32) type {
    comptime var fields: [dimensions]std.builtin.Type.StructField = undefined;
    
    for (0..dimensions) |i| {
        const name = "x" ++ formatInt(@intCast(u32, i));
        fields[i] = .{
            .name = name,
            .type = f64,
            .default_value = @ptrCast(*const anyopaque, &@as(f64, 0.0)),
            .is_comptime = false,
            .alignment = @alignOf(f64),
        };
    }
    
    return @Type(.{
        .Struct = .{
            .layout = .Auto,
            .fields = &fields,
            .decls = &.{},
            .is_tuple = false,
        },
    });
}

// 辅助函数：编译时将整数转换为字符串
fn formatInt(comptime n: u32) []const u8 { comptime {
    var buffer: [20]u8 = undefined;
    const len = std.fmt.formatInt(n, 10, .lower, .{}, &buffer) catch unreachable;
    return buffer[0..len];
} }

// 编译时生成的测试
comptime {
    // 生成并测试加法函数
    const AddFunction = generateMathFunction("add");
    std.debug.assert(AddFunction.apply(1.0, 2.0) == 3.0);
    
    // 生成并测试乘法函数
    const MultiplyFunction = generateMathFunction("multiply");
    std.debug.assert(MultiplyFunction.apply(2.0, 3.0) == 6.0);
    
    // 生成2D向量类型
    const Vector2D = generateVector(2);
    _ = Vector2D{ .x0 = 1.0, .x1 = 2.0 };
    
    // 生成3D向量类型
    const Vector3D = generateVector(3);
    _ = Vector3D{ .x0 = 1.0, .x1 = 2.0, .x2 = 3.0 };
    
    std.debug.print("Compiled time code generation tests passed!\n", .{});
}

pub fn main() !void {
    const stdout = std.io.getStdOut().writer();
    
    try stdout.print("Compile-time code generation example\n", .{});
    
    // 使用编译时生成的函数
    const SubtractFunction = generateMathFunction("subtract");
    const result = SubtractFunction.apply(10.0, 3.0);
    try stdout.print("Subtraction result: {d:.2}\n", .{result});
    
    // 使用编译时生成的4D向量
    const Vector4D = generateVector(4);
    const vec4 = Vector4D{ .x0 = 1.0, .x1 = 2.0, .x2 = 3.0, .x3 = 4.0 };
    try stdout.print("4D vector components: {d:.1}, {d:.1}, {d:.1}, {d:.1}\n", 
        .{vec4.x0, vec4.x1, vec4.x2, vec4.x3});
    
    try stdout.print("All compile-time generated code works!\n", .{});
}
</code></pre>
                </div>
            </div>
        </section>
            </div>
        </div>
    </main>
</body>
</html>