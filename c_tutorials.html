<!-- 1. 变量声明 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">1. 变量声明</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 静态类型语言，变量声明时需要指定类型</h4>
                        <p class="text-slate-300 mb-4">特点：强类型检查，变量声明必须指定类型，内存手动管理，支持多种基本类型。注意事项：注意整数溢出问题，char类型可用于存储整数，浮点数默认为double类型。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 基本类型变量声明（C99）</div>
                            <div class="text-sm leading-6">
                                <span class="text-purple-400">int</span> <span class="text-blue-300">x</span> = <span class="text-yellow-300">10</span>;<br>
                                <span class="text-purple-400">char</span> <span class="text-blue-300">name</span>[] = <span class="text-green-300">"张三"</span>;<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">age</span> = <span class="text-yellow-300">25</span>;<br>
                                <span class="text-purple-400">float</span> <span class="text-blue-300">height</span> = <span class="text-yellow-300">1.75f</span>;<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">is_student</span> = <span class="text-yellow-300">1</span>;<br>
                                <br>
                                <span class="text-blue-400">// 使用printf输出（C99支持可变参数宏）</span><br>
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"整数: %d, 字符串: %s
"</span>, <span class="text-blue-300">x</span>, <span class="text-blue-300">name</span>);
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 2. 数据类型 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">2. 数据类型</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 基础数据类型，直接对应硬件</h4>
                        <p class="text-slate-300 mb-4">特点：数据类型直接对应硬件，支持无符号类型，内存布局明确，类型大小由编译器决定。注意事项：int类型大小在不同平台可能不同，使用sizeof()获取类型大小。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 基本数据类型</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 整数类型</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">num_int</span> = <span class="text-yellow-300">42</span>;<br>
                                <span class="text-blue-400">short</span> <span class="text-blue-300">num_short</span> = <span class="text-yellow-300">1000</span>;<br>
                                <span class="text-blue-400">long</span> <span class="text-blue-300">num_long</span> = <span class="text-yellow-300">1000000</span>;<br>
                                <span class="text-blue-400">long long</span> <span class="text-blue-300">num_ll</span> = <span class="text-yellow-300">10000000000</span>;<br>
                                <span class="text-blue-400">unsigned int</span> <span class="text-blue-300">num_uint</span> = <span class="text-yellow-300">4294967295</span>;<br>
                                <br>
                                <span class="text-blue-400">// 浮点数类型</span><br>
                                <span class="text-blue-400">float</span> <span class="text-blue-300">num_float</span> = <span class="text-yellow-300">3.14f</span>;<br>
                                <span class="text-blue-400">double</span> <span class="text-blue-300">num_double</span> = <span class="text-yellow-300">3.1415926535</span>;<br>
                                <br>
                                <span class="text-blue-400">// 字符类型</span><br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">c</span> = <span class="text-green-300">'A'</span>;<br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">str</span>[] = <span class="text-green-300">"Hello"</span>;<br>
                                <br>
                                <span class="text-blue-400">// 布尔值（用整数表示）</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">is_true</span> = <span class="text-yellow-300">1</span>;<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">is_false</span> = <span class="text-yellow-300">0</span>;
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 3. 控制流 - 条件语句 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">3. 控制流 - 条件语句</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 基础条件语句，支持传统结构化编程</h4>
                        <p class="text-slate-300 mb-4">特点：支持if-else if-else结构，支持三元运算符，支持switch-case语句，支持嵌套条件。注意事项：条件判断使用花括号区分代码块，switch-case需要break语句，C89不支持在for循环中声明变量。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 条件语句</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">int</span> <span class="text-blue-300">age</span> = <span class="text-yellow-300">18</span>;<br>
                                <br>
                                <span class="text-purple-400">if</span> (<span class="text-blue-300">age</span> &lt; <span class="text-yellow-300">18</span>) {
                                    <span class="text-blue-300">printf</span>(<span class="text-green-300">"未成年"</span>);
                                } <span class="text-purple-400">else</span> <span class="text-purple-400">if</span> (<span class="text-blue-300">age</span> == <span class="text-yellow-300">18</span>) {
                                    <span class="text-blue-300">printf</span>(<span class="text-green-300">"刚成年"</span>);
                                } <span class="text-purple-400">else</span> {
                                    <span class="text-blue-300">printf</span>(<span class="text-green-300">"成年人"</span>);
                                }
                                <br>
                                <span class="text-blue-400">// 三元运算符</span><br>
                                <span class="text-blue-400">char</span> *<span class="text-blue-300">result</span> = (<span class="text-blue-400">int</span>)<span class="text-yellow-300">1</span> ? <span class="text-green-300">"成功"</span> : <span class="text-green-300">"失败"</span>;
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"%s\n"</span>, <span class="text-blue-300">result</span>);
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 4. 控制流 - 循环语句 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">4. 控制流 - 循环语句</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 传统循环结构</h4>
                        <p class="text-slate-300 mb-4">特点：支持for循环、while循环、do-while循环，支持break和continue，支持循环嵌套，支持数组遍历。注意事项：避免无限循环，for循环中注意分号使用，注意循环变量类型。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 循环语句</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// for循环</span><br>
                                <span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-yellow-300">5</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">i</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 遍历数组</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">numbers</span>[] = {<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>, <span class="text-yellow-300">4</span>, <span class="text-yellow-300">5</span>};<br>
                                <span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-yellow-300">5</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">numbers</span>[<span class="text-blue-300">i</span>]);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// while循环</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">count</span> = <span class="text-yellow-300">0</span>;<br>
                                <span class="text-purple-400">while</span> (<span class="text-blue-300">count</span> &lt; <span class="text-yellow-300">5</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">count</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">count</span>++;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 5. 函数定义 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">5. 函数定义</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 函数定义和调用（C99）</h4>
                        <p class="text-slate-300 mb-4">特点：支持函数声明和定义，支持返回类型，支持函数参数，支持递归调用，支持函数指针。C99支持可变参数。注意事项：函数必须在使用前声明，函数名不能重复，递归需要谨慎使用。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 函数定义</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 函数声明</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">add</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">a</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">b</span>);<br>
                                <br>
                                <span class="text-blue-400">// 函数定义</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">add</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">a</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 主函数</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">add</span>(<span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;printf</span>(<span class="text-green-300">"结果：%d
"</span>, <span class="text-blue-300">result</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-yellow-300">0</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 递归函数示例</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">factorial</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">n</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;if</span> (<span class="text-blue-300">n</span> &lt;= <span class="text-yellow-300">1</span>) <span class="text-green-300">return</span> <span class="text-yellow-300">1</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-blue-300">n</span> * <span class="text-blue-300">factorial</span>(<span class="text-blue-300">n</span> - <span class="text-yellow-300">1</span>);<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 6. 函数参数 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">6. 函数参数</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 位置参数和指针传递（C99）</h4>
                        <p class="text-slate-300 mb-4">特点：只支持位置参数，需要显式声明参数类型，使用指针传递复杂数据类型，支持函数指针参数。C99支持可变参数列表。注意事项：参数传递为值传递，指针传递可修改实参，注意指针安全性。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 函数参数</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 简单参数传递（值传递）</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">add</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">a</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 指针传递（引用传递）</span><br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">swap</span>(<span class="text-blue-400">int</span> *<span class="text-blue-300">x</span>, <span class="text-blue-400">int</span> *<span class="text-blue-300">y</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;int</span> <span class="text-blue-300">temp</span> = *<span class="text-blue-300">x</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>*<span class="text-blue-300">x</span> = *<span class="text-blue-300">y</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>*<span class="text-blue-300">y</span> = <span class="text-blue-300">temp</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 数组参数</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">sum_array</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">arr</span>[], <span class="text-blue-400">int</span> <span class="text-blue-300">size</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;int</span> <span class="text-blue-300">sum</span> = <span class="text-yellow-300">0</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-blue-300">size</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sum</span> += <span class="text-blue-300">arr</span>[<span class="text-blue-300">i</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-blue-300">sum</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// C99可变参数</span><br>
                                <span class="text-blue-400">#include</span> &lt;<span class="text-blue-300">stdarg.h</span>&gt;<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">sum</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">count</span>, ...) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;va_list</span> <span class="text-blue-300">args</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;va_start</span>(<span class="text-blue-300">args</span>, <span class="text-blue-300">count</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;int</span> <span class="text-blue-300">total</span> = <span class="text-yellow-300">0</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-blue-300">count</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">total</span> += <span class="text-blue-300">va_arg</span>(<span class="text-blue-300">args</span>, <span class="text-blue-400">int</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;va_end</span>(<span class="text-blue-300">args</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-blue-300">total</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 7. 函数返回值 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">7. 函数返回值</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 单个返回值和结构体返回（C99）</h4>
                        <p class="text-slate-300 mb-4">特点：只支持返回单个值，使用指针返回多个值，返回结构体类型，支持void返回类型，返回指针类型。C99支持内联函数。注意事项：不能返回局部变量的指针，返回指针时注意内存管理。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 函数返回值</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 单个返回值</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">add</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">a</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用指针返回多个值</span><br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">calculate</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">a</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">b</span>,<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> *<span class="text-blue-300">sum</span>, <span class="text-blue-400">int</span> *<span class="text-blue-300">product</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>*<span class="text-blue-300">sum</span> = <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>*<span class="text-blue-300">product</span> = <span class="text-blue-300">a</span> * <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 结构体返回值</span><br>
                                <span class="text-blue-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;int</span> <span class="text-blue-300">x</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;int</span> <span class="text-blue-300">y</span>;<br>
                                } <span class="text-blue-300">Point</span>;<br>
                                <br>
                                <span class="text-blue-300">Point</span> <span class="text-blue-300">create_point</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">x</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">y</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;Point</span> <span class="text-blue-300">p</span> = {<span class="text-blue-300">x</span>, <span class="text-blue-300">y</span>};<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-blue-300">p</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 主函数示例</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;int</span> <span class="text-blue-300">sum</span>, <span class="text-blue-300">product</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">calculate</span>(<span class="text-yellow-300">5</span>, <span class="text-yellow-300">3</span>, &<span class="text-blue-300">sum</span>, &<span class="text-blue-300">product</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;printf</span>(<span class="text-green-300">"和：%d，积：%d
"</span>, <span class="text-blue-300">sum</span>, <span class="text-blue-300">product</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 8. 字符串操作 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">8. 字符串操作</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 字符数组和字符串操作（C99）</h4>
                        <p class="text-slate-300 mb-4">特点：使用字符数组表示字符串，使用' '结尾，支持字符串处理函数（C99），支持宽字符串。C99支持可变长度数组。注意事项：字符串以' '结尾，注意数组越界，使用标准字符串函数。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 字符串操作</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 字符串声明和初始化</span><br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">str1</span>[] = <span class="text-green-300">"Hello"</span>;<br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">str2</span>[<span class="text-yellow-300">10</span>] = <span class="text-green-300">"World"</span>;<br>
                                <br>
                                <span class="text-blue-400">// 字符串复制</span><br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">dest</span>[<span class="text-yellow-300">100</span>];<br>
                                <span class="text-blue-300">strcpy</span>(<span class="text-blue-300">dest</span>, <span class="text-blue-300">str1</span>);<br>
                                <br>
                                <span class="text-blue-400">// 字符串连接</span><br>
                                <span class="text-blue-300">strcat</span>(<span class="text-blue-300">dest</span>, <span class="text-green-300">" "</span>);<br>
                                <span class="text-blue-300">strcat</span>(<span class="text-blue-300">dest</span>, <span class="text-blue-300">str2</span>);<br>
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"%s
"</span>, <span class="text-blue-300">dest</span>); <span class="text-slate-500">// 输出：Hello World</span><br>
                                <br>
                                <span class="text-blue-400">// 字符串比较</span><br>
                                <span class="text-blue-400">if</span> (<span class="text-blue-300">strcmp</span>(<span class="text-blue-300">str1</span>, <span class="text-blue-300">str2</span>) == <span class="text-yellow-300">0</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;printf</span>(<span class="text-green-300">"字符串相等
"</span>);<br>
                                } <span class="text-purple-400">else</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;printf</span>(<span class="text-green-300">"字符串不等
"</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 字符串长度</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">len</span> = <span class="text-blue-300">strlen</span>(<span class="text-blue-300">str1</span>);<br>
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"长度：%d
"</span>, <span class="text-blue-300">len</span>); <span class="text-slate-500">// 输出：5</span><br>
                                <br>
                                <span class="text-blue-400">// 字符数组操作（C99）</span><br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">buffer</span>[<span class="text-yellow-300">50</span>];<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">n</span> = <span class="text-yellow-300">10</span>;<br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">vla</span>[<span class="text-blue-300">n</span>]; <span class="text-slate-500">// 可变长度数组（C99）</span>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 9. 列表操作 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">9. 列表操作</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 数组和手动列表管理</h4>
                        <p class="text-slate-300 mb-4">特点：使用数组模拟列表，支持静态数组和动态数组（C99），手动管理列表大小，支持指针操作，需要手动实现列表操作函数。C99支持可变长度数组。注意事项：数组大小固定，需要手动跟踪元素数量，注意数组越界，需要手动内存管理。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 数组和列表操作</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 静态数组初始化</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">fruits</span>[] = {<span class="text-yellow-300">1</span>, <span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>}; <span class="text-slate-500">// 1=苹果, 2=香蕉, 3=橙子</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">fruits_size</span> = <span class="text-yellow-300">3</span>;<br>
                                <br>
                                <span class="text-blue-400">// 数组索引访问</span><br>
                                <span class="text-green-300">printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">fruits</span>[<span class="text-yellow-300">0</span>]); <span class="text-slate-500">// 输出：1（苹果）</span><br>
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">fruits</span>[<span class="text-blue-300">fruits_size</span> - <span class="text-yellow-300">1</span>]); <span class="text-slate-500">// 输出：3（橙子）</span><br>
                                <br>
                                <span class="text-blue-400">// C99可变长度数组</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">n</span> = <span class="text-yellow-300">5</span>;<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">numbers</span>[<span class="text-blue-300">n</span>]; <span class="text-slate-500">// C99特性</span><br>
                                <span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-blue-300">n</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">numbers</span>[<span class="text-blue-300">i</span>] = (<span class="text-blue-300">i</span> + <span class="text-yellow-300">1</span>) * (<span class="text-blue-300">i</span> + <span class="text-yellow-300">1</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 动态数组分配（C99）</span><br>
                                <span class="text-blue-400">int</span> *<span class="text-blue-300">dynamic_array</span> = <span class="text-green-300">malloc</span>(<span class="text-yellow-300">10</span> * <span class="text-purple-400">sizeof</span>(<span class="text-blue-400">int</span>));<br>
                                <span class="text-purple-400">if</span> (<span class="text-blue-300">dynamic_array</span> == <span class="text-purple-400">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-green-300">printf</span>(<span class="text-green-300">"内存分配失败
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">1</span>;<br>
                                }<br>
                                <span class="text-green-300">free</span>(<span class="text-blue-300">dynamic_array</span>); <span class="text-slate-500">// 释放内存</span>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 10. 字典操作 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">10. 字典操作</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 结构体和手动哈希实现</h4>
                        <p class="text-slate-300 mb-4">特点：使用结构体数组模拟字典，需要手动实现哈希函数，支持字符串键和数值键，支持动态扩容。C11支持匿名结构体和联合体。注意事项：需要手动管理内存，处理哈希冲突，注意键的字符串长度限制，实现查找算法。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 结构体定义和字典操作</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 定义键值对结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">key</span>[<span class="text-yellow-300">50</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">value</span>;<br>
                                } <span class="text-blue-300">KeyValue</span>;<br>
                                <br>
                                <span class="text-blue-400">// 创建键值对数组</span><br>
                                <span class="text-blue-300">KeyValue</span> <span class="text-blue-300">person</span>[] = {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>{<span class="text-green-300">"name"</span>, <span class="text-yellow-300">12345</span>},<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>{<span class="text-green-300">"age"</span>, <span class="text-yellow-300">18</span>},<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>{<span class="text-green-300">"gender"</span>, <span class="text-yellow-300">1</span>} <span class="text-slate-500">// 1=男, 0=女</span><br>
                                };<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">person_size</span> = <span class="text-yellow-300">3</span>;<br>
                                <br>
                                <span class="text-blue-400">// 手动查找函数</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">find_value</span>(<span class="text-blue-300">KeyValue</span> *<span class="text-blue-300">data</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">size</span>, <span class="text-blue-400">char</span> *<span class="text-blue-300">key</span>) {<br>
                                <span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-blue-300">size</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">strcmp</span>(<span class="text-blue-300">data</span>[<span class="text-blue-300">i</span>].<span class="text-blue-300">key</span>, <span class="text-blue-300">key</span>) == <span class="text-yellow-300">0</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">data</span>[<span class="text-blue-300">i</span>].<span class="text-blue-300">value</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                }<br>
                                <span class="text-purple-400">return</span> <span class="text-yellow-300">-1</span>; <span class="text-slate-500">// 未找到</span><br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用示例</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">name_value</span> = <span class="text-blue-300">find_value</span>(<span class="text-blue-300">person</span>, <span class="text-blue-300">person_size</span>, <span class="text-green-300">"name"</span>);<br>
                                <span class="text-green-300">printf</span>(<span class="text-green-300">"name的值：%d
"</span>, <span class="text-blue-300">name_value</span>);
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 11. 集合操作 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">11. 集合操作</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 手动集合实现</h4>
                        <p class="text-slate-300 mb-4">特点：使用数组和位图模拟集合，支持集合运算，需要手动实现去重算法，支持整数集合和字符集合。C11支持布尔类型。注意事项：需要手动管理集合大小和容量，注意数组越界，实现集合运算算法需要额外的内存空间。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 集合操作实现</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 整数集合定义</span><br>
                                <span class="text-blue-400">#define</span> <span class="text-blue-300">MAX_SET_SIZE</span> <span class="text-yellow-300">100</span><br>
                                <span class="text-blue-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">elements</span>[<span class="text-blue-300">MAX_SET_SIZE</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">size</span>;<br>
                                } <span class="text-blue-300">IntSet</span>;<br>
                                <br>
                                <span class="text-blue-400">// 初始化集合</span><br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">init_set</span>(<span class="text-blue-300">IntSet</span> *<span class="text-blue-300">set</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">set</span>-><span class="text-blue-300">size</span> = <span class="text-yellow-300">0</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 添加元素（自动去重）</span><br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">add_element</span>(<span class="text-blue-300">IntSet</span> *<span class="text-blue-300">set</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">value</span>) {<br>
                                <span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-blue-300">set</span>-><span class="text-blue-300">size</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">set</span>-><span class="text-blue-300">elements</span>[<span class="text-blue-300">i</span>] == <span class="text-blue-300">value</span>) <span class="text-purple-400">return</span>; <span class="text-slate-500">// 已存在</span><br>
                                }<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">set</span>-><span class="text-blue-300">size</span> &lt; <span class="text-blue-300">MAX_SET_SIZE</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">set</span>-><span class="text-blue-300">elements</span>[<span class="text-blue-300">set</span>-><span class="text-blue-300">size</span>++] = <span class="text-blue-300">value</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 集合交集</span><br>
                                <span class="text-blue-300">IntSet</span> <span class="text-blue-300">intersection</span>(<span class="text-blue-300">IntSet</span> *<span class="text-blue-300">s1</span>, <span class="text-blue-300">IntSet</span> *<span class="text-blue-300">s2</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">IntSet</span> <span class="text-blue-300">result</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">init_set</span>(&<span class="text-blue-300">result</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> &lt; <span class="text-blue-300">s1</span>-><span class="text-blue-300">size</span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">j</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">j</span> &lt; <span class="text-blue-300">s2</span>-><span class="text-blue-300">size</span>; <span class="text-blue-300">j</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">s1</span>-><span class="text-blue-300">elements</span>[<span class="text-blue-300">i</span>] == <span class="text-blue-300">s2</span>-><span class="text-blue-300">elements</span>[<span class="text-blue-300">j</span>]) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">add_element</span>(&<span class="text-blue-300">result</span>, <span class="text-blue-300">s1</span>-><span class="text-blue-300">elements</span>[<span class="text-blue-300">i</span>]);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">break</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">result</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 12. 函数嵌套 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">12. 函数嵌套</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 不支持函数嵌套，使用函数指针</h4>
                        <p class="text-slate-300 mb-4">特点：C语言不支持在函数内部定义函数，但可以使用函数指针模拟类似效果，需要手动管理上下文变量。C11支持匿名联合体。注意事项：函数指针需要额外的上下文传递，无法直接访问外部函数的局部变量。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 函数指针模拟闭包</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 上下文结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">base_value</span>;<br>
                                } <span class="text-blue-300">AddContext</span>;<br>
                                <br>
                                <span class="text-blue-400">// 内部函数（实际是普通函数）</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">add_with_base</span>(<span class="text-blue-400">void</span> *<span class="text-blue-300">context</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">value</span>) {<br>
                                <span class="text-blue-300">AddContext</span> *<span class="text-blue-300">ctx</span> = (<span class="text-blue-300">AddContext</span> *)<span class="text-blue-300">context</span>;<br>
                                <span class="text-purple-400">return</span> <span class="text-blue-300">ctx</span>-><span class="text-blue-300">base_value</span> + <span class="text-blue-300">value</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 模拟outer函数</span><br>
                                <span class="text-blue-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> (*<span class="text-blue-300">func</span>)(<span class="text-blue-400">void</span>*, <span class="text-blue-400">int</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">AddContext</span> <span class="text-blue-300">ctx</span>;<br>
                                } <span class="text-blue-300">Closure</span>;<br>
                                <br>
                                <span class="text-blue-300">Closure</span> <span class="text-blue-300">create_adder</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">base</span>) {<br>
                                <span class="text-blue-300">Closure</span> <span class="text-blue-300">closure</span>;<br>
                                <span class="text-blue-300">closure</span>.<span class="text-blue-300">func</span> = <span class="text-blue-300">add_with_base</span>;<br>
                                <span class="text-blue-300">closure</span>.<span class="text-blue-300">ctx</span>.<span class="text-blue-300">base_value</span> = <span class="text-blue-300">base</span>;<br>
                                <span class="text-purple-400">return</span> <span class="text-blue-300">closure</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 13. 匿名函数 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">13. 匿名函数</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 使用函数指针实现</h4>
                        <p class="text-slate-300 mb-4">特点：C语言没有内置匿名函数，但可以使用函数指针实现类似功能，支持简单的函数定义和传递。C99支持复合字面量。注意事项：需要预先定义函数，不能内联定义，函数指针类型需要匹配。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 函数指针模拟匿名函数</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 定义函数指针类型</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-blue-400">int</span> (*<span class="text-blue-300">BinaryFunc</span>)(<span class="text-blue-400">int</span>, <span class="text-blue-400">int</span>);<br>
                                <br>
                                <span class="text-blue-400">// 普通函数定义（模拟匿名函数）</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">add_func</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">x</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">y</span>) {<br>
                                <span class="text-purple-400">return</span> <span class="text-blue-300">x</span> + <span class="text-blue-300">y</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 函数指针变量（模拟匿名函数）</span><br>
                                <span class="text-blue-300">BinaryFunc</span> <span class="text-blue-300">add</span> = <span class="text-blue-300">add_func</span>;<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">add</span>(<span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>); <span class="text-slate-500">// 输出5</span><br>
                                <br>
                                <span class="text-blue-400">// 简单的排序比较函数</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">compare_desc</span>(<span class="text-blue-400">const</span> <span class="text-blue-400">void</span> *<span class="text-blue-300">a</span>, <span class="text-blue-400">const</span> <span class="text-blue-400">void</span> *<span class="text-blue-300">b</span>) {<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">int_a</span> = *(<span class="text-blue-400">const</span> <span class="text-blue-400">int</span>*)<span class="text-blue-300">a</span>;<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">int_b</span> = *(<span class="text-blue-400">const</span> <span class="text-blue-400">int</span>*)<span class="text-blue-300">b</span>;<br>
                                <span class="text-purple-400">return</span> <span class="text-blue-300">int_b</span> - <span class="text-blue-300">int_a</span>; <span class="text-slate-500">// 降序排列</span><br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用函数指针进行排序</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">numbers</span>[] = {<span class="text-yellow-300">3</span>, <span class="text-yellow-300">1</span>, <span class="text-yellow-300">4</span>, <span class="text-yellow-300">1</span>, <span class="text-yellow-300">5</span>};<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">n</span> = <span class="text-yellow-300">5</span>;<br>
                                <span class="text-blue-300">qsort</span>(<span class="text-blue-300">numbers</span>, <span class="text-blue-300">n</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-400">int</span>), <span class="text-blue-300">compare_desc</span>);
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 14. 类和对象 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">14. 类和对象</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 使用结构体模拟类</h4>
                        <p class="text-slate-300 mb-4">特点：C语言没有内置类，使用结构体模拟对象，使用函数指针模拟方法，需要手动分配内存。C99支持复合字面量。注意事项：需要手动管理内存，没有自动析构，需要实现构造函数和析构函数模式。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 结构体模拟类和对象</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 定义结构体（模拟类）</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Person</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">name</span>[<span class="text-yellow-300">50</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">age</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span> (*<span class="text-blue-300">greet</span>)(<span class="text-purple-400">struct</span> <span class="text-blue-300">Person</span>* <span class="text-blue-300">self</span>); <span class="text-slate-500">// 函数指针模拟方法</span><br>
                                } <span class="text-blue-300">Person</span>;<br>
                                <br>
                                <span class="text-blue-400">// 构造函数</span><br>
                                <span class="text-blue-300">Person</span>* <span class="text-blue-300">person_create</span>(<span class="text-blue-400">char</span> *<span class="text-blue-300">name</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">age</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span> = <span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Person</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">p</span>-><span class="text-blue-300">name</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">p</span>-><span class="text-blue-300">age</span> = <span class="text-blue-300">age</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">p</span>-><span class="text-blue-300">greet</span> = <span class="text-blue-300">person_greet</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">p</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 方法实现</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">person_greet</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"你好，我是%s，今年%d岁"</span>, <span class="text-blue-300">self</span>-><span class="text-blue-300">name</span>, <span class="text-blue-300">self</span>-><span class="text-blue-300">age</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 析构函数</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">person_destroy</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">p</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用示例</span><br>
                                <span class="text-blue-300">Person</span> *<span class="text-blue-300">person</span> = <span class="text-blue-300">person_create</span>(<span class="text-green-300">"张三"</span>, <span class="text-yellow-300">18</span>);<br>
                                <span class="text-blue-300">person</span>-><span class="text-blue-300">greet</span>(<span class="text-blue-300">person</span>);<br>
                                <span class="text-blue-300">person_destroy</span>(<span class="text-blue-300">person</span>);
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 15. 继承 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">15. 继承</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 结构体嵌套模拟继承</h4>
                        <p class="text-slate-300 mb-4">特点：C语言没有内置继承，使用结构体嵌套模拟，支持方法重写，支持函数指针调用。C11支持匿名结构体。注意事项：需要手动实现方法表结构，父类方法需要通过函数指针调用，注意类型转换。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 结构体嵌套模拟继承</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 定义父类结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Animal</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">name</span>[<span class="text-yellow-300">30</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span> (*<span class="text-blue-300">speak</span>)(<span class="text-purple-400">struct</span> <span class="text-blue-300">Animal</span>* <span class="text-blue-300">self</span>);<br>
                                } <span class="text-blue-300">Animal</span>;<br>
                                <br>
                                <span class="text-blue-400">// 父类构造函数</span><br>
                                <span class="text-blue-300">Animal</span>* <span class="text-blue-300">animal_create</span>(<span class="text-blue-400">char</span> *<span class="text-blue-300">name</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Animal</span> *<span class="text-blue-300">a</span> = <span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Animal</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">a</span>-><span class="text-blue-300">name</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">a</span>-><span class="text-blue-300">speak</span> = <span class="text-blue-300">animal_speak</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 父类方法</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">animal_speak</span>(<span class="text-blue-300">Animal</span> *<span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"动物在说话
"</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 定义子类结构体（继承父类）</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Dog</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Animal</span> <span class="text-blue-300">base</span>; <span class="text-slate-500">// 嵌套父类</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">breed</span>[<span class="text-yellow-300">20</span>];<br>
                                } <span class="text-blue-300">Dog</span>;<br>
                                <br>
                                <span class="text-blue-400">// 子类构造函数</span><br>
                                <span class="text-blue-300">Dog</span>* <span class="text-blue-300">dog_create</span>(<span class="text-blue-400">char</span> *<span class="text-blue-300">name</span>, <span class="text-blue-400">char</span> *<span class="text-blue-300">breed</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Dog</span> *<span class="text-blue-300">d</span> = <span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Dog</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">d</span>-><span class="text-blue-300">base.name</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">d</span>-><span class="text-blue-300">breed</span>, <span class="text-blue-300">breed</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">d</span>-><span class="text-blue-300">base.speak</span> = <span class="text-blue-300">dog_speak</span>; <span class="text-slate-500">// 重写方法</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">d</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 子类方法（重写）</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">dog_speak</span>(<span class="text-blue-300">Animal</span> *<span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">animal_speak</span>(<span class="text-blue-300">self</span>); <span class="text-slate-500">// 调用父类方法</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"汪汪汪
"</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用示例</span><br>
                                <span class="text-blue-300">Animal</span> *<span class="text-blue-300">animal</span> = <span class="text-blue-300">animal_create</span>(<span class="text-green-300">"小动物"</span>);<br>
                                <span class="text-blue-300">Dog</span> *<span class="text-blue-300">dog</span> = <span class="text-blue-300">dog_create</span>(<span class="text-green-300">"旺财"</span>, <span class="text-green-300">"金毛"</span>);<br>
                                <span class="text-blue-300">animal</span>-><span class="text-blue-300">speak</span>(<span class="text-blue-300">animal</span>);<br>
                                <span class="text-blue-300">dog</span>-><span class="text-blue-300">base.speak</span>((<span class="text-blue-300">Animal</span>*)<span class="text-blue-300">dog</span>);
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 16. 多态 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">16. 多态</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 函数指针实现多态</h4>
                        <p class="text-slate-300 mb-4">特点：C语言通过函数指针实现多态，相同函数指针调用不同函数，支持通用接口调用。注意事项：需要使用统一的函数指针类型，需要类型转换，运行时多态由函数指针决定。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 函数指针实现多态</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 定义通用动物结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Animal_vtable</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span> (*<span class="text-blue-300">speak</span>)(<span class="text-purple-400">void</span>* <span class="text-blue-300">self</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> *(*<span class="text-blue-300">get_name</span>)(<span class="text-purple-400">void</span>* <span class="text-blue-300">self</span>);<br>
                                } <span class="text-blue-300">Animal_vtable</span>;<br>
                                <br>
                                <span class="text-blue-400">// 通用Animal接口</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Animal_interface</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Animal_vtable</span> *<span class="text-blue-300">vtable</span>;<br>
                                } <span class="text-blue-300">Animal_interface</span>;<br>
                                <br>
                                <span class="text-blue-400">// 猫结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Cat</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Animal_vtable</span> *<span class="text-blue-300">vtable</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">name</span>[<span class="text-yellow-300">20</span>];<br>
                                } <span class="text-blue-300">Cat</span>;<br>
                                <br>
                                <span class="text-blue-400">// 猫的方法实现</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">cat_speak</span>(<span class="text-purple-400">void</span> *<span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Cat</span> *<span class="text-blue-300">cat</span> = (<span class="text-blue-300">Cat</span>*)<span class="text-blue-300">self</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"%s：喵喵喵
"</span>, <span class="text-blue-300">cat</span>-><span class="text-blue-300">name</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 猫的姓名获取</span><br>
                                <span class="text-blue-400">char</span>* <span class="text-blue-300">cat_get_name</span>(<span class="text-purple-400">void</span> *<span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Cat</span> *<span class="text-blue-300">cat</span> = (<span class="text-blue-300">Cat</span>*)<span class="text-blue-300">self</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">cat</span>-><span class="text-blue-300">name</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 创建猫对象</span><br>
                                <span class="text-blue-300">Cat</span>* <span class="text-blue-300">cat_create</span>(<span class="text-blue-400">char</span> *<span class="text-blue-300">name</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Cat</span> *<span class="text-blue-300">c</span> = <span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Cat</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">c</span>-><span class="text-blue-300">name</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">c</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 通用函数（多态）</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">make_animal_speak</span>(<span class="text-blue-300">Animal_interface</span> *<span class="text-blue-300">animal</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">animal</span>-><span class="text-blue-300">vtable</span>-><span class="text-blue-300">speak</span>(<span class="text-blue-300">animal</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用示例</span><br>
                                <span class="text-blue-300">Dog</span> *<span class="text-blue-300">dog</span> = <span class="text-blue-300">dog_create</span>(<span class="text-green-300">"旺财"</span>, <span class="text-green-300">"金毛"</span>);<br>
                                <span class="text-blue-300">Cat</span> *<span class="text-blue-300">cat</span> = <span class="text-blue-300">cat_create</span>(<span class="text-green-300">"咪咪"</span>);<br>
                                <br>
                                <span class="text-blue-300">Animal_interface</span> <span class="text-blue-300">dog_interface</span> = {<span class="text-green-300">&amp;dog_vtable</span>};<br>
                                <span class="text-blue-300">Animal_interface</span> <span class="text-blue-300">cat_interface</span> = {<span class="text-green-300">&amp;cat_vtable</span>};<br>
                                <br>
                                <span class="text-blue-300">make_animal_speak</span>(&<span class="text-blue-300">dog_interface</span>); <span class="text-slate-500">// 输出：旺财在说话
汪汪汪</span><br>
                                <span class="text-blue-300">make_animal_speak</span>(&<span class="text-blue-300">cat_interface</span>); <span class="text-slate-500">// 输出：咪咪：喵喵喵</span>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 17. 封装 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">17. 封装</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 使用static和结构体实现封装</h4>
                        <p class="text-slate-300 mb-4">特点：使用static关键字实现数据隐藏，使用结构体封装数据，提供公共接口函数访问数据，使用头文件和实现文件分离。C99支持复合字面量。注意事项：static函数只能在当前文件访问，结构体字段命名约定标识私有性。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// person.h - 公共接口</div>
                            <div class="text-sm leading-6">
                                <span class="text-purple-400">#ifndef</span> <span class="text-blue-300">PERSON_H</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">PERSON_H</span><br>
                                <br>
                                <span class="text-blue-400">// 只暴露不透明指针</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Person</span> <span class="text-blue-300">Person</span>;<br>
                                <br>
                                <span class="text-blue-400">// 公共接口函数</span><br>
                                <span class="text-blue-300">Person</span>* <span class="text-blue-300">person_create</span>(<span class="text-blue-400">char</span> *<span class="text-blue-300">name</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">age</span>);<br>
                                <span class="text-blue-400">char</span>* <span class="text-blue-300">person_get_name</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>);<br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">person_get_age</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>);<br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">person_set_age</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">age</span>);<br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">person_destroy</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>);<br>
                                <br>
                                <span class="text-purple-400">#endif</span><br>
                            </div>
                        </div>
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// person.c - 私有实现</div>
                                <span class="text-purple-400">#include</span> <span class="text-green-300">"person.h"</span><br>
                                <span class="text-purple-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-purple-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 私有结构体（隐藏实现）</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Person_private</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">_name</span>[<span class="text-yellow-300">50</span>]; <span class="text-slate-500">// 下划线表示私有</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">_age</span>; <span class="text-slate-500">// 下划线表示私有</span><br>
                                } <span class="text-blue-300">Person_private</span>;<br>
                                <br>
                                <span class="text-blue-400">// 私有函数（static函数）</span><br>
                                <span class="text-purple-400">static</span> <span class="text-purple-400">void</span> <span class="text-blue-300">validate_age</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">age</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">age</span> &lt; <span class="text-yellow-300">0</span> || <span class="text-blue-300">age</span> &gt; <span class="text-yellow-300">150</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">age</span> = <span class="text-yellow-300">0</span>; <span class="text-slate-500">// 简单的输入验证</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 公共函数实现</span><br>
                                <span class="text-blue-300">Person</span>* <span class="text-blue-300">person_create</span>(<span class="text-blue-400">char</span> *<span class="text-blue-300">name</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">age</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Person_private</span> *<span class="text-blue-300">p</span> = <span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Person_private</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">p</span>-><span class="text-blue-300">_name</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">validate_age</span>(<span class="text-blue-300">age</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">p</span>-><span class="text-blue-300">_age</span> = <span class="text-blue-300">age</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> (<span class="text-blue-300">Person</span>*)<span class="text-blue-300">p</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// Getter方法</span><br>
                                <span class="text-blue-400">char</span>* <span class="text-blue-300">person_get_name</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Person_private</span> *<span class="text-blue-300">pp</span> = (<span class="text-blue-300">Person_private</span>*)<span class="text-blue-300">p</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">pp</span>-><span class="text-blue-300">_name</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// Setter方法（封装数据访问）</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">person_set_age</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">age</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Person_private</span> *<span class="text-blue-300">pp</span> = (<span class="text-blue-300">Person_private</span>*)<span class="text-blue-300">p</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">validate_age</span>(<span class="text-blue-300">age</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pp</span>-><span class="text-blue-300">_age</span> = <span class="text-blue-300">age</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 析构函数</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">person_destroy</span>(<span class="text-blue-300">Person</span> *<span class="text-blue-300">p</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">p</span>);<br>
                                }<br>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 18. 特殊方法 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">18. 特殊方法</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 函数指针模拟特殊方法</h4>
                        <p class="text-slate-300 mb-4">特点：C语言没有内置特殊方法，使用函数指针模拟运算符重载，使用自定义函数实现__str__类似功能，使用构造函数和析构函数。C99支持复合字面量。注意事项：需要手动实现所有特殊方法，没有自动调用机制。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 函数指针模拟特殊方法</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 定义向量结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Vector</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">double</span> <span class="text-blue-300">x</span>, <span class="text-blue-300">y</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Vector</span>* (*<span class="text-blue-300">add</span>)(<span class="text-blue-300">Vector</span>*, <span class="text-blue-300">Vector</span>*); <span class="text-slate-500">// 模拟__add__</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span> (*<span class="text-blue-300">to_string</span>)(<span class="text-blue-300">Vector</span>*, <span class="text-blue-400">char</span>*); <span class="text-slate-500">// 模拟__str__</span><br>
                                } <span class="text-blue-300">Vector</span>;<br>
                                <br>
                                <span class="text-blue-400">// 构造函数（模拟__init__）</span><br>
                                <span class="text-blue-300">Vector</span>* <span class="text-blue-300">vector_create</span>(<span class="text-blue-400">double</span> <span class="text-blue-300">x</span>, <span class="text-blue-400">double</span> <span class="text-blue-300">y</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Vector</span> *<span class="text-blue-300">v</span> = <span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Vector</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">v</span>-><span class="text-blue-300">x</span> = <span class="text-blue-300">x</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">v</span>-><span class="text-blue-300">y</span> = <span class="text-blue-300">y</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">v</span>-><span class="text-blue-300">add</span> = <span class="text-blue-300">vector_add</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">v</span>-><span class="text-blue-300">to_string</span> = <span class="text-blue-300">vector_to_string</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">v</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 模拟__add__方法</span><br>
                                <span class="text-blue-300">Vector</span>* <span class="text-blue-300">vector_add</span>(<span class="text-blue-300">Vector</span> *<span class="text-blue-300">self</span>, <span class="text-blue-300">Vector</span> *<span class="text-blue-300">other</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">vector_create</span>(<span class="text-blue-300">self</span>-><span class="text-blue-300">x</span> + <span class="text-blue-300">other</span>-><span class="text-blue-300">x</span>, <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">self</span>-><span class="text-blue-300">y</span> + <span class="text-blue-300">other</span>-><span class="text-blue-300">y</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 模拟__str__方法</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">vector_to_string</span>(<span class="text-blue-300">Vector</span> *<span class="text-blue-300">self</span>, <span class="text-blue-400">char</span> *<span class="text-blue-300">buffer</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sprintf</span>(<span class="text-blue-300">buffer</span>, <span class="text-green-300">"Vector(%.1f, %.1f)"</span>, <span class="text-blue-300">self</span>-><span class="text-blue-300">x</span>, <span class="text-blue-300">self</span>-><span class="text-blue-300">y</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 析构函数（模拟__del__）</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">vector_destroy</span>(<span class="text-blue-300">Vector</span> *<span class="text-blue-300">v</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">v</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用示例</span><br>
                                <span class="text-blue-300">Vector</span> *<span class="text-blue-300">v1</span> = <span class="text-blue-300">vector_create</span>(<span class="text-yellow-300">1.0</span>, <span class="text-yellow-300">2.0</span>);<br>
                                <span class="text-blue-300">Vector</span> *<span class="text-blue-300">v2</span> = <span class="text-blue-300">vector_create</span>(<span class="text-yellow-300">3.0</span>, <span class="text-yellow-300">4.0</span>);<br>
                                <span class="text-blue-300">Vector</span> *<span class="text-blue-300">v3</span> = <span class="text-blue-300">v1</span>-><span class="text-blue-300">add</span>(<span class="text-blue-300">v1</span>, <span class="text-blue-300">v2</span>);<br>
                                <br>
                                <span class="text-blue-400">char</span> <span class="text-blue-300">str</span>[<span class="text-yellow-300">50</span>];<br>
                                <span class="text-blue-300">v3</span>-><span class="text-blue-300">to_string</span>(<span class="text-blue-300">v3</span>, <span class="text-blue-300">str</span>);<br>
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"%s
"</span>, <span class="text-blue-300">str</span>); <span class="text-slate-500">// 输出：Vector(4.0, 6.0)</span>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 19. 模块和包 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">19. 模块和包</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 头文件实现模块化</h4>
                        <p class="text-slate-300 mb-4">特点：使用头文件(.h)和源文件(.c)分离实现模块化，使用#include包含头文件，使用static控制函数可见性，使用extern声明外部符号。C99支持复合字面量。注意事项：头文件包含保护，避免循环包含，注意符号可见性。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// math_utils.h - 头文件定义</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">// 头文件包含保护</span><br>
                                <span class="text-purple-400">#ifndef</span> <span class="text-blue-300">MATH_UTILS_H</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">MATH_UTILS_H</span><br>
                                <br>
                                <span class="text-blue-400">// 函数声明</span><br>
                                <span class="text-purple-400">double</span> <span class="text-blue-300">add</span>(<span class="text-purple-400">double</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">double</span> <span class="text-blue-300">b</span>);<br>
                                <span class="text-purple-400">double</span> <span class="text-blue-300">multiply</span>(<span class="text-purple-400">double</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">double</span> <span class="text-blue-300">b</span>);<br>
                                <br>
                                <span class="text-blue-400">// 外部变量声明</span><br>
                                <span class="text-purple-400">extern</span> <span class="text-blue-400">int</span> <span class="text-blue-300">operation_count</span>;<br>
                                <br>
                                <span class="text-purple-400">#endif</span> <span class="text-slate-500">// MATH_UTILS_H</span>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 20. 异常处理 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">20. 异常处理</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 错误代码处理</h4>
                        <p class="text-slate-300 mb-4">特点：C语言无内置异常处理，使用错误代码返回，使用goto进行错误清理，使用errno全局变量，使用assert进行调试。注意事项：检查所有函数返回值，优先使用错误代码而非goto，确保资源释放。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 错误代码处理方式</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;errno.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 错误代码定义</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">ERROR_NONE</span> <span class="text-yellow-300">0</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">ERROR_DIVISION_BY_ZERO</span> <span class="text-yellow-300">1</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">ERROR_MEMORY</span> <span class="text-yellow-300">2</span><br>
                                <br>
                                <span class="text-purple-400">double</span> <span class="text-blue-300">safe_divide</span>(<span class="text-purple-400">double</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">double</span> <span class="text-blue-300">b</span>, <span class="text-blue-400">int</span> *<span class="text-blue-300">error_code</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">b</span> == <span class="text-yellow-300">0.0</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">*error_code</span> = <span class="text-blue-300">ERROR_DIVISION_BY_ZERO</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0.0</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">*error_code</span> = <span class="text-blue-300">ERROR_NONE</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span> / <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">error</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">double</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">safe_divide</span>(<span class="text-yellow-300">10.0</span>, <span class="text-yellow-300">0.0</span>, &<span class="text-blue-300">error</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">error</span> == <span class="text-blue-300">ERROR_DIVISION_BY_ZERO</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"除零错误
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>} <span class="text-purple-400">else</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"结果: %.1f
"</span>, <span class="text-blue-300">result</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 21. 文件操作 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">21. 文件操作</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 文件指针操作</h4>
                        <p class="text-slate-300 mb-4">特点：使用fopen()打开文件，使用fclose()关闭文件，使用fprintf()和fscanf()读写，使用fread()和fwrite()处理二进制文件。C99支持可变参数宏。注意事项：检查文件是否成功打开，务必关闭文件，注意缓冲区刷新。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 文本文件操作</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 写入文件</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">FILE</span> *<span class="text-blue-300">file</span> = <span class="text-blue-300">fopen</span>(<span class="text-green-300">"test.txt"</span>, <span class="text-green-300">"w"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">file</span> == <span class="text-purple-400">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"无法打开文件
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">1</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fprintf</span>(<span class="text-blue-300">file</span>, <span class="text-green-300">"Hello, World!
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fprintf</span>(<span class="text-blue-300">file</span>, <span class="text-green-300">"你好，世界！
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fclose</span>(<span class="text-blue-300">file</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 读取文件</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">file</span> = <span class="text-blue-300">fopen</span>(<span class="text-green-300">"test.txt"</span>, <span class="text-green-300">"r"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">file</span> == <span class="text-purple-400">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"无法打开文件
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">1</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">buffer</span>[<span class="text-yellow-300">256</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">while</span> (<span class="text-blue-300">fgets</span>(<span class="text-blue-300">buffer</span>, <span class="text-yellow-300">256</span>, <span class="text-blue-300">file</span>) != <span class="text-purple-400">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"%s"</span>, <span class="text-blue-300">buffer</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fclose</span>(<span class="text-blue-300">file</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 22. 生成器 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">22. 生成器</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 函数指针和状态机模拟生成器</h4>
                        <p class="text-slate-300 mb-4">特点：使用静态变量保持状态，使用函数指针模拟迭代器，使用状态机模式，支持回调机制。C99支持复合字面量，GNU C支持语句表达式。注意事项：静态变量在函数调用间保持值，注意线程安全问题，使用回调函数处理生成的值。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 使用静态变量的生成器模拟</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdbool.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 生成器状态结构</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">current</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">max</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">bool</span> <span class="text-blue-300">finished</span>;<br>
                                } <span class="text-blue-300">Generator</span>;<br>
                                <br>
                                <span class="text-blue-400">// 创建生成器</span><br>
                                <span class="text-blue-300">Generator</span>* <span class="text-blue-300">create_generator</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">max</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Generator</span>* <span class="text-blue-300">gen</span> = (<span class="text-blue-300">Generator</span>*)<span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Generator</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">gen</span>-><span class="text-blue-300">current</span> = <span class="text-yellow-300">0</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">gen</span>-><span class="text-blue-300">max</span> = <span class="text-blue-300">max</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">gen</span>-><span class="text-blue-300">finished</span> = <span class="text-purple-400">false</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">gen</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 获取下一个值</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">generator_next</span>(<span class="text-blue-300">Generator</span>* <span class="text-blue-300">gen</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">gen</span>-><span class="text-blue-300">current</span> >= <span class="text-blue-300">gen</span>-><span class="text-blue-300">max</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">gen</span>-><span class="text-blue-300">finished</span> = <span class="text-purple-400">true</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">-1</span>; <span class="text-slate-500">// 表示结束</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">gen</span>-><span class="text-blue-300">current</span>++;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用生成器</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Generator</span>* <span class="text-blue-300">counter</span> = <span class="text-blue-300">create_generator</span>(<span class="text-yellow-300">5</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">value</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">while</span> ((<span class="text-blue-300">value</span> = <span class="text-blue-300">generator_next</span>(<span class="text-blue-300">counter</span>)) != <span class="text-yellow-300">-1</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">value</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">counter</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                        
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// 使用宏定义的生成器风格代码</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 斐波那契生成器宏</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">FIBONACCI_GENERATOR</span>(<span class="text-blue-300">max</span>) \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">a</span> = <span class="text-yellow-300">0</span>, <span class="text-blue-300">b</span> = <span class="text-yellow-300">1</span>; \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-blue-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-300">0</span>; <span class="text-blue-300">i</span> < <span class="text-blue-300">max</span>; <span class="text-blue-300">i</span>++) { \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">next</span> = <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>; \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">a</span> = <span class="text-blue-300">b</span>; \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">b</span> = <span class="text-blue-300">next</span>; \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">yield</span> <span class="text-blue-300">a</span>; \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-blue-400">// 模拟yield关键字</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">yield</span>(<span class="text-blue-300">value</span>) <span class="text-blue-300">printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">value</span>)<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"斐波那契数列:
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">FIBONACCI_GENERATOR</span>(<span class="text-yellow-300">10</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 23. 迭代器 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">23. 迭代器</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 函数指针和结构体模拟迭代器</h4>
                        <p class="text-slate-300 mb-4">特点：使用结构体和函数指针模拟迭代器协议，支持has_next()和next()操作，支持自定义迭代器类型，支持迭代器适配。C99支持复合字面量。注意事项：需要手动管理内存，注意迭代器状态，注意边界条件处理。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 使用函数指针的迭代器</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdbool.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 迭代器接口定义</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> <span class="text-blue-300">Iterator</span> <span class="text-blue-300">Iterator</span>;<br>
                                <br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">bool</span> (<span class="text-blue-300">*has_next_func</span>)(<span class="text-blue-300">Iterator</span>* <span class="text-blue-300">self</span>);<br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">void</span>* (<span class="text-blue-300">*next_func</span>)(<span class="text-blue-300">Iterator</span>* <span class="text-blue-300">self</span>);<br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">void</span> (<span class="text-blue-300">*destroy_func</span>)(<span class="text-blue-300">Iterator</span>* <span class="text-blue-300">self</span>);<br>
                                <br>
                                <span class="text-blue-400">// 迭代器结构</span><br>
                                <span class="text-purple-400">struct</span> <span class="text-blue-300">Iterator</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">has_next_func</span> <span class="text-blue-300">has_next</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">next_func</span> <span class="text-blue-300">next</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">destroy_func</span> <span class="text-blue-300">destroy</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">void</span>* <span class="text-blue-300">data</span>; <span class="text-slate-500">// 迭代器内部数据</span><br>
                                };<br>
                                <br>
                                <span class="text-blue-400">// 计数器迭代器实现</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">current</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">max</span>;<br>
                                } <span class="text-blue-300">CounterIterator</span>;<br>
                                <br>
                                <span class="text-purple-400">bool</span> <span class="text-blue-300">counter_has_next</span>(<span class="text-blue-300">Iterator</span>* <span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">CounterIterator</span>* <span class="text-blue-300">counter</span> = (<span class="text-blue-300">CounterIterator</span>*)<span class="text-blue-300">self</span>-><span class="text-blue-300">data</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">counter</span>-><span class="text-blue-300">current</span> < <span class="text-blue-300">counter</span>-><span class="text-blue-300">max</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">void</span>* <span class="text-blue-300">counter_next</span>(<span class="text-blue-300">Iterator</span>* <span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">CounterIterator</span>* <span class="text-blue-300">counter</span> = (<span class="text-blue-300">CounterIterator</span>*)<span class="text-blue-300">self</span>-><span class="text-blue-300">data</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> (<span class="text-purple-400">int</span>*)&<span class="text-blue-300">counter</span>-><span class="text-blue-300">current</span>++)<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 注意：这里返回的是当前值的副本</span><br>
                                }<br>
                                <br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">counter_destroy</span>(<span class="text-blue-300">Iterator</span>* <span class="text-blue-300">self</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">self</span>-><span class="text-blue-300">data</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">self</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 创建计数器迭代器</span><br>
                                <span class="text-blue-300">Iterator</span>* <span class="text-blue-300">create_counter_iterator</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">max</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">CounterIterator</span>* <span class="text-blue-300">counter_data</span> = (<span class="text-blue-300">CounterIterator</span>*)<span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">CounterIterator</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">counter_data</span>-><span class="text-blue-300">current</span> = <span class="text-yellow-300">0</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">counter_data</span>-><span class="text-blue-300">max</span> = <span class="text-blue-300">max</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Iterator</span>* <span class="text-blue-300">iterator</span> = (<span class="text-blue-300">Iterator</span>*)<span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Iterator</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">iterator</span>-><span class="text-blue-300">has_next</span> = <span class="text-blue-300">counter_has_next</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">iterator</span>-><span class="text-blue-300">next</span> = <span class="text-blue-300">counter_next</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">iterator</span>-><span class="text-blue-300">destroy</span> = <span class="text-blue-300">counter_destroy</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">iterator</span>-><span class="text-blue-300">data</span> = <span class="text-blue-300">counter_data</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">iterator</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 使用迭代器</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Iterator</span>* <span class="text-blue-300">counter</span> = <span class="text-blue-300">create_counter_iterator</span>(<span class="text-yellow-300">5</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">while</span> (<span class="text-blue-300">counter</span>-><span class="text-blue-300">has_next</span>(<span class="text-blue-300">counter</span>)) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span> <span class="text-blue-300">value</span> = *((<span class="text-blue-400">int</span>*)<span class="text-blue-300">counter</span>-><span class="text-blue-300">next</span>(<span class="text-blue-300">counter</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"%d
"</span>, <span class="text-blue-300">value</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">counter</span>-><span class="text-blue-300">destroy</span>(<span class="text-blue-300">counter</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 24. 装饰器 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">24. 装饰器</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 函数指针和宏模拟装饰器</h4>
                        <p class="text-slate-300 mb-4">特点：使用函数指针包装原函数，使用宏简化装饰器应用，支持预处理和后处理，支持多层装饰。C99支持内联函数，GNU C支持typeof关键字。注意事项：注意函数指针的生命周期，宏参数需要正确加括号，注意类型安全。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 使用函数指针的装饰器模式</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 装饰器结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> (<span class="text-blue-300">*func</span>)(<span class="text-purple-400">int</span>, <span class="text-purple-400">int</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">name</span>[<span class="text-yellow-50">50</span>];<br>
                                } <span class="text-blue-300">DecoratedFunc</span>;<br>
                                <br>
                                <span class="text-blue-400">// 原函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">add</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 装饰器函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">logged_add</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"调用函数: add(%d, %d)
"</span>, <span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">add</span>(<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"函数返回: %d
"</span>, <span class="text-blue-300">result</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">result</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 创建装饰器</span><br>
                                <span class="text-blue-300">DecoratedFunc</span>* <span class="text-blue-300">create_decorator</span>(<span class="text-purple-400">int</span> (<span class="text-blue-300">*func</span>)(<span class="text-purple-400">int</span>, <span class="text-purple-400">int</span>), <span class="text-blue-400">const</span> <span class="text-blue-400">char</span>* <span class="text-blue-300">name</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">DecoratedFunc</span>* <span class="text-blue-300">decorated</span> = (<span class="text-blue-300">DecoratedFunc</span>*)<span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">DecoratedFunc</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">decorated</span>-><span class="text-blue-300">func</span> = <span class="text-blue-300">func</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">decorated</span>-><span class="text-blue-300">name</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">decorated</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 调用装饰函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">call_decorated</span>(<span class="text-blue-300">DecoratedFunc</span>* <span class="text-blue-300">decorated</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"使用装饰器: %s
"</span>, <span class="text-blue-300">decorated</span>-><span class="text-blue-300">name</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">decorated</span>-><span class="text-blue-300">func</span>(<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>);<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">DecoratedFunc</span>* <span class="text-blue-300">logger_add</span> = <span class="text-blue-300">create_decorator</span>(<span class="text-blue-300">logged_add</span>, <span class="text-green-300">"Logger装饰器"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">call_decorated</span>(<span class="text-blue-300">logger_add</span>, <span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">logger_add</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                        
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// 使用宏的装饰器风格代码</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 宏定义的装饰器</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">DECORATOR_LOG</span>(<span class="text-blue-300">func_name</span>) \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">func_name</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) { \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"调用" #func_name "(%d, %d)
"</span>, <span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>); \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">_##func_name</span>(<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>); \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"返回: %d
"</span>, <span class="text-blue-300">result</span>); \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">result</span>; \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-blue-400">// 原始函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">_add</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 应用装饰器</span><br>
                                <span class="text-blue-300">DECORATOR_LOG</span>(<span class="text-blue-300">add</span>)<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">add</span>(<span class="text-yellow-300">2</span>, <span class="text-yellow-300">3</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 25. 上下文管理器 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">25. 上下文管理器</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 手动资源管理模拟上下文管理器</h4>
                        <p class="text-slate-300 mb-4">特点：使用结构体和函数指针模拟上下文管理器，使用初始化和清理函数管理资源，支持RAII模式，使用宏简化资源管理。注意事项：C语言没有内置的上下文管理器，需要手动管理资源生命周期，注意错误处理和资源清理。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 使用结构体和函数模拟上下文管理器</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 上下文管理器结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">FILE</span>* <span class="text-blue-300">file</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">filename</span>[<span class="text-yellow-50">100</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span> <span class="text-blue-300">mode</span>[<span class="text-yellow-50">10</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">(*cleanup)</span>(<span class="text-purple-400">struct</span> <span class="text-blue-300">FileContext</span>* <span class="text-blue-300">ctx</span>);<br>
                                } <span class="text-blue-300">FileContext</span>;<br>
                                <br>
                                <span class="text-blue-400">// 初始化上下文管理器</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">file_context_init</span>(<span class="text-blue-300">FileContext</span>* <span class="text-blue-300">ctx</span>, <span class="text-blue-400">const</span> <span class="text-blue-400">char</span>* <span class="text-blue-300">filename</span>, <span class="text-blue-400">const</span> <span class="text-blue-400">char</span>* <span class="text-blue-300">mode</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">ctx</span>-><span class="text-blue-300">filename</span>, <span class="text-blue-300">filename</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">strcpy</span>(<span class="text-blue-300">ctx</span>-><span class="text-blue-300">mode</span>, <span class="text-blue-300">mode</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">ctx</span>-><span class="text-blue-300">file</span> = <span class="text-blue-300">fopen</span>(<span class="text-blue-300">filename</span>, <span class="text-blue-300">mode</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">ctx</span>-><span class="text-blue-300">file</span> == <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> -<span class="text-yellow-300">1</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">ctx</span>-><span class="text-blue-300">cleanup</span> = <span class="text-blue-300">file_context_cleanup</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 清理函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">file_context_cleanup</span>(<span class="text-blue-300">FileContext</span>* <span class="text-blue-300">ctx</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">ctx</span>-><span class="text-blue-300">file</span> != <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fclose</span>(<span class="text-blue-300">ctx</span>-><span class="text-blue-300">file</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">ctx</span>-><span class="text-blue-300">file</span> = <span class="text-purple-300">NULL</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// RAII风格的宏</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">FILE_CONTEXT_BEGIN</span>(<span class="text-blue-300">ctx</span>, <span class="text-blue-300">filename</span>, <span class="text-blue-300">mode</span>) \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">FileContext</span> <span class="text-blue-300">ctx</span>; \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">file_context_init</span>(&amp;<span class="text-blue-300">ctx</span>, <span class="text-blue-300">filename</span>, <span class="text-blue-300">mode</span>) == <span class="text-yellow-300">0</span> &amp;&amp;<br>
                                <br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">FILE_CONTEXT_END</span>(<span class="text-blue-300">ctx</span>) \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">ctx</span>.<span class="text-blue-300">cleanup</span>(&amp;<span class="text-blue-300">ctx</span>)<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 使用RAII宏</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">FILE_CONTEXT_BEGIN</span>(<span class="text-blue-300">ctx</span>, <span class="text-green-300">"test.txt"</span>, <span class="text-green-300">"w"</span>)) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fprintf</span>(<span class="text-blue-300">ctx</span>.<span class="text-blue-300">file</span>, <span class="text-green-300">"Hello, Context Manager!
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">FILE_CONTEXT_END</span>(<span class="text-blue-300">ctx</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 手动使用上下文管理器</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">FileContext</span> <span class="text-blue-300">ctx2</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">file_context_init</span>(&amp;<span class="text-blue-300">ctx2</span>, <span class="text-green-300">"test2.txt"</span>, <span class="text-green-300">"w"</span>) == <span class="text-yellow-300">0</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fprintf</span>(<span class="text-blue-300">ctx2</span>.<span class="text-blue-300">file</span>, <span class="text-green-300">"Manual context management
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">ctx2</span>.<span class="text-blue-300">cleanup</span>(&amp;<span class="text-blue-300">ctx2</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                        
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// 使用goto进行错误处理的上下文管理器</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">process_with_cleanup</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">FILE</span>* <span class="text-blue-300">file1</span> = <span class="text-purple-300">NULL</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">FILE</span>* <span class="text-blue-300">file2</span> = <span class="text-purple-300">NULL</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">int</span>* <span class="text-blue-300">data</span> = <span class="text-purple-300">NULL</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 初始化资源</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">file1</span> = <span class="text-blue-300">fopen</span>(<span class="text-green-300">"input.txt"</span>, <span class="text-green-300">"r"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">file1</span> == <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">goto</span> <span class="text-blue-300">cleanup</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">file2</span> = <span class="text-blue-300">fopen</span>(<span class="text-green-300">"output.txt"</span>, <span class="text-green-300">"w"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">file2</span> == <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">goto</span> <span class="text-blue-300">cleanup</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">data</span> = (<span class="text-blue-400">int</span>*)<span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-400">int</span>) * <span class="text-yellow-300">100</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">data</span> == <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">goto</span> <span class="text-blue-300">cleanup</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 处理逻辑</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"处理文件...
"</span>);<br>
                                <br>
                                <span class="text-blue-300">cleanup</span>:<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 清理资源（按照相反的顺序）</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">data</span> != <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">free</span>(<span class="text-blue-300">data</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">file2</span> != <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fclose</span>(<span class="text-blue-300">file2</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">file1</span> != <span class="text-purple-300">NULL</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fclose</span>(<span class="text-blue-300">file1</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 26. 类型注解 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">26. 类型注解</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 静态类型系统和类型注解</h4>
                        <p class="text-slate-300 mb-4">特点：变量声明本身就是类型注解，函数声明包含参数和返回类型，C99支持可变参数宏，C11支持_Generic选择器，支持typedef类型别名，支持结构体和联合体类型。注意事项：C语言是静态类型，类型检查在编译时进行，类型转换需要显式进行，C11的_Generic可用于类型安全的选择。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// C语言类型注解基础</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 类型别名定义</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">int</span> <span class="text-blue-300">Integer</span>;<br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">char</span>* <span class="text-blue-300">String</span>;<br>
                                <br>
                                <span class="text-blue-400">// 结构体类型定义</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">id</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">String</span> <span class="text-blue-300">name</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">float</span> <span class="text-blue-300">score</span>;<br>
                                } <span class="text-blue-300">Student</span>;<br>
                                <br>
                                <span class="text-blue-400">// 函数类型注解（参数和返回值类型）</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">calculate_sum</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-300">Student</span>* <span class="text-blue-300">create_student</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">id</span>, <span class="text-blue-300">String</span> <span class="text-blue-300">name</span>, <span class="text-purple-400">float</span> <span class="text-blue-300">score</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Student</span>* <span class="text-blue-300">student</span> = (<span class="text-blue-300">Student</span>*)<span class="text-blue-300">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">Student</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">student</span>-><span class="text-blue-300">id</span> = <span class="text-blue-300">id</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">student</span>-><span class="text-blue-300">name</span> = <span class="text-blue-300">name</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">student</span>-><span class="text-blue-300">score</span> = <span class="text-blue-300">score</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">student</span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">print_student</span>(<span class="text-blue-300">Student</span>* <span class="text-blue-300">student</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"Student: %d, %s, %.2f
"</span>, <span class="text-blue-300">student</span>-><span class="text-blue-300">id</span>, <span class="text-blue-300">student</span>-><span class="text-blue-300">name</span>, <span class="text-blue-300">student</span>-><span class="text-blue-300">score</span>);<br>
                                }
                            </div>
                        </div>
                        
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// C11 _Generic类型选择器</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 使用_Generic进行类型选择（C11特性）</span><br>
                                <span class="text-blue-400">#define</span> <span class="text-blue-300">PRINT_TYPE</span>(<span class="text-blue-300">x</span>) \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>_Generic((<span class="text-blue-300">x</span>, \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span>: <span class="text-green-300">"整数"</span>, \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">float</span>: <span class="text-green-300">"浮点数"</span>, \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span>*: <span class="text-green-300">"字符串"</span>, \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">default</span>: <span class="text-green-300">"未知类型"</span>))<br>
                                <br>
                                <span class="text-blue-400">#define</span> <span class="text-blue-300">PRINT_VALUE_AND_TYPE</span>(<span class="text-blue-300">x</span>) \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"值: "</span>); \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>_Generic((<span class="text-blue-300">x</span>, \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span>: <span class="text-blue-300">printf</span>(<span class="text-green-300">"%d"</span>, <span class="text-blue-300">x</span>), \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">float</span>: <span class="text-blue-300">printf</span>(<span class="text-green-300">"%.2f"</span>, <span class="text-blue-300">x</span>), \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span>*: <span class="text-blue-300">printf</span>(<span class="text-green-300">"%s"</span>, <span class="text-blue-300">x</span>), \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">default</span>: <span class="text-blue-300">printf</span>(<span class="text-green-300">"未知类型"</span>)); \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">", 类型: %s
"</span>, <span class="text-blue-300">PRINT_TYPE</span>(<span class="text-blue-300">x</span>));<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">num</span> = <span class="text-yellow-300">42</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">float</span> <span class="text-blue-300">pi</span> = <span class="text-yellow-300">3.14159</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">char</span>* <span class="text-blue-300">str</span> = <span class="text-green-300">"Hello"</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">PRINT_VALUE_AND_TYPE</span>(<span class="text-blue-300">num</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">PRINT_VALUE_AND_TYPE</span>(<span class="text-blue-300">pi</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">PRINT_VALUE_AND_TYPE</span>(<span class="text-blue-300">str</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 27. 正则表达式 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">27. 正则表达式</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8">
                <div class="grid grid-cols-1 lg:grid-cols-1 gap-8"></div>
            </div>
        </div>
        </section>

        <!-- 28. 日期和时间 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">28. 日期和时间</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8">
                <div class="grid grid-cols-1 lg:grid-cols-1 gap-8"></div>
            </div>
        </div>
        </section>

        <!-- 29. 多线程 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">29. 多线程</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 多线程编程</h4>
                        <p class="text-slate-300 mb-4">特点：使用POSIX线程库（pthread）支持多线程，支持创建线程，支持线程同步，支持互斥锁，支持条件变量，支持线程属性设置，C11支持标准线程库。注意事项：C语言本身没有内置多线程，需要使用pthread库，注意线程安全，考虑使用互斥锁保护共享数据，注意死锁问题。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// POSIX线程编程</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;pthread.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;unistd.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 全局变量（共享数据）</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">shared_counter</span> = <span class="text-yellow-0"></span>;<br>
                                <span class="text-purple-400">pthread_mutex_t</span> <span class="text-blue-300">counter_mutex</span>;  <span class="text-slate-500">// 互斥锁</span><br>
                                <br>
                                <span class="text-blue-400">// 线程函数</span><br>
                                <span class="text-purple-400">void</span>* <span class="text-blue-300">print_numbers</span>(<span class="text-purple-400">void</span>* <span class="text-blue-300">arg</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">thread_id</span> = *(<span class="text-purple-400">int</span>*)<span class="text-blue-300">arg</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-purple-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-0"></span>; <span class="text-blue-300">i</span> < <span class="text-yellow-5"></span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_lock</span>(&<span class="text-blue-300">counter_mutex</span>);  <span class="text-slate-500">// 加锁</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">current</span> = <span class="text-blue-300">shared_counter</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">shared_counter</span>++;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"线程 %d: 计数器 = %d
"</span>, <span class="text-blue-300">thread_id</span>, <span class="text-blue-300">current</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_unlock</span>(&<span class="text-blue-300">counter_mutex</span>);  <span class="text-slate-500">// 解锁</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">usleep</span>(<span class="text-yellow-100000"></span>);  <span class="text-slate-500">// 暂停0.1秒</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-purple-400">NULL</span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_t</span> <span class="text-blue-300">thread1</span>, <span class="text-blue-300">thread2</span>;<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">id1</span> = <span class="text-yellow-1"></span>, <span class="text-blue-300">id2</span> = <span class="text-yellow-2"></span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 初始化互斥锁</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_init</span>(&<span class="text-blue-300">counter_mutex</span>, <span class="text-purple-400">NULL</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 创建线程</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_create</span>(&<span class="text-blue-300">thread1</span>, <span class="text-purple-400">NULL</span>, <span class="text-blue-300">print_numbers</span>, &<span class="text-blue-300">id1</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_create</span>(&<span class="text-blue-300">thread2</span>, <span class="text-purple-400">NULL</span>, <span class="text-blue-300">print_numbers</span>, &<span class="text-blue-300">id2</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 等待线程结束</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_join</span>(<span class="text-blue-300">thread1</span>, <span class="text-purple-400">NULL</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_join</span>(<span class="text-blue-300">thread2</span>, <span class="text-purple-400">NULL</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"所有线程执行完毕，最终计数器值: %d
"</span>, <span class="text-blue-300">shared_counter</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 销毁互斥锁</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_destroy</span>(&<span class="text-blue-300">counter_mutex</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                        
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// C11标准线程库（C11特性）</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;threads.h&gt;</span>  <span class="text-slate-500">// C11标准线程库</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 全局变量和互斥量</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">shared_data</span> = <span class="text-yellow-0"></span>;<br>
                                <span class="text-purple-400">mtx_t</span> <span class="text-blue-300">data_mutex</span>;<br>
                                <br>
                                <span class="text-blue-400">// C11线程函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">worker_thread</span>(<span class="text-purple-400">void</span>* <span class="text-blue-300">arg</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">thread_id</span> = *(<span class="text-purple-400">int</span>*)<span class="text-blue-300">arg</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-purple-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-0"></span>; <span class="text-blue-300">i</span> < <span class="text-yellow-3"></span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">mtx_lock</span>(&<span class="text-blue-300">data_mutex</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">shared_data</span>++;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"线程 %d: 共享数据 = %d
"</span>, <span class="text-blue-300">thread_id</span>, <span class="text-blue-300">shared_data</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">mtx_unlock</span>(&<span class="text-blue-300">data_mutex</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">thrd_sleep</span>(&(<span class="text-purple-400">struct</span> <span class="text-blue-300">timespec</span>){<span class="text-yellow-0"></span>, <span class="text-yellow-200000000"></span>}, <span class="text-purple-400">NULL</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">thrd_t</span> <span class="text-blue-300">t1</span>, <span class="text-blue-300">t2</span>;<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">id1</span> = <span class="text-yellow-1"></span>, <span class="text-blue-300">id2</span> = <span class="text-yellow-2"></span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 初始化互斥量</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">mtx_init</span>(&<span class="text-blue-300">data_mutex</span>, <span class="text-blue-300">mtx_plain</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 创建线程</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">thrd_create</span>(&<span class="text-blue-300">t1</span>, <span class="text-blue-300">worker_thread</span>, &<span class="text-blue-300">id1</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">thrd_create</span>(&<span class="text-blue-300">t2</span>, <span class="text-blue-300">worker_thread</span>, &<span class="text-blue-300">id2</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 等待线程结束</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">thrd_join</span>(<span class="text-blue-300">t1</span>, <span class="text-purple-400">NULL</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">thrd_join</span>(<span class="text-blue-300">t2</span>, <span class="text-purple-400">NULL</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"C11线程执行完毕，最终数据值: %d
"</span>, <span class="text-blue-300">shared_data</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 销毁互斥量</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">mtx_destroy</span>(&<span class="text-blue-300">data_mutex</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 30. 多进程 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">30. 多进程</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 多进程编程</h4>
                        <p class="text-slate-300 mb-4">特点：使用fork()系统调用支持多进程，支持父子进程通信，支持进程间同步，支持管道通信，支持共享内存，支持信号处理。注意事项：进程创建开销较大，适合CPU密集型任务，进程间通信需要使用特定机制，注意僵尸进程和孤儿进程问题。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 基本进程创建</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;unistd.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;sys/types.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;sys/wait.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">child_process</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"子进程PID: %d, 父进程PID: %d
"</span>, <span class="text-blue-300">getpid</span>(), <span class="text-blue-300">getppid</span>());<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-purple-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-0"></span>; <span class="text-blue-300">i</span> < <span class="text-yellow-3"></span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"子进程计算: %d * %d = %d
"</span>, <span class="text-blue-300">i</span>, <span class="text-blue-300">i</span>, <span class="text-blue-300">i</span> * <span class="text-blue-300">i</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sleep</span>(<span class="text-yellow-1"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">exit</span>(<span class="text-yellow-42"></span>);  <span class="text-slate-500">// 子进程退出码</span><br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pid_t</span> <span class="text-blue-300">pid</span> = <span class="text-blue-300">fork</span>();  <span class="text-slate-500">// 创建子进程</span><br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">pid</span> < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"fork失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">else</span> <span class="text-purple-400">if</span> (<span class="text-blue-300">pid</span> == <span class="text-yellow-0"></span>) {  <span class="text-slate-500">// 子进程</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">child_process</span>();<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">else</span> {  <span class="text-slate-500">// 父进程</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"父进程PID: %d, 创建了子进程PID: %d
"</span>, <span class="text-blue-300">getpid</span>(), <span class="text-blue-300">pid</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">status</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">waitpid</span>(<span class="text-blue-300">pid</span>, &<span class="text-blue-300">status</span>, <span class="text-yellow-0"></span>);  <span class="text-slate-500">// 等待子进程结束</span><br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">WIFEXITED</span>(<span class="text-blue-300">status</span>)) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"子进程正常退出，退出码: %d
"</span>, <span class="text-blue-300">WEXITSTATUS</span>(<span class="text-blue-300">status</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                        
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// 进程间通信（管道）</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;unistd.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">pipefd</span>[<span class="text-yellow-2"></span>];  <span class="text-slate-500">// 管道文件描述符</span><br>
                                <span class="text-purple-400">pid_t</span> <span class="text-blue-300">pid</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span> <span class="text-blue-300">write_msg</span>[] = <span class="text-green-300">"Hello from parent!"</span>;<br>
                                <span class="text-purple-400">char</span> <span class="text-blue-300">read_msg</span>[<span class="text-yellow-100"></span>];<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 创建管道</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">pipe</span>(<span class="text-blue-300">pipefd</span>) == <span class="text-yellow-1"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"管道创建失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pid</span> = <span class="text-blue-300">fork</span>();  <span class="text-slate-500">// 创建子进程</span><br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">pid</span> < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"fork失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">else</span> <span class="text-purple-400">if</span> (<span class="text-blue-300">pid</span> == <span class="text-yellow-0"></span>) {  <span class="text-slate-500">// 子进程 - 读取数据</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">pipefd</span>[<span class="text-yellow-1"></span>]);  <span class="text-slate-500">// 关闭写端</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">read</span>(<span class="text-blue-300">pipefd</span>[<span class="text-yellow-0"></span>], <span class="text-blue-300">read_msg</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">read_msg</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"子进程收到消息: %s
"</span>, <span class="text-blue-300">read_msg</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">pipefd</span>[<span class="text-yellow-0"></span>]);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">exit</span>(<span class="text-yellow-0"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">else</span> {  <span class="text-slate-500">// 父进程 - 写入数据</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">pipefd</span>[<span class="text-yellow-0"></span>]);  <span class="text-slate-500">// 关闭读端</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">write</span>(<span class="text-blue-300">pipefd</span>[<span class="text-yellow-1"></span>], <span class="text-blue-300">write_msg</span>, <span class="text-blue-300">strlen</span>(<span class="text-blue-300">write_msg</span>) + <span class="text-yellow-1"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">pipefd</span>[<span class="text-yellow-1"></span>]);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">wait</span>(<span class="text-purple-400">NULL</span>);  <span class="text-slate-500">// 等待子进程</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 31. 网络编程 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">31. 网络编程</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 网络编程</h4>
                        <p class="text-slate-300 mb-4">特点：使用socket API支持网络编程，支持TCP和UDP协议，支持客户端和服务器编程，支持POSIX标准，支持非阻塞I/O。注意事项：需要处理错误码，需要注意字节序转换，需要注意socket地址结构，需要注意网络字节序。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// TCP客户端</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;unistd.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;sys/socket.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;netinet/in.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;arpa/inet.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">sockfd</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">struct</span> <span class="text-blue-300">sockaddr_in</span> <span class="text-blue-300">serv_addr</span>;<br>
                                <span class="text-purple-400">char</span> <span class="text-blue-300">buffer</span>[<span class="text-yellow-1024"></span>];<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sockfd</span> = <span class="text-blue-300">socket</span>(<span class="text-blue-300">AF_INET</span>, <span class="text-blue-300">SOCK_STREAM</span>, <span class="text-yellow-0"></span>);  <span class="text-slate-500">// 创建TCP socket</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">sockfd</span> < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"socket创建失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">memset</span>(&<span class="text-blue-300">serv_addr</span>, <span class="text-yellow-0"></span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">serv_addr</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">serv_addr</span>.<span class="text-blue-300">sin_family</span> = <span class="text-blue-300">AF_INET</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">serv_addr</span>.<span class="text-blue-300">sin_port</span> = <span class="text-blue-300">htons</span>(<span class="text-yellow-8080"></span>);  <span class="text-slate-500">// 端口8080</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">inet_pton</span>(<span class="text-blue-300">AF_INET</span>, <span class="text-green-300">"127.0.0.1"</span>, &<span class="text-blue-300">serv_addr</span>.<span class="text-blue-300">sin_addr</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">connect</span>(<span class="text-blue-300">sockfd</span>, (<span class="text-purple-400">struct</span> <span class="text-blue-300">sockaddr</span>*)&<span class="text-blue-300">serv_addr</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">serv_addr</span>)) < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"连接失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">sockfd</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">snprintf</span>(<span class="text-blue-300">buffer</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">buffer</span>), <span class="text-green-300">"Hello from C client!
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">write</span>(<span class="text-blue-300">sockfd</span>, <span class="text-blue-300">buffer</span>, <span class="text-blue-300">strlen</span>(<span class="text-blue-300">buffer</span>));<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">ssize_t</span> <span class="text-blue-300">n</span> = <span class="text-blue-300">read</span>(<span class="text-blue-300">sockfd</span>, <span class="text-blue-300">buffer</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">buffer</span>) - <span class="text-yellow-1"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">n</span> > <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">buffer</span>[<span class="text-blue-300">n</span>] = <span class="text-yellow-0"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"收到响应: %s"</span>, <span class="text-blue-300">buffer</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">sockfd</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                        
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// TCP服务器</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;unistd.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;sys/socket.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;netinet/in.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;arpa/inet.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">handle_client</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">client_sockfd</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span> <span class="text-blue-300">buffer</span>[<span class="text-yellow-1024"></span>];<br>
                                <span class="text-purple-400">ssize_t</span> <span class="text-blue-300">n</span> = <span class="text-blue-300">read</span>(<span class="text-blue-300">client_sockfd</span>, <span class="text-blue-300">buffer</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">buffer</span>) - <span class="text-yellow-1"></span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">n</span> > <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">buffer</span>[<span class="text-blue-300">n</span>] = <span class="text-yellow-0"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"收到客户端消息: %s"</span>, <span class="text-blue-300">buffer</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">write</span>(<span class="text-blue-300">client_sockfd</span>, <span class="text-green-300">"Hello from C server!
"</span>, <span class="text-yellow-23"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">client_sockfd</span>);<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">server_sockfd</span>, <span class="text-blue-300">client_sockfd</span>;<br>
                                <span class="text-purple-400">struct</span> <span class="text-blue-300">sockaddr_in</span> <span class="text-blue-300">serv_addr</span>, <span class="text-blue-300">client_addr</span>;<br>
                                <span class="text-purple-400">socklen_t</span> <span class="text-blue-300">client_len</span> = <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">client_addr</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">server_sockfd</span> = <span class="text-blue-300">socket</span>(<span class="text-blue-300">AF_INET</span>, <span class="text-blue-300">SOCK_STREAM</span>, <span class="text-yellow-0"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">server_sockfd</span> < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"socket创建失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">opt</span> = <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">setsockopt</span>(<span class="text-blue-300">server_sockfd</span>, <span class="text-blue-300">SOL_SOCKET</span>, <span class="text-blue-300">SO_REUSEADDR</span>, &<span class="text-blue-300">opt</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">opt</span>));<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">memset</span>(&<span class="text-blue-300">serv_addr</span>, <span class="text-yellow-0"></span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">serv_addr</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">serv_addr</span>.<span class="text-blue-300">sin_family</span> = <span class="text-blue-300">AF_INET</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">serv_addr</span>.<span class="text-blue-300">sin_addr</span>.<span class="text-blue-300">s_addr</span> = <span class="text-blue-300">INADDR_ANY</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">serv_addr</span>.<span class="text-blue-300">sin_port</span> = <span class="text-blue-300">htons</span>(<span class="text-yellow-8080"></span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">bind</span>(<span class="text-blue-300">server_sockfd</span>, (<span class="text-purple-400">struct</span> <span class="text-blue-300">sockaddr</span>*)&<span class="text-blue-300">serv_addr</span>, <span class="text-purple-400">sizeof</span>(<span class="text-blue-300">serv_addr</span>)) < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"bind失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">listen</span>(<span class="text-blue-300">server_sockfd</span>, <span class="text-yellow-5"></span>) < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"listen失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"服务器监听端口 %d...
"</span>, <span class="text-yellow-8080"></span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">while</span> (<span class="text-yellow-1"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">client_sockfd</span> = <span class="text-blue-300">accept</span>(<span class="text-blue-300">server_sockfd</span>, (<span class="text-purple-400">struct</span> <span class="text-blue-300">sockaddr</span>*)&<span class="text-blue-300">client_addr</span>, &<span class="text-blue-300">client_len</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">client_sockfd</span> < <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">perror</span>(<span class="text-green-300">"accept失败"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">continue</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">handle_client</span>(<span class="text-blue-300">client_sockfd</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">close</span>(<span class="text-blue-300">server_sockfd</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 32. 数据库操作 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">32. 数据库操作</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 数据库操作</h4>
                        <p class="text-slate-300 mb-4">特点：使用SQLite3库支持SQLite数据库，使用libpq支持PostgreSQL，使用MySQL客户端库支持MySQL，支持预处理语句，支持事务处理。注意事项：需要检查SQLite3函数返回值，需要注意内存管理，需要注意SQL注入防护。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// SQLite3数据库操作</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;sqlite3.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">sqlite3</span> <span class="text-blue-300">*db</span>;<br>
                                <span class="text-purple-400">char</span> <span class="text-blue-300">*err_msg</span> = <span class="text-purple-400">NULL</span>;<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">rc</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 打开/创建数据库</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">rc</span> = <span class="text-blue-300">sqlite3_open</span>(<span class="text-green-300">"test.db"</span>, &<span class="text-blue-300">db</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">rc</span> != <span class="text-blue-300">SQLITE_OK</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fprintf</span>(<span class="text-blue-300">stderr</span>, <span class="text-green-300">"无法打开数据库: %s
"</span>, <span class="text-blue-300">sqlite3_errmsg</span>(<span class="text-blue-300">db</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 创建表</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span> <span class="text-blue-300">create_table</span>[] = <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-green-300">"CREATE TABLE IF NOT EXISTS users ("</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-green-300">"id INTEGER PRIMARY KEY AUTOINCREMENT,"</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-green-300">"name TEXT NOT NULL,"</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-green-300">"age INTEGER"</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-green-300">");"</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">rc</span> = <span class="text-blue-300">sqlite3_exec</span>(<span class="text-blue-300">db</span>, <span class="text-blue-300">create_table</span>, <span class="text-purple-400">NULL</span>, <span class="text-purple-400">NULL</span>, &<span class="text-blue-300">err_msg</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">rc</span> != <span class="text-blue-300">SQLITE_OK</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">fprintf</span>(<span class="text-blue-300">stderr</span>, <span class="text-green-300">"SQL错误: %s
"</span>, <span class="text-blue-300">err_msg</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_free</span>(<span class="text-blue-300">err_msg</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 插入数据（预处理语句）</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">sqlite3_stmt</span> <span class="text-blue-300">*stmt</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span> <span class="text-blue-300">insert_sql</span>[] = <span class="text-green-300">"INSERT INTO users (name, age) VALUES (?, ?);"</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_prepare_v2</span>(<span class="text-blue-300">db</span>, <span class="text-blue-300">insert_sql</span>, <span class="text-yellow-1"></span>, &<span class="text-blue-300">stmt</span>, <span class="text-purple-400">NULL</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_bind_text</span>(<span class="text-blue-300">stmt</span>, <span class="text-yellow-1"></span>, <span class="text-green-300">"张三"</span>, <span class="text-yellow-2"></span>, <span class="text-blue-300">SQLITE_TRANSIENT</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_bind_int</span>(<span class="text-blue-300">stmt</span>, <span class="text-yellow-2"></span>, <span class="text-yellow-18"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_step</span>(<span class="text-blue-300">stmt</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_finalize</span>(<span class="text-blue-300">stmt</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 查询数据</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span> <span class="text-blue-300">select_sql</span>[] = <span class="text-green-300">"SELECT * FROM users;"</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_prepare_v2</span>(<span class="text-blue-300">db</span>, <span class="text-blue-300">select_sql</span>, <span class="text-yellow-1"></span>, &<span class="text-blue-300">stmt</span>, <span class="text-purple-400">NULL</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"用户列表:
"</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">while</span> (<span class="text-blue-300">sqlite3_step</span>(<span class="text-blue-300">stmt</span>) == <span class="text-blue-300">SQLITE_ROW</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">id</span> = <span class="text-blue-300">sqlite3_column_int</span>(<span class="text-blue-300">stmt</span>, <span class="text-yellow-0"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">const</span> <span class="text-purple-400">unsigned</span> <span class="text-purple-400">char</span>* <span class="text-blue-300">name</span> = <span class="text-blue-300">sqlite3_column_text</span>(<span class="text-blue-300">stmt</span>, <span class="text-yellow-1"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">age</span> = <span class="text-blue-300">sqlite3_column_int</span>(<span class="text-blue-300">stmt</span>, <span class="text-yellow-2"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"ID: %d, 姓名: %s, 年龄: %d
"</span>, <span class="text-blue-300">id</span>, <span class="text-blue-300">name</span>, <span class="text-blue-300">age</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_finalize</span>(<span class="text-blue-300">stmt</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sqlite3_close</span>(<span class="text-blue-300">db</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 33. 异步编程 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">33. 异步编程</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 异步编程</h4>
                        <p class="text-slate-300 mb-4">特点：使用多线程模拟异步操作，使用非阻塞I/O和select/poll实现事件驱动编程，使用状态机管理异步操作流程，使用回调函数处理异步结果。注意事项：需要注意线程同步和共享数据安全，使用select/poll时要注意超时设置。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 使用多线程模拟异步操作</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;pthread.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;unistd.h&gt;</span><br>
                                <br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">id</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span> <span class="text-blue-300">(*callback)</span>(<span class="text-purple-400">void</span>*);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span>* <span class="text-blue-300">data</span>;<br>
                                } <span class="text-blue-300">async_task_t</span>;<br>
                                <br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_t</span> <span class="text-blue-300">thread</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_t</span> <span class="text-blue-300">mutex</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">async_task_t</span> <span class="text-blue-300">tasks</span>[<span class="text-yellow-100"></span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">task_count</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">running</span>;<br>
                                } <span class="text-blue-300">async_manager_t</span>;<br>
                                <br>
                                <span class="text-purple-400">void</span>* <span class="text-blue-300">async_worker</span>(<span class="text-purple-400">void</span>* <span class="text-blue-300">arg</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">async_manager_t</span>* <span class="text-blue-300">manager</span> = (<span class="text-blue-300">async_manager_t</span>*) <span class="text-blue-300">arg</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">while</span> (<span class="text-blue-300">manager</span>-><span class="text-blue-300">running</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_lock</span>(&<span class="text-blue-300">manager</span>-><span class="text-blue-300">mutex</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">manager</span>-><span class="text-blue-300">task_count</span> > <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">async_task_t</span> <span class="text-blue-300">task</span> = <span class="text-blue-300">manager</span>-><span class="text-blue-300">tasks</span>[--<span class="text-blue-300">manager</span>-><span class="text-blue-300">task_count</span>];<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_unlock</span>(&<span class="text-blue-300">manager</span>-><span class="text-blue-300">mutex</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 模拟异步操作</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sleep</span>(<span class="text-yellow-1"></span>); <span class="text-slate-500">// 模拟耗时操作</span><br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 执行回调</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">task</span>.<span class="text-blue-300">callback</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task</span>.<span class="text-blue-300">callback</span>(<span class="text-blue-300">task</span>.<span class="text-blue-300">data</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>} <span class="text-purple-400">else</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_unlock</span>(&<span class="text-blue-300">manager</span>-><span class="text-blue-300">mutex</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">usleep</span>(<span class="text-yellow-10000"></span>); <span class="text-slate-500">// 等待100ms</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-purple-400">NULL</span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">task_completed</span>(<span class="text-purple-400">void</span>* <span class="text-blue-300">data</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">id</span> = *(<span class="text-purple-400">int</span>*) <span class="text-blue-300">data</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"异步任务 %d 完成
"</span>, <span class="text-blue-300">id</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">free</span>(<span class="text-blue-300">data</span>);<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">async_manager_t</span> <span class="text-blue-300">manager</span> = {<span class="text-purple-400">NULL</span>};<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_init</span>(&<span class="text-blue-300">manager</span>.<span class="text-blue-300">mutex</span>, <span class="text-purple-400">NULL</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">manager</span>.<span class="text-blue-300">running</span> = <span class="text-yellow-1"></span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 启动异步工作线程</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_create</span>(&<span class="text-blue-300">manager</span>.<span class="text-blue-300">thread</span>, <span class="text-purple-400">NULL</span>, <span class="text-blue-300">async_worker</span>, &<span class="text-blue-300">manager</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 提交异步任务</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-purple-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-1"></span>; <span class="text-blue-300">i</span> <= <span class="text-yellow-3"></span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span>* <span class="text-blue-300">id</span> = <span class="text-purple-400">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-purple-400">int</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>*<span class="text-blue-300">id</span> = <span class="text-blue-300">i</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">async_task_t</span> <span class="text-blue-300">task</span> = {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="text-blue-300">id</span> = <span class="text-blue-300">i</span>,<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="text-blue-300">callback</span> = <span class="text-blue-300">task_completed</span>,<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="text-blue-300">data</span> = <span class="text-blue-300">id</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>};<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_lock</span>(&<span class="text-blue-300">manager</span>.<span class="text-blue-300">mutex</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">manager</span>.<span class="text-blue-300">tasks</span>[<span class="text-blue-300">manager</span>.<span class="text-blue-300">task_count</span>++] = <span class="text-blue-300">task</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_mutex_unlock</span>(&<span class="text-blue-300">manager</span>.<span class="text-blue-300">mutex</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"提交异步任务 %d
"</span>, <span class="text-blue-300">i</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sleep</span>(<span class="text-yellow-1"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 等待所有任务完成</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sleep</span>(<span class="text-yellow-5"></span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 停止异步管理器</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">manager</span>.<span class="text-blue-300">running</span> = <span class="text-yellow-0"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">pthread_join</span>(<span class="text-blue-300">manager</span>.<span class="text-blue-300">thread</span>, <span class="text-purple-400">NULL</span>);<br>
                                <span class="text-blue-300">pthread_mutex_destroy</span>(&<span class="text-blue-300">manager</span>.<span class="text-blue-300">mutex</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 34. 模块和包 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">34. 模块和包</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 模块化编程</h4>
                        <p class="text-slate-300 mb-4">特点：使用头文件和源文件分离，支持extern声明外部函数和变量，使用static关键字限制作用域，支持条件编译，支持模块化编译和链接。注意事项：使用头文件保护避免重复包含，合理使用static关键字控制作用域，注意函数和变量的可见性。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// math_utils.h - 头文件</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#ifndef</span> <span class="text-blue-300">MATH_UTILS_H</span><br>
                                <span class="text-blue-400">#define</span> <span class="text-blue-300">MATH_UTILS_H</span><br>
                                <br>
                                <span class="text-blue-400">// 函数声明</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">add</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>);<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">multiply</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>);<br>
                                <span class="text-purple-400">double</span> <span class="text-blue-300">divide</span>(<span class="text-purple-400">double</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">double</span> <span class="text-blue-300">b</span>);<br>
                                <br>
                                <span class="text-blue-400">// 宏定义</span><br>
                                <span class="text-blue-400">#define</span> <span class="text-blue-300">PI</span> <span class="text-yellow-300">3.14159</span><br>
                                <span class="text-blue-400">#define</span> <span class="text-blue-300">MAX</span>(<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>) ((<span class="text-blue-300">a</span>) > (<span class="text-blue-300">b</span>) ? (<span class="text-blue-300">a</span>) : (<span class="text-blue-300">b</span>))<br>
                                <br>
                                <span class="text-blue-400">// 结构体定义</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">double</span> <span class="text-blue-300">real</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">double</span> <span class="text-blue-300">imag</span>;<br>
                                } <span class="text-blue-300">Complex</span>;<br>
                                <br>
                                <span class="text-blue-400">// 函数声明</span><br>
                                <span class="text-blue-300">Complex</span> <span class="text-blue-300">complex_add</span>(<span class="text-blue-300">Complex</span> <span class="text-blue-300">a</span>, <span class="text-blue-300">Complex</span> <span class="text-blue-300">b</span>);<br>
                                <br>
                                <span class="text-blue-400">#endif</span>
                            </div>
                        </div>
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// math_utils.c - 源文件</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">"math_utils.h"</span><br>
                                <br>
                                <span class="text-blue-400">// 私有全局变量（仅在本文件可见）</span><br>
                                <span class="text-purple-400">static</span> <span class="text-purple-400">int</span> <span class="text-blue-300">operation_count</span> = <span class="text-yellow-0"></span>;<br>
                                <br>
                                <span class="text-blue-400">// 函数实现</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">add</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">operation_count</span>++;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">multiply</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">operation_count</span>++;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span> * <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">double</span> <span class="text-blue-300">divide</span>(<span class="text-purple-400">double</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">double</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">b</span> == <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">operation_count</span>++;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">a</span> / <span class="text-blue-300">b</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-300">Complex</span> <span class="text-blue-300">complex_add</span>(<span class="text-blue-300">Complex</span> <span class="text-blue-300">a</span>, <span class="text-blue-300">Complex</span> <span class="text-blue-300">b</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Complex</span> <span class="text-blue-300">result</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">result</span>.<span class="text-blue-300">real</span> = <span class="text-blue-300">a</span>.<span class="text-blue-300">real</span> + <span class="text-blue-300">b</span>.<span class="text-blue-300">real</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">result</span>.<span class="text-blue-300">imag</span> = <span class="text-blue-300">a</span>.<span class="text-blue-300">imag</span> + <span class="text-blue-300">b</span>.<span class="text-blue-300">imag</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">result</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 获取操作计数（仅供调试使用）</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">get_operation_count</span>(<span class="text-purple-400">void</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-blue-300">operation_count</span>;<br>
                                }<br>
                            </div>
                        </div>
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// main.c - 主程序</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">"math_utils.h"</span><br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 使用模块中的函数</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">sum</span> = <span class="text-blue-300">add</span>(<span class="text-yellow-10"></span>, <span class="text-yellow-20"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">product</span> = <span class="text-blue-300">multiply</span>(<span class="text-yellow-5"></span>, <span class="text-yellow-4"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">double</span> <span class="text-blue-300">quotient</span> = <span class="text-blue-300">divide</span>(<span class="text-yellow-10"></span>, <span class="text-yellow-3"></span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"和: %d
"</span>, <span class="text-blue-300">sum</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"积: %d
"</span>, <span class="text-blue-300">product</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"商: %.2f
"</span>, <span class="text-blue-300">quotient</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 使用复数</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Complex</span> <span class="text-blue-300">c1</span> = {<span class="text-yellow-3"></span>, <span class="text-yellow-2"></span>};<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Complex</span> <span class="text-blue-300">c2</span> = {<span class="text-yellow-1"></span>, <span class="text-yellow-4"></span>};<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">Complex</span> <span class="text-blue-300">c3</span> = <span class="text-blue-300">complex_add</span>(<span class="text-blue-300">c1</span>, <span class="text-blue-300">c2</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"复数相加: %.1f + %.1fi
"</span>, <span class="text-blue-300">c3</span>.<span class="text-blue-300">real</span>, <span class="text-blue-300">c3</span>.<span class="text-blue-300">imag</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 使用宏定义</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"最大值: %d
"</span>, <span class="text-blue-300">MAX</span>(<span class="text-yellow-10"></span>, <span class="text-yellow-20"></span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"PI值: %.5f
"</span>, <span class="text-blue-300">PI</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                            </div>
                        </div>
                        <div class="code-block rounded-lg p-4 code-font text-sm mt-4">
                            <div class="text-slate-400 mb-2">// 编译命令</div>
                            <div class="text-sm leading-6">
                                <span class="text-slate-500"># 分别编译源文件</span><br>
                                <span class="text-blue-300">gcc</span> <span class="text-blue-400">-c</span> <span class="text-blue-300">math_utils.c</span> <span class="text-blue-400">-o</span> <span class="text-blue-300">math_utils.o</span><br>
                                <span class="text-blue-300">gcc</span> <span class="text-blue-400">-c</span> <span class="text-blue-300">main.c</span> <span class="text-blue-400">-o</span> <span class="text-blue-300">main.o</span><br>
                                <br>
                                <span class="text-slate-500"># 链接目标文件</span><br>
                                <span class="text-blue-300">gcc</span> <span class="text-blue-300">math_utils.o</span> <span class="text-blue-300">main.o</span> <span class="text-blue-400">-o</span> <span class="text-blue-300">program</span><br>
                                <br>
                                <span class="text-slate-500"># 或者一步完成</span><br>
                                <span class="text-blue-300">gcc</span> <span class="text-blue-300">main.c</span> <span class="text-blue-300">math_utils.c</span> <span class="text-blue-400">-o</span> <span class="text-blue-300">program</span>
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 35. 装饰器 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">35. 装饰器</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 使用函数指针和宏实现装饰器模式</h4>
                        <p class="text-slate-300 mb-4">特点：C语言通过函数指针、宏定义和结构体实现装饰器模式，可以在运行时动态修改函数行为，支持AOP编程思想。注意事项：需要小心管理内存，避免循环引用，注意类型安全。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 装饰器模式实现</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> &lt;stdio.h&gt;<br>
                                <span class="text-blue-400">#include</span> &lt;stdlib.h&gt;<br>
                                <br>
                                <span class="text-blue-400">// 定义函数指针类型</span><br>
                                <span class="text-blue-400">typedef</span> <span class="text-blue-400">int</span> (*func_ptr)(<span class="text-blue-400">int</span>);<br>
                                <br>
                                <span class="text-blue-400">// 原始函数</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">square</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">x</span>) {<br>
                                    <span class="text-purple-400">return</span> <span class="text-blue-300">x</span> * <span class="text-blue-300">x</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 日志装饰器</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">log_decorator</span>(func_ptr <span class="text-blue-300">func</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">x</span>) {<br>
                                    <span class="text-blue-300">printf</span>(<span class="text-green-300">"调用函数，参数: %d\n"</span>, <span class="text-blue-300">x</span>);<br>
                                    <span class="text-blue-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">func</span>(<span class="text-blue-300">x</span>);<br>
                                    <span class="text-blue-300">printf</span>(<span class="text-green-300">"结果: %d\n"</span>, <span class="text-blue-300">result</span>);<br>
                                    <span class="text-purple-400">return</span> <span class="text-blue-300">result</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 宏定义装饰器</span><br>
                                <span class="text-blue-400">#define</span> DECORATE_WITH_TIME(func, x) \<br>
                                    { \<br>
                                        clock_t start = clock(); \<br>
                                        int result = func(x); \<br>
                                        clock_t end = clock(); \<br>
                                        printf("执行时间: %f 秒\n", ((double)(end - start)) / CLOCKS_PER_SEC); \<br>
                                        result; \<br>
                                    }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 36. 单元测试 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">36. 单元测试</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 使用宏和函数实现单元测试</h4>
                        <p class="text-slate-300 mb-4">特点：C语言通过宏定义和函数实现简单的单元测试框架，支持断言、测试套件和测试结果报告。注意事项：需要手动管理测试函数指针数组，注意内存管理和错误处理。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 单元测试实现</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> &lt;stdio.h&gt;<br>
                                <span class="text-blue-400">#include</span> &lt;stdlib.h&gt;<br>
                                <span class="text-blue-400">#include</span> &lt;string.h&gt;<br>
                                <br>
                                <span class="text-blue-400">#define</span> TEST_ASSERT(condition, message) \<br>
                                    if (!(condition)) { \<br>
                                        printf("测试失败: %s\n", message); \<br>
                                        return 0; \<br>
                                    } \<br>
                                    else { \<br>
                                        printf("测试通过: %s\n", message); \<br>
                                    }<br>
                                <br>
                                <span class="text-blue-400">#define</span> RUN_TEST(test_func) \<br>
                                    printf("运行测试: " #test_func "\n"); \<br>
                                    if (test_func()) { \<br>
                                        printf("测试 " #test_func " 成功\n\n"); \<br>
                                    } else { \<br>
                                        printf("测试 " #test_func " 失败\n\n"); \<br>
                                    }<br>
                                <br>
                                <span class="text-blue-400">// 测试函数示例</span><br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">test_addition</span>() {<br>
                                    <span class="text-blue-400">int</span> <span class="text-blue-300">a</span> = <span class="text-yellow-300">2</span>;<br>
                                    <span class="text-blue-400">int</span> <span class="text-blue-300">b</span> = <span class="text-yellow-300">3</span>;<br>
                                    <span class="text-blue-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;<br>
                                    <span class="text-blue-400">int</span> <span class="text-blue-300">expected</span> = <span class="text-yellow-300">5</span>;<br>
                                    <br>
                                    TEST_ASSERT(<span class="text-blue-300">result</span> == <span class="text-blue-300">expected</span>, <span class="text-green-300">"加法运算正确"</span>);<br>
                                    <span class="text-purple-400">return</span> <span class="text-yellow-300">1</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">test_string_comparison</span>() {<br>
                                    <span class="text-blue-400">char</span>* <span class="text-blue-300">str1</span> = <span class="text-green-300">"hello"</span>;<br>
                                    <span class="text-blue-400">char</span>* <span class="text-blue-300">str2</span> = <span class="text-green-300">"hello"</span>;<br>
                                    <br>
                                    TEST_ASSERT(strcmp(<span class="text-blue-300">str1</span>, <span class="text-blue-300">str2</span>) == <span class="text-yellow-300">0</span>, <span class="text-green-300">"字符串比较正确"</span>);<br>
                                    <span class="text-purple-400">return</span> <span class="text-yellow-300">1</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                    RUN_TEST(test_addition);<br>
                                    RUN_TEST(test_string_comparison);<br>
                                    <span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section>
        

        <!-- 37. 装饰器进阶 -->
<section class="mb-16">
    <h2 class="text-3xl font-bold mb-8 text-center">
        <span class="gradient-text">37. 装饰器进阶</span>
    </h2>
    
    <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                <h4 class="text-lg font-medium mb-4 text-purple-400">C - 高级装饰器模式与AOP实现</h4>
                <p class="text-slate-300 mb-4">特点：C语言通过函数指针、宏定义、结构体和链表实现高级装饰器模式，支持多层装饰、装饰器组合和AOP（面向切面编程）概念。注意事项：需要管理装饰器链的生命周期，避免内存泄漏，注意线程安全。</p>
                <div class="code-block rounded-lg p-4 code-font text-sm">
                    <div class="text-slate-400 mb-2">// 高级装饰器模式实现</div>
                    <div class="text-sm leading-6">
                        <span class="text-blue-400">#include</span> &lt;stdio.h&gt;<br>
                        <span class="text-blue-400">#include</span> &lt;stdlib.h&gt;<br>
                        <span class="text-blue-400">#include</span> &lt;time.h&gt;<br>
                        <br>
                        <span class="text-blue-400">// 定义函数指针类型</span><br>
                        <span class="text-blue-400">typedef</span> <span class="text-blue-400">int</span> (*func_ptr)(<span class="text-blue-400">int</span>);<br>
                        <span class="text-blue-400">typedef</span> <span class="text-blue-400">int</span> (*decorated_func_ptr)(func_ptr, <span class="text-blue-400">int</span>);<br>
                        <br>
                        <span class="text-blue-400">// 原始函数</span><br>
                        <span class="text-blue-400">int</span> <span class="text-blue-300">square</span>(<span class="text-blue-400">int</span> <span class="text-blue-300">x</span>) {<br>
                            <span class="text-purple-400">return</span> <span class="text-blue-300">x</span> * <span class="text-blue-300">x</span>;<br>
                        }<br>
                        <br>
                        <span class="text-blue-400">// 装饰器结构体</span><br>
                        <span class="text-blue-400">typedef</span> <span class="text-blue-400">struct</span> <span class="text-blue-300">Decorator</span> {<br>
                            decorated_func_ptr <span class="text-blue-300">apply</span>;<br>
                            <span class="text-blue-400">struct</span> <span class="text-blue-300">Decorator</span>* <span class="text-blue-300">next</span>;<br>
                        } <span class="text-blue-300">Decorator</span>;<br>
                        <br>
                        <span class="text-blue-400">// 日志装饰器</span><br>
                        <span class="text-blue-400">int</span> <span class="text-blue-300">log_decorator</span>(func_ptr <span class="text-blue-300">func</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">x</span>) {<br>
                            <span class="text-blue-300">printf</span>(<span class="text-green-300">"调用函数，参数: %d\n"</span>, <span class="text-blue-300">x</span>);<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">func</span>(<span class="text-blue-300">x</span>);<br>
                            <span class="text-blue-300">printf</span>(<span class="text-green-300">"结果: %d\n"</span>, <span class="text-blue-300">result</span>);<br>
                            <span class="text-purple-400">return</span> <span class="text-blue-300">result</span>;<br>
                        }<br>
                        <br>
                        <span class="text-blue-400">// 性能计时装饰器</span><br>
                        <span class="text-blue-400">int</span> <span class="text-blue-300">timing_decorator</span>(func_ptr <span class="text-blue-300">func</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">x</span>) {<br>
                            clock_t <span class="text-blue-300">start</span> = <span class="text-blue-300">clock</span>();<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">func</span>(<span class="text-blue-300">x</span>);<br>
                            clock_t <span class="text-blue-300">end</span> = <span class="text-blue-300">clock</span>();<br>
                            <span class="text-blue-300">printf</span>(<span class="text-green-300">"执行时间: %f 秒\n"</span>, ((<span class="text-blue-400">double</span>)(<span class="text-blue-300">end</span> - <span class="text-blue-300">start</span>)) / <span class="text-blue-300">CLOCKS_PER_SEC</span>);<br>
                            <span class="text-purple-400">return</span> <span class="text-blue-300">result</span>;<br>
                        }<br>
                        <br>
                        <span class="text-blue-400">// 缓存装饰器结构</span><br>
                        <span class="text-blue-400">typedef</span> <span class="text-blue-400">struct</span> {<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">input</span>;<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">output</span>;<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">valid</span>;<br>
                        } <span class="text-blue-300">CacheEntry</span>;<br>
                        <br>
                        <span class="text-blue-400">static</span> <span class="text-blue-300">CacheEntry</span> <span class="text-blue-300">cache</span>;<br>
                        <br>
                        <span class="text-blue-400">int</span> <span class="text-blue-300">cache_decorator</span>(func_ptr <span class="text-blue-300">func</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">x</span>) {<br>
                            <span class="text-purple-400">if</span> (<span class="text-blue-300">cache</span>.<span class="text-blue-300">valid</span> && <span class="text-blue-300">cache</span>.<span class="text-blue-300">input</span> == <span class="text-blue-300">x</span>) {<br>
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"从缓存获取结果: %d\n"</span>, <span class="text-blue-300">cache</span>.<span class="text-blue-300">output</span>);<br>
                                <span class="text-purple-400">return</span> <span class="text-blue-300">cache</span>.<span class="text-blue-300">output</span>;<br>
                            }<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">func</span>(<span class="text-blue-300">x</span>);<br>
                            <span class="text-blue-300">cache</span>.<span class="text-blue-300">input</span> = <span class="text-blue-300">x</span>;<br>
                            <span class="text-blue-300">cache</span>.<span class="text-blue-300">output</span> = <span class="text-blue-300">result</span>;<br>
                            <span class="text-blue-300">cache</span>.<span class="text-blue-300">valid</span> = <span class="text-yellow-300">1</span>;<br>
                            <span class="text-purple-400">return</span> <span class="text-blue-300">result</span>;<br>
                        }<br>
                        <br>
                        <span class="text-blue-400">// 应用多个装饰器的函数</span><br>
                        <span class="text-blue-400">int</span> <span class="text-blue-300">apply_decorators</span>(func_ptr <span class="text-blue-300">base_func</span>, <span class="text-blue-400">int</span> <span class="text-blue-300">x</span>) {<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">cache_decorator</span>(<span class="text-blue-300">base_func</span>, <span class="text-blue-300">x</span>);<br>
                            <span class="text-blue-300">result</span> = <span class="text-blue-300">log_decorator</span>(<span class="text-blue-300">base_func</span>, <span class="text-blue-300">x</span>);<br>
                            <span class="text-blue-400">return</span> <span class="text-blue-300">timing_decorator</span>(<span class="text-blue-300">base_func</span>, <span class="text-blue-300">x</span>);<br>
                        }<br>
                        <br>
                        <span class="text-blue-400">int</span> <span class="text-blue-300">main</span>() {<br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">result1</span> = <span class="text-blue-300">apply_decorators</span>(<span class="text-blue-300">square</span>, <span class="text-yellow-300">5</span>);<br>
                            <span class="text-blue-300">printf</span>(<span class="text-green-300">"最终结果: %d\n"</span>, <span class="text-blue-300">result1</span>);<br>
                            <br>
                            <span class="text-blue-400">int</span> <span class="text-blue-300">result2</span> = <span class="text-blue-300">apply_decorators</span>(<span class="text-blue-300">square</span>, <span class="text-yellow-300">5</span>); <span class="text-blue-400">// 这次应该使用缓存</span><br>
                            <span class="text-blue-300">printf</span>(<span class="text-green-300">"最终结果: %d\n"</span>, <span class="text-blue-300">result2</span>);<br>
                            <span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                        }
                    </div>
                </div>
            </div></div></div>
</section><!-- 38. 上下文管理器进阶 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">38. 上下文管理器进阶</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 使用宏和函数实现高级资源管理</h4>
                        <p class="text-slate-300 mb-4">特点：C语言通过宏定义和函数实现高级资源管理机制，支持自动资源清理、异常安全和RAII模式。注意事项：需要小心管理资源生命周期，确保清理函数在所有路径上都被调用，注意错误处理和内存泄漏。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 高级资源管理实现</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> &lt;stdio.h&gt;<br>
                                <span class="text-blue-400">#include</span> &lt;stdlib.h&gt;<br>
                                <span class="text-blue-400">#include</span> &lt;string.h&gt;<br>
                                <br>
                                <span class="text-blue-400">// 资源管理结构体</span><br>
                                <span class="text-blue-400">typedef</span> <span class="text-blue-400">struct</span> {<br>
                                    <span class="text-blue-400">void</span>* <span class="text-blue-300">resource</span>;<br>
                                    <span class="text-blue-400">void</span> (*<span class="text-blue-300">cleanup</span>)(<span class="text-blue-400">void</span>*);<br>
                                    <span class="text-blue-400">int</span> <span class="text-blue-300">active</span>;<br>
                                } <span class="text-blue-300">ResourceHandle</span>;<br>
                                <br>
                                <span class="text-blue-400">// 创建资源管理器</span><br>
                                <span class="text-blue-300">ResourceHandle</span> <span class="text-blue-300">create_resource</span>(<span class="text-blue-400">void</span>* <span class="text-blue-300">ptr</span>, <span class="text-blue-400">void</span> (*<span class="text-blue-300">cleanup_func</span>)(<span class="text-blue-400">void</span>*)) {<br>
                                    <span class="text-blue-300">ResourceHandle</span> <span class="text-blue-300">handle</span> = {<span class="text-blue-300">ptr</span>, <span class="text-blue-300">cleanup_func</span>, <span class="text-yellow-300">1</span>};<br>
                                    <span class="text-purple-400">return</span> <span class="text-blue-300">handle</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 清理资源</span><br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">cleanup_resource</span>(<span class="text-blue-300">ResourceHandle</span>* <span class="text-blue-300">handle</span>) {<br>
                                    <span class="text-purple-400">if</span> (<span class="text-blue-300">handle</span> &amp;&amp; <span class="text-blue-300">handle</span>-><span class="text-blue-300">active</span> &amp;&amp; <span class="text-blue-300">handle</span>-><span class="text-blue-300">resource</span> &amp;&amp; <span class="text-blue-300">handle</span>-><span class="text-blue-300">cleanup</span>) {<br>
                                        <span class="text-blue-300">handle</span>-><span class="text-blue-300">cleanup</span>(<span class="text-blue-300">handle</span>-><span class="text-blue-300">resource</span>);<br>
                                        <span class="text-blue-300">handle</span>-><span class="text-blue-300">active</span> = <span class="text-yellow-300">0</span>;<br>
                                    }<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 文件资源清理函数</span><br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">file_cleanup</span>(<span class="text-blue-400">void</span>* <span class="text-blue-300">file_ptr</span>) {<br>
                                    <span class="text-blue-300">FILE</span>* <span class="text-blue-300">fp</span> = (<span class="text-blue-300">FILE</span>*)<span class="text-blue-300">file_ptr</span>;<br>
                                    <span class="text-purple-400">if</span> (<span class="text-blue-300">fp</span>) {<br>
                                        <span class="text-blue-300">fclose</span>(<span class="text-blue-300">fp</span>);<br>
                                        <span class="text-blue-300">printf</span>(<span class="text-green-300">"文件资源已清理\n"</span>);<br>
                                    }<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 内存资源清理函数</span><br>
                                <span class="text-blue-400">void</span> <span class="text-blue-300">memory_cleanup</span>(<span class="text-blue-400">void</span>* <span class="text-blue-300">ptr</span>) {<br>
                                    <span class="text-purple-400">if</span> (<span class="text-blue-300">ptr</span>) {<br>
                                        <span class="text-blue-300">free</span>(<span class="text-blue-300">ptr</span>);<br>
                                        <span class="text-blue-300">printf</span>(<span class="text-green-300">"内存资源已清理\n"</span>);<br>
                                    }<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                    <span class="text-blue-400">// 使用资源管理器管理文件</span><br>
                                    <span class="text-blue-300">FILE</span>* <span class="text-blue-300">fp</span> = <span class="text-blue-300">fopen</span>(<span class="text-green-300">"test.txt"</span>, <span class="text-green-300">"w"</span>);<br>
                                    <span class="text-blue-300">ResourceHandle</span> <span class="text-blue-300">file_handle</span> = <span class="text-blue-300">create_resource</span>(<span class="text-blue-300">fp</span>, &amp;<span class="text-blue-300">file_cleanup</span>);<br>
                                    <br>
                                    <span class="text-blue-400">if</span> (<span class="text-blue-300">fp</span>) {<br>
                                        <span class="text-blue-300">fprintf</span>(<span class="text-blue-300">fp</span>, <span class="text-green-300">"Hello, World!\n"</span>);<br>
                                    }<br>
                                    <br>
                                    <span class="text-blue-400">// 使用资源管理器管理内存</span><br>
                                    <span class="text-blue-400">char</span>* <span class="text-blue-300">buffer</span> = (<span class="text-blue-400">char</span>*)<span class="text-blue-300">malloc</span>(<span class="text-yellow-300">100</span> * <span class="text-blue-400">sizeof</span>(<span class="text-blue-400">char</span>));<br>
                                    <span class="text-blue-300">ResourceHandle</span> <span class="text-blue-300">mem_handle</span> = <span class="text-blue-300">create_resource</span>(<span class="text-blue-300">buffer</span>, &amp;<span class="text-blue-300">memory_cleanup</span>);<br>
                                    <br>
                                    <span class="text-purple-400">if</span> (<span class="text-blue-300">buffer</span>) {<br>
                                        <span class="text-blue-300">strcpy</span>(<span class="text-blue-300">buffer</span>, <span class="text-green-300">"Managed memory"</span>);<br>
                                    }<br>
                                    <br>
                                    <span class="text-blue-400">// 清理资源</span><br>
                                    <span class="text-blue-300">cleanup_resource</span>(&amp;<span class="text-blue-300">file_handle</span>);<br>
                                    <span class="text-blue-300">cleanup_resource</span>(&amp;<span class="text-blue-300">mem_handle</span>);<br>
                                    <br>
                                    <span class="text-purple-400">return</span> <span class="text-yellow-300">0</span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section>
        

        <!-- 39. 异步编程进阶 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">39. 异步编程进阶</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 使用POSIX线程和回调实现异步编程</h4>
                        <p class="text-slate-300 mb-4">特点：使用POSIX线程模拟异步操作，使用回调函数处理异步结果，使用任务队列管理异步任务，支持并发执行多个异步任务。注意事项：需要链接pthread库，注意线程安全和资源管理，使用信号量或互斥锁进行同步。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 使用POSIX线程实现异步编程</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;string.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;pthread.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;unistd.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;semaphore.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 任务结果结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span> <span class="text-blue-300">name</span>[<span class="text-yellow-50"></span>];<br>
                                <span class="text-purple-400">char</span> <span class="text-blue-300">result</span>[<span class="text-yellow-100"></span>];<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">delay</span>;<br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">completed</span>;<br>
                                } <span class="text-blue-300">task_result_t</span>;<br>
                                <br>
                                <span class="text-blue-400">// 异步任务结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span> (<span class="text-blue-300">*execute</span>)(<span class="text-purple-400">void</span>* <span class="text-blue-300">arg</span>, <span class="text-purple-400">void</span>* <span class="text-blue-300">result</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span>* <span class="text-blue-300">arg</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">void</span>* <span class="text-blue-300">result</span>;<br>
                                <span class="text-blue-300">task_result_t</span>* <span class="text-blue-300">task_result</span>;<br>
                                } <span class="text-blue-300">async_task_t</span>;<br>
                                <br>
                                <span class="text-blue-400">// 任务队列结构体</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">async_task_t</span>* <span class="text-blue-300">tasks</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">capacity</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">size</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">head</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">tail</span>;<br>
                                <span class="text-blue-400">pthread_mutex_t</span> <span class="text-blue-300">mutex</span>;<br>
                                <span class="text-blue-300">sem_t</span> <span class="text-blue-300">semaphore</span>;<br>
                                } <span class="text-blue-300">task_queue_t</span>;<br>
                                <br>
                                <span class="text-blue-300">task_queue_t</span>* <span class="text-blue-300">task_queue_create</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">capacity</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task_queue_t</span>* <span class="text-blue-300">queue</span> = <span class="text-purple-400">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">task_queue_t</span>));<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (!<span class="text-blue-300">queue</span>) <span class="text-purple-400">return</span> <span class="text-purple-400">NULL</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">queue</span>-><span class="text-blue-300">tasks</span> = <span class="text-purple-400">malloc</span>(<span class="text-purple-400">sizeof</span>(<span class="text-blue-300">async_task_t</span>) * <span class="text-blue-300">capacity</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (!<span class="text-blue-300">queue</span>-><span class="text-blue-300">tasks</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">free</span>(<span class="text-blue-300">queue</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-purple-400">NULL</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">queue</span>-><span class="text-blue-300">capacity</span> = <span class="text-blue-300">capacity</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">queue</span>-><span class="text-blue-300">size</span> = <span class="text-yellow-0"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">queue</span>-><span class="text-blue-300">head</span> = <span class="text-yellow-0"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">queue</span>-><span class="text-blue-300">tail</span> = <span class="text-yellow-0"></span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_init</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>, <span class="text-purple-400">NULL</span>);<br>
                                <span class="text-blue-300">sem_init</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">semaphore</span>, <span class="text-yellow-0"></span>, <span class="text-yellow-0"></span>);<br>
                                <br>
                                <span class="text-purple-400">return</span> <span class="text-blue-300">queue</span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">task_queue_destroy</span>(<span class="text-blue-300">task_queue_t</span>* <span class="text-blue-300">queue</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">queue</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_destroy</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sem_destroy</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">semaphore</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">free</span>(<span class="text-blue-300">queue</span>-><span class="text-blue-300">tasks</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">free</span>(<span class="text-blue-300">queue</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">task_queue_push</span>(<span class="text-blue-300">task_queue_t</span>* <span class="text-blue-300">queue</span>, <span class="text-blue-300">async_task_t</span> <span class="text-blue-300">task</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_lock</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">while</span> (<span class="text-blue-300">queue</span>-><span class="text-blue-300">size</span> >= <span class="text-blue-300">queue</span>-><span class="text-blue-300">capacity</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_unlock</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">queue</span>-><span class="text-blue-300">tasks</span>[<span class="text-blue-300">queue</span>-><span class="text-blue-300">tail</span>] = <span class="text-blue-300">task</span>;<br>
                                <span class="text-blue-300">queue</span>-><span class="text-blue-300">tail</span> = (<span class="text-blue-300">queue</span>-><span class="text-blue-300">tail</span> + <span class="text-yellow-1"></span>) % <span class="text-blue-300">queue</span>-><span class="text-blue-300">capacity</span>;<br>
                                <span class="text-blue-300">queue</span>-><span class="text-blue-300">size</span>++;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_unlock</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>);<br>
                                <span class="text-blue-300">sem_post</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">semaphore</span>);<br>
                                <br>
                                <span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">task_queue_pop</span>(<span class="text-blue-300">task_queue_t</span>* <span class="text-blue-300">queue</span>, <span class="text-blue-300">async_task_t</span>* <span class="text-blue-300">task</span>) {<br>
                                <span class="text-blue-300">sem_wait</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">semaphore</span>);<br>
                                <span class="text-purple-400">pthread_mutex_lock</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>);<br>
                                <br>
                                <span class="text-purple-400">if</span> (<span class="text-blue-300">queue</span>-><span class="text-blue-300">size</span> <= <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_unlock</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>);<br>
                                <span class="text-purple-400">return</span> <span class="text-yellow-1"></span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>*<span class="text-blue-300">task</span> = <span class="text-blue-300">queue</span>-><span class="text-blue-300">tasks</span>[<span class="text-blue-300">queue</span>-><span class="text-blue-300">head</span>];<br>
                                <span class="text-blue-300">queue</span>-><span class="text-blue-300">head</span> = (<span class="text-blue-300">queue</span>-><span class="text-blue-300">head</span> + <span class="text-yellow-1"></span>) % <span class="text-blue-300">queue</span>-><span class="text-blue-300">capacity</span>;<br>
                                <span class="text-blue-300">queue</span>-><span class="text-blue-300">size</span>--;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_mutex_unlock</span>(&<span class="text-blue-300">queue</span>-><span class="text-blue-300">mutex</span>);<br>
                                <span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }<br>
                                <br>
                                <span class="text-purple-400">void</span>* <span class="text-blue-300">worker_thread</span>(<span class="text-purple-400">void</span>* <span class="text-blue-300">arg</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task_queue_t</span>* <span class="text-blue-300">queue</span> = (<span class="text-blue-300">task_queue_t</span>*) <span class="text-blue-300">arg</span>;<br>
                                <span class="text-blue-300">async_task_t</span> <span class="text-blue-300">task</span>;<br>
                                <br>
                                <span class="text-purple-400">while</span> (<span class="text-yellow-1</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">task_queue_pop</span>(<span class="text-blue-300">queue</span>, &<span class="text-blue-300">task</span>) == <span class="text-yellow-0"></span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task</span>.<span class="text-blue-300">execute</span>(<span class="text-blue-300">task</span>.<span class="text-blue-300">arg</span>, <span class="text-blue-300">task</span>.<span class="text-blue-300">result</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (<span class="text-blue-300">task</span>.<span class="text-blue-300">task_result</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task</span>.<span class="text-blue-300">task_result</span>-><span class="text-blue-300">completed</span> = <span class="text-yellow-1</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <span class="text-purple-400">return</span> <span class="text-purple-400">NULL</span>;<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 示例任务执行函数</span><br>
                                <span class="text-purple-400">void</span> <span class="text-blue-300">sample_execute</span>(<span class="text-purple-400">void</span>* <span class="text-blue-300">arg</span>, <span class="text-purple-400">void</span>* <span class="text-blue-300">result</span>) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span>* <span class="text-blue-300">name</span> = (<span class="text-purple-400">char</span>*) <span class="text-blue-300">arg</span>;<br>
                                <span class="text-blue-300">task_result_t</span>* <span class="text-blue-300">res</span> = (<span class="text-blue-300">task_result_t</span>*) <span class="text-blue-300">result</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">printf</span>(<span class="text-green-300">"开始处理任务: %s
"</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-blue-300">sleep</span>(<span class="text-yellow-1"></span>);<br>
                                <span class="text-purple-400">char</span> <span class="text-blue-300">output</span>[<span class="text-yellow-100"></span>];<br>
                                <span class="text-blue-300">snprintf</span>(<span class="text-blue-300">output</span>, <span class="text-yellow-100"></span>, <span class="text-green-300">"%s处理完成"</span>, <span class="text-blue-300">name</span>);<br>
                                <span class="text-blue-300">strncpy</span>(<span class="text-blue-300">res</span>-><span class="text-blue-300">result</span>, <span class="text-blue-300">output</span>, <span class="text-yellow-99"></span>);<br>
                                <span class="text-blue-300">printf</span>(<span class="text-green-300">"任务 %s 完成
"</span>, <span class="text-blue-300">name</span>);<br>
                                }<br>
                                <br>
                                <span class="text-blue-400">// 主函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task_queue_t</span>* <span class="text-blue-300">queue</span> = <span class="text-blue-300">task_queue_create</span>(<span class="text-yellow-10"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">if</span> (!<span class="text-blue-300">queue</span>) <span class="text-purple-400">return</span> <span class="text-yellow-1</span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">pthread_t</span> <span class="text-blue-300">workers</span>[<span class="text-yellow-4"></span>];<br>
                                <span class="text-purple-400">for</span> (<span class="text-purple-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-0"></span>; <span class="text-blue-300">i</span> < <span class="text-yellow-4"></span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_create</span>(&<span class="text-blue-300">workers</span>[<span class="text-blue-300">i</span>], <span class="text-purple-400">NULL</span>, <span class="text-blue-300">worker_thread</span>, <span class="text-blue-300">queue</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-purple-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-0"></span>; <span class="text-blue-300">i</span> < <span class="text-yellow-5"></span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task_result_t</span> <span class="text-blue-300">result</span>;<br>
                                <span class="text-blue-300">async_task_t</span> <span class="text-blue-300">task</span> = {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="text-blue-300">execute</span> = <span class="text-blue-300">sample_execute</span>,<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="text-blue-300">arg</span> = (<span class="text-purple-400">void</span>*)&<span class="text-green-300">"Task-X"</span>[<span class="text-yellow-5"></span>],<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="text-blue-300">result</span> = &<span class="text-blue-300">result</span>,<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>.<span class="text-blue-300">task_result</span> = &<span class="text-blue-300">result</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>};<br>
                                <span class="text-blue-300">char</span> <span class="text-blue-300">name</span>[<span class="text-yellow-20"></span>];<br>
                                <span class="text-blue-300">snprintf</span>(<span class="text-blue-300">name</span>, <span class="text-yellow-20"></span>, <span class="text-green-300">"Task-%d"</span>, <span class="text-blue-300">i</span> + <span class="text-yellow-1"></span>);<br>
                                <span class="text-blue-300">strncpy</span>(<span class="text-blue-300">result</span>.<span class="text-blue-300">name</span>, <span class="text-blue-300">name</span>, <span class="text-yellow-19"></span>);<br>
                                <span class="text-blue-300">task_queue_push</span>(<span class="text-blue-300">queue</span>, <span class="text-blue-300">task</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">sleep</span>(<span class="text-yellow-3"></span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">for</span> (<span class="text-purple-400">int</span> <span class="text-blue-300">i</span> = <span class="text-yellow-0"></span>; <span class="text-blue-300">i</span> < <span class="text-yellow-4"></span>; <span class="text-blue-300">i</span>++) {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">pthread_cancel</span>(<span class="text-blue-300">workers</span>[<span class="text-blue-300">i</span>]);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span>}<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">task_queue_destroy</span>(<span class="text-blue-300">queue</span>);<br>
                                <span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section><!-- 40. 类型提示进阶 -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold mb-8 text-center">
                <span class="gradient-text">40. 类型提示进阶</span>
            </h2>
            
            <div class="syntax-card rounded-xl p-8"><div class="grid grid-cols-1 lg:grid-cols-1 gap-8"><div class="language-content" data-lang="c">
                        <h4 class="text-lg font-medium mb-4 text-purple-400">C - 高级类型系统（C11/C23）</h4>
                        <p class="text-slate-300 mb-4">特点：支持typedef类型别名，结构体和联合体类型，枚举类型，函数指针类型，typeof自动推导（C23），泛型选择器（C11）。注意事项：使用typedef创建类型别名，使用struct/union/enum定义复合类型，使用_Generic实现类型选择。</p>
                        <div class="code-block rounded-lg p-4 code-font text-sm">
                            <div class="text-slate-400 mb-2">// 高级类型系统</div>
                            <div class="text-sm leading-6">
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdio.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdlib.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdint.h&gt;</span><br>
                                <span class="text-blue-400">#include</span> <span class="text-green-300">&lt;stdbool.h&gt;</span><br>
                                <br>
                                <span class="text-blue-400">// 类型别名</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">unsigned</span> <span class="text-purple-400">long</span> <span class="text-blue-300">ulong_t</span>;<br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">int32_t</span> <span class="text-blue-300">int32</span>;<br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">const</span> <span class="text-purple-400">char</span>* <span class="text-blue-300">cstr_t</span>;<br>
                                <br>
                                <span class="text-blue-400">// 结构体类型定义</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">struct</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">int32</span> <span class="text-blue-300">id</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">cstr_t</span> <span class="text-blue-300">name</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">double</span> <span class="text-blue-300">salary</span>;<br>
                                } <span class="text-blue-300">employee_t</span>;<br>
                                <br>
                                <span class="text-blue-400">// 联合体类型</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">union</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span> <span class="text-blue-300">int_val</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">float</span> <span class="text-blue-300">float_val</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">cstr_t</span> <span class="text-blue-300">str_val</span>;<br>
                                } <span class="text-blue-300">data_union_t</span>;<br>
                                <br>
                                <span class="text-blue-400">// 枚举类型</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">enum</span> {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">STATUS_OK</span> = <span class="text-yellow-0"></span>,<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">STATUS_ERROR</span>,<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">STATUS_WARNING</span><br>
                                } <span class="text-blue-300">status_t</span>;<br>
                                <br>
                                <span class="text-blue-400">// 函数指针类型</span><br>
                                <span class="text-purple-400">typedef</span> <span class="text-purple-400">int</span> (<span class="text-blue-300">*</span><span class="text-blue-300">comparator_t</span>)(<span class="text-purple-400">const</span> <span class="text-purple-400">void</span>*, <span class="text-purple-400">const</span> <span class="text-purple-400">void</span>*);<br>
                                <br>
                                <span class="text-blue-400">// 使用_Generic进行类型选择（C11）</span><br>
                                <span class="text-purple-400">#define</span> <span class="text-blue-300">PRINT_TYPE</span>(<span class="text-blue-300">x</span>) \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">_Generic</span>((<span class="text-blue-300">x</span>), \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">int</span>: <span class="text-blue-300">printf</span>(<span class="text-green-300">"整数: %d
"</span>, <span class="text-blue-300">x</span>), \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">double</span>: <span class="text-blue-300">printf</span>(<span class="text-green-300">"浮点数: %lf
"</span>, <span class="text-blue-300">x</span>), \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">char</span>*: <span class="text-blue-300">printf</span>(<span class="text-green-300">"字符串: %s
"</span>, <span class="text-blue-300">x</span>), \<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">default</span>: <span class="text-blue-300">printf</span>(<span class="text-green-300">"未知类型
"</span>))<br>
                                <br>
                                <span class="text-blue-400">// 主函数</span><br>
                                <span class="text-purple-400">int</span> <span class="text-blue-300">main</span>() {<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">employee_t</span> <span class="text-blue-300">emp</span> = {<span class="text-yellow-1"></span>, <span class="text-green-300">"张三"</span>, <span class="text-yellow-5000"></span>.<span class="text-yellow-0"></span>};<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">data_union_t</span> <span class="text-blue-300">data</span>;<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">data</span>.<span class="text-blue-300">int_val</span> = <span class="text-yellow-42"></span>;<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-400">// 使用_Generic类型选择</span><br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">PRINT_TYPE</span>(<span class="text-yellow-42"></span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">PRINT_TYPE</span>(<span class="text-yellow-3">.14</span>);<br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-blue-300">PRINT_TYPE</span>(<span class="text-green-300">"Hello"</span>);<br>
                                <br>
                                <span class="text-green-300">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="text-purple-400">return</span> <span class="text-yellow-0"></span>;<br>
                                }
                            </div>
                        </div>
                    </div></div></div>
        </section>