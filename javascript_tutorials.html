<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript 教程 - Hello 编程语言</title>
    <script>
        // 尝试加载 Tailwind CSS，如果失败则使用备用方案
        window.tailwindCdnLoaded = false;
        function loadTailwindCSS() {
            const script = document.createElement('script');
            script.src = 'https://cdn.tailwindcss.com';
            script.onload = function() {
                window.tailwindCdnLoaded = true;
                // Tailwind 配置
                tailwind.config = {
                    theme: {
                        extend: {
                            colors: {
                                primary: '#3b82f6',
                                secondary: '#8b5cf6',
                                dark: '#1e293b',
                                light: '#f8fafc'
                            }
                        }
                    }
                }
            };
            script.onerror = function() {
                console.warn('Failed to load Tailwind CSS from CDN, applying fallback styles');
                applyFallbackStyles();
            };
            document.head.appendChild(script);
        }
        
        function applyFallbackStyles() {
            // 应用基本的 Tailwind 类对应的样式
            const fallbackStyles = document.createElement('style');
            fallbackStyles.textContent = `
                /* 基本布局类 */
                .container { width: 100%; margin-right: auto; margin-left: auto; padding-right: 1rem; padding-left: 1rem; }
                .grid { display: grid; }
                .flex { display: flex; }
                .hidden { display: none; }
                
                /* 网格列类 */
                .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
                @media (min-width: 1024px) {
                    .lg\\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
                }
                
                /* 间距类 */
                .p-8 { padding: 2rem; }
                .p-4 { padding: 1rem; }
                .mb-16 { margin-bottom: 4rem; }
                .mb-8 { margin-bottom: 2rem; }
                .mb-4 { margin-bottom: 1rem; }
                .mb-2 { margin-bottom: 0.5rem; }
                .mt-4 { margin-top: 1rem; }
                .mr-2 { margin-right: 0.5rem; }
                .ml-2 { margin-left: 0.5rem; }
                
                /* 字体类 */
                .text-3xl { font-size: 1.875rem; }
                .text-lg { font-size: 1.125rem; }
                .text-sm { font-size: 0.875rem; }
                .font-bold { font-weight: 700; }
                .font-medium { font-weight: 500; }
                
                /* 文本类 */
                .text-center { text-align: center; }
                .text-purple-400 { color: #a78bfa; }
                .text-slate-300 { color: #cbd5e1; }
                .text-slate-400 { color: #94a3b8; }
                
                /* 背景类 */
                .bg-slate-900 { background-color: #0f172a; }
                .bg-slate-800 { background-color: #1e293b; }
                
                /* 边框类 */
                .rounded-xl { border-radius: 0.75rem; }
                .rounded-lg { border-radius: 0.5rem; }
                .rounded { border-radius: 0.25rem; }
                
                /* 其他类 */
                .gap-8 { gap: 2rem; }
                .items-center { align-items: center; }
                .justify-between { justify-content: space-between; }
                .w-full { width: 100%; }
            `;
            document.head.appendChild(fallbackStyles);
        }
        
        // 加载 Tailwind CSS
        loadTailwindCSS();
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=JetBrains+Mono:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Noto Sans SC', sans-serif;
        }
        .word-wrap {
            word-wrap: break-word;
        }
        .code-block {
            background: rgba(2, 6, 23, 0.9);
            border-left: 4px solid #3B82F6;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', 'Courier New', monospace;
            box-sizing: border-box !important;
            width: 100% !important;
            max-width: none !important;
        }
        .code-line {
            display: block;
            margin: 0.25rem 0;
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', 'Courier New', monospace;
        }
        .section {
            scroll-margin-top: 2rem;
        }
        .nav-link {
            transition: all 0.3s ease;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #60A5FA 0%, #A78BFA 50%, #F87171 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .code-font {
            font-family: 'JetBrains Mono', 'Monaco', 'Consolas', 'Courier New', monospace;
        }
        
        .syntax-card {
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.8), rgba(15, 23, 42, 0.9));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.1);
        }
        
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100 min-h-screen">
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar Navigation -->
            <aside class="lg:col-span-1">
                <div class="bg-slate-800/50 backdrop-blur-md rounded-xl p-6 sticky top-24 border border-slate-700">
                    <h3 class="text-lg font-bold mb-4 gradient-text">章节导航</h3>
                    <nav class="space-y-2">
                        <a href="#section-1" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">1. 变量 (Variables)</a>
                        <a href="#section-2" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">2. 数据类型 (Data Types)</a>
                        <a href="#section-3" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">3. 操作符 (Operators)</a>
                        <a href="#section-4" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">4. 条件语句 (Conditionals)</a>
                        <a href="#section-5" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">5. 循环 (Loops)</a>
                        <a href="#section-6" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">6. 函数 (Functions)</a>
                        <a href="#section-7" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">7. 数组 (Arrays)</a>
                        <a href="#section-8" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">8. 对象 (Objects)</a>
                        <a href="#section-9" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">9. DOM操作 (DOM Manipulation)</a>
                        <a href="#section-10" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">10. 事件 (Events)</a>
                        <a href="#section-11" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">11. 异步编程 (Asynchronous)</a>
                        <a href="#section-12" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">12. 错误处理 (Error Handling)</a>
                        <a href="#section-13" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">13. 模块化 (Modularity)</a>
                        <a href="#section-14" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">14. ES6+ 特性 (ES6+ Features)</a>
                        <a href="#section-15" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">15. 浏览器 API (Browser APIs)</a>
                        <a href="#section-16" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">16. 浏览器：文档，事件，接口 (Browser: Document, Events, Interfaces)</a>
                        <a href="#section-17" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">17. WebTransport 数据传输</a>
                        <a href="#section-18" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">18. WebCodecs 编解码</a>
                        <a href="#section-19" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">19. WebAssembly 汇编</a>
                        <a href="#section-20" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">20. WebGPU 计算与渲染</a>
                        <a href="#section-21" class="block py-2 px-3 text-slate-300 hover:bg-slate-700 hover:text-white rounded-lg transition-colors">21. WebXR 虚拟/增强/混合现实</a>
                    </nav>
                </div>
            </aside>

            <!-- Main Content -->
            <div id="main-content" class="lg:col-span-3">
                <!-- 1. 变量 (Variables) -->
        <section id="section-1" class="mb-16">

            <h2 class="text-3xl font-bold mb-8 text-center">

                <span class="gradient-text">1. 变量 (Variables)</span>

            </h2>

            

            <div class="language-content" data-lang="javascript">

                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 支持 var, let, const 变量声明</h4>

            <p class="mb-4">JavaScript 中有三种声明变量的方式：<code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">var</code>、<code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">let</code> 和 <code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">const</code>。</p>
            <p class="mb-4">变量是存储数据的容器。每个变量都有一个唯一的名称（标识符）。</p>
            <p class="mb-4">在现代JavaScript中，我们主要使用 <code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">let</code> 和 <code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">const</code> 来声明变量：</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">name</span> = <span class="text-green-300">"张三"</span>; <span class="text-blue-400">// 可变变量</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">age</span> = <span class="text-yellow-400">25</span>; <span class="text-blue-400">// 常量</span></div>
                <div class="code-line"><span class="text-purple-400">var</span> <span class="text-blue-300">city</span> = <span class="text-green-300">"北京"</span>; <span class="text-blue-400">// 旧式声明（不推荐）</span></div>
            </div>





            
            <p class="mb-4 mt-6"><strong>使用 <code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">let</code> 声明变量：</strong></p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">message</span>;</div>
                <div class="code-line"><span class="text-blue-300">message</span> = <span class="text-green-300">"Hello"</span>; <span class="text-blue-400">// 将字符串赋值给变量</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">message2</span> = <span class="text-green-300">"Hello"</span>; <span class="text-blue-400">// 声明并赋值</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">user</span> = <span class="text-green-300">"John"</span>, <span class="text-blue-300">age</span> = <span class="text-yellow-400">25</span>, <span class="text-blue-300">message3</span> = <span class="text-green-300">"Hello"</span>; <span class="text-blue-400">// 多个变量声明</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>使用 <code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">const</code> 声明常量：</strong></p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">myBirthday</span> = <span class="text-green-300">"18.04.1982"</span>; <span class="text-blue-400">// 常量值不能被修改</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>变量命名规则：</strong></p>
            <ul class="list-disc pl-6 mb-4">
                <li>只能包含字母、数字、符号 <code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">$</code> 和下划线 <code class="bg-slate-800 px-2 py-1 rounded text-yellow-300">_</code></li>
                <li>首字符不能是数字</li>
                <li>区分大小写</li>
                <li>使用驼峰命名法（camelCase）</li>
            </ul>
        
            </div>

        </section>

        <section id="section-2" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">2. 数据类型 (Data Types)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 动态类型，支持多种基本数据类型</h4>

            <p class="mb-4">JavaScript 中的基本数据类型包括：数字、字符串、布尔值、null、undefined、symbol 和 bigint。JavaScript 是动态类型语言，变量类型在运行时确定。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">number</span> = <span class="text-yellow-400">42</span>; <span class="text-blue-400">// 数字</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">string</span> = <span class="text-green-300">"Hello"</span>; <span class="text-blue-400">// 字符串</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">boolean</span> = <span class="text-purple-400">true</span>; <span class="text-blue-400">// 布尔值</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">empty</span> = <span class="text-purple-400">null</span>; <span class="text-blue-400">// 空值</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">notDefined</span>; <span class="text-blue-400">// undefined</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">unique</span> = <span class="text-purple-400">Symbol</span>(<span class="text-green-300">"id"</span>); <span class="text-blue-400">// Symbol</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">bigNumber</span> = <span class="text-purple-400">BigInt</span>(<span class="text-yellow-400">123456789012345678901234567890n</span>); <span class="text-blue-400">// BigInt</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>数字类型 (Number)：</strong></p>
            <p class="mb-4">JavaScript 中的数字可以是整数或浮点数。还包括特殊值 Infinity、-Infinity 和 NaN。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">integer</span> = <span class="text-yellow-400">123</span>; <span class="text-blue-400">// 整数</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">float</span> = <span class="text-yellow-400">12.34</span>; <span class="text-blue-400">// 浮点数</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">infinity</span> = <span class="text-blue-300">Infinity</span>; <span class="text-blue-400">// 无穷大</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">notANumber</span> = <span class="text-blue-300">NaN</span>; <span class="text-blue-400">// "Not a Number" - 运算失败</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>字符串类型 (String)：</strong></p>
            <p class="mb-4">字符串必须用引号括起来，可以是单引号、双引号或反引号。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">single</span> = <span class="text-green-300">'单引号字符串'</span>;</div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">double</span> = <span class="text-green-300">"双引号字符串"</span>;</div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">backticks</span> = <span class="text-green-300">`模板字符串，可以包含变量 ${</span><span class="text-blue-300">single</span><span class="text-green-300">}`</span>;</div>
            </div>
            <p class="mb-4 mt-6"><strong>布尔类型 (Boolean)：</strong></p>
            <p class="mb-4">布尔类型只有两个值：true 和 false。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">isGreater</span> = <span class="text-blue-300">4</span> > <span class="text-blue-300">1</span>; <span class="text-blue-400">// true</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">isLess</span> = <span class="text-blue-300">2</span> > <span class="text-blue-300">5</span>; <span class="text-blue-400">// false</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>特殊值 null 和 undefined：</strong></p>
            <p class="mb-4">null 是一个特殊值，表示"空"或"不存在"。undefined 表示变量已声明但未赋值。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">emptyIsUnknown</span> = <span class="text-purple-400">null</span>; <span class="text-blue-400">// 没有值</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">age</span>;</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">age</span>); <span class="text-blue-400">// undefined</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">typeof</span> <span class="text-blue-300">age</span>); <span class="text-blue-400">// "undefined"</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>Symbol 和 BigInt 类型：</strong></p>
            <p class="mb-4">Symbol 用于创建对象的唯一标识符。BigInt 用于表示任意精度的整数。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">id</span> = <span class="text-purple-400">Symbol</span>(<span class="text-green-300">"id"</span>); <span class="text-blue-400">// Symbol</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">bigInt</span> = <span class="text-blue-300">1234567890123456789012345678901234567890n</span>; <span class="text-blue-400">// BigInt</span></div>

        </section>

        <section id="section-3" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">3. 操作符 (Operators)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 丰富的操作符支持</h4>

            <p class="mb-4">JavaScript 支持多种操作符，包括算术、比较、逻辑等操作符。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">a</span> = <span class="text-yellow-400">10</span>;</div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">b</span> = <span class="text-yellow-400">3</span>;</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>); <span class="text-blue-400">// 加法: 13</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> - <span class="text-blue-300">b</span>); <span class="text-blue-400">// 减法: 7</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> * <span class="text-blue-300">b</span>); <span class="text-blue-400">// 乘法: 30</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> / <span class="text-blue-300">b</span>); <span class="text-blue-400">// 除法: 3.333...</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> % <span class="text-blue-300">b</span>); <span class="text-blue-400">// 取模: 1</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> ** <span class="text-blue-300">b</span>); <span class="text-blue-400">// 幂运算: 1000</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> > <span class="text-blue-300">b</span>); <span class="text-blue-400">// 比较: true</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> == <span class="text-blue-300">b</span>); <span class="text-blue-400">// 相等: false</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">a</span> != <span class="text-blue-300">b</span>); <span class="text-blue-400">// 不等: true</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>算术操作符：</strong></p>
            <p class="mb-4">JavaScript 提供了标准的算术操作符：加法(+)、减法(-)、乘法(*)、除法(/)、取模(%)、幂运算(**)。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">x</span> = <span class="text-yellow-400">5</span>, <span class="text-blue-300">y</span> = <span class="text-yellow-400">3</span>;</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">x</span> + <span class="text-blue-300">y</span>); <span class="text-blue-400">// 8</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">x</span> - <span class="text-blue-300">y</span>); <span class="text-blue-400">// 2</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">x</span> * <span class="text-blue-300">y</span>); <span class="text-blue-400">// 15</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">x</span> / <span class="text-blue-300">y</span>); <span class="text-blue-400">// 1.666...</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">x</span> % <span class="text-blue-300">y</span>); <span class="text-blue-400">// 2</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">x</span> ** <span class="text-blue-300">y</span>); <span class="text-blue-400">// 125</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>字符串连接操作符 (+)：</strong></p>
            <p class="mb-4">当 + 操作符用于字符串时，它会执行连接操作。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'My name is '</span> + <span class="text-green-300">'John'</span>); <span class="text-blue-400">// "My name is John"</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'1'</span> + <span class="text-green-300">'2'</span>); <span class="text-blue-400">// "12" (不是 3!)</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>赋值操作符：</strong></p>
            <p class="mb-4">除了基本的赋值操作符 (=)，还有复合赋值操作符。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">num</span> = <span class="text-yellow-400">5</span>;</div>
                <div class="code-line"><span class="text-blue-300">num</span> += <span class="text-yellow-400">5</span>; <span class="text-blue-400">// 等价于 num = num + 5; 结果是 10</span></div>
                <div class="code-line"><span class="text-blue-300">num</span> *= <span class="text-yellow-400">2</span>; <span class="text-blue-400">// 等价于 num = num * 2; 结果是 20</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">num</span>); <span class="text-blue-400">// 20</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>比较操作符：</strong></p>
            <p class="mb-4">比较操作符返回布尔值(true/false)。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> > <span class="text-yellow-400">1</span>); <span class="text-blue-400">// true</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> < <span class="text-yellow-400">1</span>); <span class="text-blue-400">// false</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> >= <span class="text-yellow-400">1</span>); <span class="text-blue-400">// true</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> <= <span class="text-yellow-400">1</span>); <span class="text-blue-400">// false</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> == <span class="text-green-300">'2'</span>); <span class="text-blue-400">// true (值相等)</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> === <span class="text-green-300">'2'</span>); <span class="text-blue-400">// false (类型不等)</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> != <span class="text-green-300">'3'</span>); <span class="text-blue-400">// true</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-yellow-400">2</span> !== <span class="text-green-300">'2'</span>); <span class="text-blue-400">// true (类型或值不等)</span></div>
            </div>
            <p class="mb-4 mt-6"><strong>逻辑操作符：</strong></p>
            <p class="mb-4">JavaScript 提供了三个逻辑操作符：与(&&)、或(||)、非(!)。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">true</span> && <span class="text-blue-300">false</span>); <span class="text-blue-400">// false</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">true</span> || <span class="text-blue-300">false</span>); <span class="text-blue-400">// true</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(!<span class="text-blue-300">true</span>); <span class="text-blue-400">// false</span></div>

        </section>

        <section id="section-4" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">4. 条件语句 (Conditional Statements)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 灵活的条件控制语句</h4>

            <p class="mb-4">使用 if...else 和 switch 语句来执行条件判断。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">score</span> = <span class="text-yellow-400">85</span>;</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">if</span> (<span class="text-blue-300">score</span> >= <span class="text-yellow-400">90</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"优秀"</span>);</div>
                <div class="code-line">} <span class="text-purple-400">else</span> <span class="text-purple-400">if</span> (<span class="text-blue-300">score</span> >= <span class="text-yellow-400">80</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"良好"</span>);</div>
                <div class="code-line">} <span class="text-purple-400">else</span> <span class="text-purple-400">if</span> (<span class="text-blue-300">score</span> >= <span class="text-yellow-400">60</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"及格"</span>);</div>
                <div class="code-line">} <span class="text-purple-400">else</span> {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"不及格"</span>);</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">day</span> = <span class="text-green-300">"周末"</span>;</div>
                <div class="code-line"><span class="text-purple-400">switch</span> (<span class="text-blue-300">day</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">case</span> <span class="text-green-300">"周末"</span>:</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"休息日"</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">break</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">case</span> <span class="text-green-300">"工作日"</span>:</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"上班"</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">break</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">default</span>:</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"未知"</span>);</div>
                <div class="code-line">}</div>
            </div>

        </section>

        <section id="section-5" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">5. 循环 (Loops)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 多种循环结构</h4>

            <p class="mb-4">JavaScript 提供多种循环结构来重复执行代码块。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// for 循环</span></div>
                <div class="code-line"><span class="text-purple-400">for</span> (<span class="text-purple-400">let</span> <span class="text-blue-300">i</span> = <span class="text-yellow-400">0</span>; <span class="text-blue-300">i</span> < <span class="text-yellow-400">5</span>; <span class="text-blue-300">i</span>++) {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"计数: "</span> + <span class="text-blue-300">i</span>);</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// while 循环</span></div>
                <div class="code-line"><span class="text-purple-400">let</span> <span class="text-blue-300">count</span> = <span class="text-yellow-400">0</span>;</div>
                <div class="code-line"><span class="text-purple-400">while</span> (<span class="text-blue-300">count</span> < <span class="text-yellow-400">3</span>) {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"计数: "</span> + <span class="text-blue-300">count</span>);</div>
                <div class="code-line">    <span class="text-blue-300">count</span>++;</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// for...of 循环 (遍历数组)</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">fruits</span> = [<span class="text-green-300">"苹果"</span>, <span class="text-green-300">"香蕉"</span>, <span class="text-green-300">"橙子"</span>];</div>
                <div class="code-line"><span class="text-purple-400">for</span> (<span class="text-purple-400">const</span> <span class="text-blue-300">fruit</span> <span class="text-purple-400">of</span> <span class="text-blue-300">fruits</span>) {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">fruit</span>);</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// for...in 循环 (遍历对象属性)</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">person</span> = { <span class="text-blue-300">name</span>: <span class="text-green-300">"张三"</span>, <span class="text-blue-300">age</span>: <span class="text-yellow-400">25</span> };</div>
                <div class="code-line"><span class="text-purple-400">for</span> (<span class="text-purple-400">const</span> <span class="text-blue-300">key</span> <span class="text-purple-400">in</span> <span class="text-blue-300">person</span>) {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">key</span> + <span class="text-green-300">": "</span> + <span class="text-blue-300">person</span>[<span class="text-blue-300">key</span>]);</div>
                <div class="code-line">}</div>
            </div>
        

            </div>


        </section>

        <section id="section-6" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">6. 函数 (Functions)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 函数是一等公民</h4>

            <p class="mb-4">函数是执行特定任务的可重用代码块。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 函数声明</span></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-blue-300">greet</span>(<span class="text-blue-300">name</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">return</span> <span class="text-green-300">"你好, "</span> + <span class="text-blue-300">name</span> + <span class="text-green-300">"!"</span>;</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 函数表达式</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">add</span> = <span class="text-purple-400">function</span>(<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;</div>
                <div class="code-line">};</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 箭头函数</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">multiply</span> = (<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>) => <span class="text-blue-300">a</span> * <span class="text-blue-300">b</span>;</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 调用函数</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">greet</span>(<span class="text-green-300">"李四"</span>)); <span class="text-blue-400">// 输出: 你好, 李四!</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">add</span>(<span class="text-yellow-400">5</span>, <span class="text-yellow-400">3</span>)); <span class="text-blue-400">// 输出: 8</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">multiply</span>(<span class="text-yellow-400">4</span>, <span class="text-yellow-400">6</span>)); <span class="text-blue-400">// 输出: 24</span></div>
            </div>
        

            </div>


        </section>

        <section id="section-7" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">7. 数组 (Arrays)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 灵活的数组操作</h4>

            <p class="mb-4">数组用于存储多个值的有序集合。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">numbers</span> = [<span class="text-yellow-400">1</span>, <span class="text-yellow-400">2</span>, <span class="text-yellow-400">3</span>, <span class="text-yellow-400">4</span>, <span class="text-yellow-400">5</span>];</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">mixedArray</span> = [<span class="text-green-300">"字符串"</span>, <span class="text-yellow-400">42</span>, <span class="text-purple-400">true</span>, { <span class="text-blue-300">name</span>: <span class="text-green-300">"对象"</span> }];</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 访问数组元素</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">numbers</span>[<span class="text-yellow-400">0</span>]); <span class="text-blue-400">// 输出: 1</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 数组方法</span></div>
                <div class="code-line"><span class="text-blue-300">numbers</span>.<span class="text-blue-300">push</span>(<span class="text-yellow-400">6</span>); <span class="text-blue-400">// 添加元素到末尾</span></div>
                <div class="code-line"><span class="text-blue-300">numbers</span>.<span class="text-blue-300">pop</span>(); <span class="text-blue-400">// 移除最后一个元素</span></div>
                <div class="code-line"><span class="text-blue-300">numbers</span>.<span class="text-blue-300">shift</span>(); <span class="text-blue-400">// 移除第一个元素</span></div>
                <div class="code-line"><span class="text-blue-300">numbers</span>.<span class="text-blue-300">unshift</span>(<span class="text-yellow-400">0</span>); <span class="text-blue-400">// 添加元素到开头</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 遍历数组</span></div>
                <div class="code-line"><span class="text-blue-300">numbers</span>.<span class="text-blue-300">forEach</span>((<span class="text-blue-300">num</span>) => {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">num</span> * <span class="text-yellow-400">2</span>);</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 数组映射</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">doubled</span> = <span class="text-blue-300">numbers</span>.<span class="text-blue-300">map</span>((<span class="text-blue-300">num</span>) => <span class="text-blue-300">num</span> * <span class="text-yellow-400">2</span>);</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">doubled</span>); <span class="text-blue-400">// [0, 4, 6, 8]</span></div>
            </div>
        

            </div>


        </section>

        <section id="section-8" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">8. 对象 (Objects)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 基于原型的对象系统</h4>

            <p class="mb-4">对象是键值对的集合，用于存储相关数据和功能。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 创建对象</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">person</span> = {</div>
                <div class="code-line">    <span class="text-blue-300">name</span>: <span class="text-green-300">"张三"</span>,</div>
                <div class="code-line">    <span class="text-blue-300">age</span>: <span class="text-yellow-400">25</span>,</div>
                <div class="code-line">    <span class="text-blue-300">city</span>: <span class="text-green-300">"北京"</span>,</div>
                <div class="code-line">    <span class="text-blue-300">greet</span>: <span class="text-purple-400">function</span>() {</div>
                <div class="code-line">        <span class="text-purple-400">return</span> <span class="text-green-300">"你好, 我是 "</span> + <span class="text-blue-300">this</span>.<span class="text-blue-300">name</span>;</div>
                <div class="code-line">    }</div>
                <div class="code-line">};</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 访问对象属性</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">person</span>.<span class="text-blue-300">name</span>); <span class="text-blue-400">// "张三"</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">person</span>[<span class="text-green-300">"age"</span>]); <span class="text-blue-400">// 25</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 修改对象属性</span></div>
                <div class="code-line"><span class="text-blue-300">person</span>.<span class="text-blue-300">age</span> = <span class="text-yellow-400">26</span>;</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 调用对象方法</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">person</span>.<span class="text-blue-300">greet</span>()); <span class="text-blue-400">// "你好, 我是 张三"</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// ES6 类语法</span></div>
                <div class="code-line"><span class="text-purple-400">class</span> <span class="text-blue-300">Student</span> {</div>
                <div class="code-line">    <span class="text-blue-300">constructor</span>(<span class="text-blue-300">name</span>, <span class="text-blue-300">grade</span>) {</div>
                <div class="code-line">        <span class="text-blue-300">this</span>.<span class="text-blue-300">name</span> = <span class="text-blue-300">name</span>;</div>
                <div class="code-line">        <span class="text-blue-300">this</span>.<span class="text-blue-300">grade</span> = <span class="text-blue-300">grade</span>;</div>
                <div class="code-line">    }</div>
                <div class="code-line">    </div>
                <div class="code-line">    <span class="text-blue-300">introduce</span>() {</div>
                <div class="code-line">        <span class="text-purple-400">return</span> <span class="text-green-300">"我是 "</span> + <span class="text-blue-300">this</span>.<span class="text-blue-300">name</span> + <span class="text-green-300">", 年级 "</span> + <span class="text-blue-300">this</span>.<span class="text-blue-300">grade</span>;</div>
                <div class="code-line">    }</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">student1</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">Student</span>(<span class="text-green-300">"小明"</span>, <span class="text-green-300">"高一"</span>);</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">student1</span>.<span class="text-blue-300">introduce</span>());</div>
            </div>
        

            </div>


        </section>

        <section id="section-9" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">9. DOM 操作 (DOM Manipulation)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 强大的 DOM 操作能力</h4>

            <p class="mb-4">DOM (文档对象模型) 允许 JavaScript 操作 HTML 元素。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 选择元素</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">element</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementById</span>(<span class="text-green-300">"myElement"</span>);</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">elements</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementsByClassName</span>(<span class="text-green-300">"myClass"</span>);</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">header</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">querySelector</span>(<span class="text-green-300">"header"</span>);</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">allButtons</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">querySelectorAll</span>(<span class="text-green-300">"button"</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 修改元素内容</span></div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">innerHTML</span> = <span class="text-green-300">"&lt;strong&gt;新内容&lt;/strong&gt;"</span>;</div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">textContent</span> = <span class="text-green-300">"纯文本内容"</span>;</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 修改样式</span></div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">style</span>.<span class="text-blue-300">color</span> = <span class="text-green-300">"red"</span>;</div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">classList</span>.<span class="text-blue-300">add</span>(<span class="text-green-300">"highlight"</span>);</div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">classList</span>.<span class="text-blue-300">remove</span>(<span class="text-green-300">"oldClass"</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 创建和添加元素</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">newDiv</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">createElement</span>(<span class="text-green-300">"div"</span>);</div>
                <div class="code-line"><span class="text-blue-300">newDiv</span>.<span class="text-blue-300">textContent</span> = <span class="text-green-300">"动态添加的元素"</span>;</div>
                <div class="code-line"><span class="text-blue-300">document</span>.<span class="text-blue-300">body</span>.<span class="text-blue-300">appendChild</span>(<span class="text-blue-300">newDiv</span>);</div>
            </div>
        

            </div>


        </section>

        <section id="section-10" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">10. 事件 (Events)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 事件驱动编程模型</h4>

            <p class="mb-4">JavaScript 可以响应用户交互和浏览器事件。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 获取按钮元素</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">button</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementById</span>(<span class="text-green-300">"myButton"</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 添加事件监听器</span></div>
                <div class="code-line"><span class="text-blue-300">button</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">"click"</span>, <span class="text-purple-400">function</span>(<span class="text-blue-300">event</span>) {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"按钮被点击了！"</span>);</div>
                <div class="code-line">    <span class="text-blue-300">event</span>.<span class="text-blue-300">target</span>.<span class="text-blue-300">style</span>.<span class="text-blue-300">backgroundColor</span> = <span class="text-green-300">"blue"</span>;</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 鼠标事件</span></div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">"mouseover"</span>, (<span class="text-blue-300">e</span>) => <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"鼠标进入"</span>));</div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">"mouseout"</span>, (<span class="text-blue-300">e</span>) => <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"鼠标离开"</span>));</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 键盘事件</span></div>
                <div class="code-line"><span class="text-blue-300">document</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">"keydown"</span>, (<span class="text-blue-300">e</span>) => {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"按下了键: "</span> + <span class="text-blue-300">e</span>.<span class="text-blue-300">key</span>);</div>
                <div class="code-line">    <span class="text-purple-400">if</span> (<span class="text-blue-300">e</span>.<span class="text-blue-300">key</span> === <span class="text-green-300">"Enter"</span>) {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"回车键被按下"</span>);</div>
                <div class="code-line">    }</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 表单事件</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">form</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">querySelector</span>(<span class="text-green-300">"form"</span>);</div>
                <div class="code-line"><span class="text-blue-300">form</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">"submit"</span>, (<span class="text-blue-300">e</span>) => {</div>
                <div class="code-line">    <span class="text-blue-300">e</span>.<span class="text-blue-300">preventDefault</span>(); <span class="text-blue-400">// 阻止表单默认提交</span></div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"表单提交被拦截"</span>);</div>
                <div class="code-line">});</div>
            </div>
        

            </div>


        </section>

        <section id="section-11" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">11. 异步编程 (Asynchronous)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 单线程异步编程模型</h4>

            <p class="mb-4">JavaScript 的异步编程模型允许非阻塞操作。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// Promise 示例</span></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-blue-300">delay</span>(<span class="text-blue-300">ms</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">return</span> <span class="text-purple-400">new</span> <span class="text-blue-300">Promise</span>((<span class="text-blue-300">resolve</span>) => {</div>
                <div class="code-line">        <span class="text-blue-300">setTimeout</span>(() => <span class="text-blue-300">resolve</span>(<span class="text-green-300">`延迟 ${<span class="text-blue-300">ms</span>} 毫秒完成`), <span class="text-blue-300">ms</span>);</div>
                <div class="code-line">    });</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 使用 Promise</span></div>
                <div class="code-line"><span class="text-blue-300">delay</span>(<span class="text-yellow-400">1000</span>)</div>
                <div class="code-line">    .<span class="text-blue-300">then</span>((<span class="text-blue-300">result</span>) => {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">result</span>);</div>
                <div class="code-line">        <span class="text-purple-400">return</span> <span class="text-blue-300">delay</span>(<span class="text-yellow-400">500</span>);</div>
                <div class="code-line">    })</div>
                <div class="code-line">    .<span class="text-blue-300">then</span>((<span class="text-blue-300">result</span>) => {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">result</span>);</div>
                <div class="code-line">    })</div>
                <div class="code-line">    .<span class="text-blue-300">catch</span>((<span class="text-blue-300">error</span>) => {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">"发生错误: "</span> + <span class="text-blue-300">error</span>);</div>
                <div class="code-line">    });</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// async/await 语法</span></div>
                <div class="code-line"><span class="text-purple-400">async</span> <span class="text-purple-400">function</span> <span class="text-blue-300">asyncExample</span>() {</div>
                <div class="code-line">    <span class="text-purple-400">try</span> {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"开始异步操作"</span>);</div>
                <div class="code-line">        </div>
                <div class="code-line">        <span class="text-purple-400">const</span> <span class="text-blue-300">result1</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">step1Promise</span>();</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"获得结果1:"</span>, <span class="text-blue-300">result1</span>);</div>
                <div class="code-line">        </div>
                <div class="code-line">        <span class="text-purple-400">const</span> <span class="text-blue-300">result2</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">step2Promise</span>(<span class="text-blue-300">result1</span>);</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"获得结果2:"</span>, <span class="text-blue-300">result2</span>);</div>
                <div class="code-line">        </div>
                <div class="code-line">        <span class="text-purple-400">const</span> <span class="text-blue-300">result3</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">step3Promise</span>(<span class="text-blue-300">result2</span>);</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"获得结果3:"</span>, <span class="text-blue-300">result3</span>);</div>
                <div class="code-line">        </div>
                <div class="code-line">        <span class="text-purple-400">return</span> <span class="text-blue-300">result3</span>;</div>
                <div class="code-line">    } <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">"async函数中捕获错误:"</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">        <span class="text-purple-400">throw</span> <span class="text-blue-300">error</span>;</div>
                <div class="code-line">    }</div>
                <div class="code-line">}</div>
            </div>
        

            </div>


        </section>

        <section id="section-12" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">12. 错误处理 (Error Handling)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 完善的错误处理机制</h4>

            <p class="mb-4">JavaScript 提供 try-catch-finally 语句来处理错误。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 基本错误处理</span></div>
                <div class="code-line"><span class="text-purple-400">try</span> {</div>
                <div class="code-line">    <span class="text-purple-400">let</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">someRiskyOperation</span>();</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">result</span>);</div>
                <div class="code-line">} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">"发生错误:"</span>, <span class="text-blue-300">error</span>.<span class="text-blue-300">message</span>);</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 自定义错误</span></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-blue-300">validateAge</span>(<span class="text-blue-300">age</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">if</span> (<span class="text-blue-300">age</span> < <span class="text-yellow-400">0</span>) {</div>
                <div class="code-line">        <span class="text-purple-400">throw</span> <span class="text-purple-400">new</span> <span class="text-blue-300">Error</span>(<span class="text-green-300">"年龄不能为负数"</span>);</div>
                <div class="code-line">    }</div>
                <div class="code-line">    <span class="text-purple-400">return</span> <span class="text-blue-300">age</span>;</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 使用 try-catch-finally</span></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-blue-300">processUserData</span>(<span class="text-blue-300">userData</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">try</span> {</div>
                <div class="code-line">        <span class="text-purple-400">if</span> (!<span class="text-blue-300">userData</span> || <span class="text-blue-300">typeof</span> <span class="text-blue-300">userData</span> !== <span class="text-green-300">"object"</span>) {</div>
                <div class="code-line">            <span class="text-purple-400">throw</span> <span class="text-purple-400">new</span> <span class="text-blue-300">Error</span>(<span class="text-green-300">"用户数据格式不正确"</span>);</div>
                <div class="code-line">        }</div>
                <div class="code-line">        </div>
                <div class="code-line">        <span class="text-purple-400">if</span> (<span class="text-blue-300">userData</span>.<span class="text-blue-300">age</span> < <span class="text-yellow-400">0</span>) {</div>
                <div class="code-line">            <span class="text-purple-400">throw</span> <span class="text-purple-400">new</span> <span class="text-blue-300">Error</span>(<span class="text-green-300">"年龄不能为负数"</span>);</div>
                <div class="code-line">        }</div>
                <div class="code-line">        </div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"处理用户数据:"</span>, <span class="text-blue-300">userData</span>.<span class="text-blue-300">name</span>);</div>
                <div class="code-line">        <span class="text-purple-400">return</span> <span class="text-blue-300">userData</span>;</div>
                <div class="code-line">    } <span class="text-purple-400">finally</span> {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"数据处理完成，清理资源"</span>);</div>
                <div class="code-line">    }</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 使用示例</span></div>
                <div class="code-line"><span class="text-blue-300">processUserData</span>({<span class="text-blue-300">name</span>: <span class="text-green-300">"张三"</span>, <span class="text-blue-300">age</span>: <span class="text-yellow-400">25</span>});</div>
                <div class="code-line"><span class="text-blue-300">processUserData</span>({<span class="text-blue-300">name</span>: <span class="text-green-300">"李四"</span>, <span class="text-blue-300">age</span>: -<span class="text-yellow-400">5</span>}); <span class="text-blue-400">// 触发错误</span></div>
            </div>
        

            </div>


        </section>

        <section id="section-13" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">13. 模块化 (Modularity)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - ES6 模块化支持</h4>

            <p class="mb-4">JavaScript 模块化有助于组织和重用代码。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// math.js (ES6 模块示例)</span></div>
                <div class="code-line"><span class="text-purple-400">export</span> <span class="text-purple-400">function</span> <span class="text-blue-300">add</span>(<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">export</span> <span class="text-purple-400">function</span> <span class="text-blue-300">multiply</span>(<span class="text-blue-300">a</span>, <span class="text-blue-300">b</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">return</span> <span class="text-blue-300">a</span> * <span class="text-blue-300">b</span>;</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">PI</span> = <span class="text-yellow-400">3.14159</span>;</div>
                <div class="code-line"><span class="text-purple-400">export</span> { <span class="text-blue-300">PI</span> };</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// main.js (导入模块)</span></div>
                <div class="code-line"><span class="text-purple-400">import</span> { <span class="text-blue-300">add</span>, <span class="text-blue-300">multiply</span>, <span class="text-blue-300">PI</span> } <span class="text-purple-400">from</span> <span class="text-green-300">'./math.js'</span>;</div>
                <div class="code-line"><span class="text-purple-400">import</span> * <span class="text-purple-400">as</span> <span class="text-blue-300">math</span> <span class="text-purple-400">from</span> <span class="text-green-300">'./math.js'</span>;</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">add</span>(<span class="text-yellow-400">5</span>, <span class="text-yellow-400">3</span>)); <span class="text-blue-400">// 8</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">multiply</span>(<span class="text-yellow-400">4</span>, <span class="text-yellow-400">7</span>)); <span class="text-blue-400">// 28</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">PI</span>); <span class="text-blue-400">// 3.14159</span></div>
            </div>
        

            </div>


        </section>

        <section id="section-14" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">14. ES6+ 特性 (ES6+ Features)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 现代 ES6+ 语法特性</h4>

            <p class="mb-4">ES6 及更高版本引入了许多现代 JavaScript 特性。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 解构赋值</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">person</span> = { <span class="text-blue-300">name</span>: <span class="text-green-300">"张三"</span>, <span class="text-blue-300">age</span>: <span class="text-yellow-400">25</span>, <span class="text-blue-300">city</span>: <span class="text-green-300">"北京"</span> };</div>
                <div class="code-line"><span class="text-purple-400">const</span> { <span class="text-blue-300">name</span>, <span class="text-blue-300">age</span> } = <span class="text-blue-300">person</span>;</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">name</span>, <span class="text-blue-300">age</span>); <span class="text-blue-400">// "张三" 25</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">numbers</span> = [<span class="text-yellow-400">1</span>, <span class="text-yellow-400">2</span>, <span class="text-yellow-400">3</span>, <span class="text-yellow-400">4</span>];</div>
                <div class="code-line"><span class="text-purple-400">const</span> [<span class="text-blue-300">first</span>, <span class="text-blue-300">second</span>, ...<span class="text-blue-300">rest</span>] = <span class="text-blue-300">numbers</span>;</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">first</span>, <span class="text-blue-300">second</span>, <span class="text-blue-300">rest</span>); <span class="text-blue-400">// 1 2 [3, 4]</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 模板字符串</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">greeting</span> = <span class="text-green-300">`你好, ${<span class="text-blue-300">name</span>}! 你今年 ${<span class="text-blue-300">age</span>} 岁。`</span>;</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">greeting</span>); <span class="text-blue-400">// "你好, 张三! 你今年 25 岁。"</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 扩展运算符</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">moreNumbers</span> = [...<span class="text-blue-300">numbers</span>, <span class="text-yellow-400">5</span>, <span class="text-yellow-400">6</span>];</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">mergedPerson</span> = { ...<span class="text-blue-300">person</span>, <span class="text-blue-300">job</span>: <span class="text-green-300">"工程师"</span> };</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 默认参数</span></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-blue-300">greet</span>(<span class="text-blue-300">name</span> = <span class="text-green-300">"访客"</span>, <span class="text-blue-300">greeting</span> = <span class="text-green-300">"你好"</span>) {</div>
                <div class="code-line">    <span class="text-purple-400">return</span> `${<span class="text-blue-300">greeting</span>}, ${<span class="text-blue-300">name</span>}!`;</div>
                <div class="code-line">}</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">greet</span>()); <span class="text-blue-400">// "你好, 访客!"</span></div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">greet</span>(<span class="text-green-300">"李四"</span>)); <span class="text-blue-400">// "你好, 李四!"</span></div>
            </div>
        

            </div>


        </section>

        <section id="section-15" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">15. 浏览器 API (Browser APIs)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 丰富的浏览器 API</h4>

            <p class="mb-4">现代浏览器提供了丰富的 API 来实现各种功能。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// localStorage 和 sessionStorage</span></div>
                <div class="code-line"><span class="text-blue-300">localStorage</span>.<span class="text-blue-300">setItem</span>(<span class="text-green-300">"username"</span>, <span class="text-green-300">"张三"</span>);</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">username</span> = <span class="text-blue-300">localStorage</span>.<span class="text-blue-300">getItem</span>(<span class="text-green-300">"username"</span>);</div>
                <div class="code-line"><span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">username</span>); <span class="text-blue-400">// "张三"</span></div>
                <div class="code-line"><span class="text-blue-300">sessionStorage</span>.<span class="text-blue-300">setItem</span>(<span class="text-green-300">"sessionData"</span>, <span class="text-green-300">"临时数据"</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// Fetch API</span></div>
                <div class="code-line"><span class="text-purple-400">async</span> <span class="text-purple-400">function</span> <span class="text-blue-300">fetchData</span>() {</div>
                <div class="code-line">    <span class="text-purple-400">try</span> {</div>
                <div class="code-line">        <span class="text-purple-400">const</span> <span class="text-blue-300">response</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">fetch</span>(<span class="text-green-300">'https://api.example.com/data'</span>);</div>
                <div class="code-line">        <span class="text-purple-400">const</span> <span class="text-blue-300">data</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">response</span>.<span class="text-blue-300">json</span>();</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-blue-300">data</span>);</div>
                <div class="code-line">        <span class="text-purple-400">return</span> <span class="text-blue-300">data</span>;</div>
                <div class="code-line">    } <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {</div>
                <div class="code-line">        <span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">'获取数据失败:'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">    }</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 地理位置 API</span></div>
                <div class="code-line"><span class="text-blue-300">navigator</span>.<span class="text-blue-300">geolocation</span>.<span class="text-blue-300">getCurrentPosition</span>(</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;(<span class="text-blue-300">position</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'纬度:'</span>, <span class="text-blue-300">position</span>.<span class="text-blue-300">coords</span>.<span class="text-blue-300">latitude</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'经度:'</span>, <span class="text-blue-300">position</span>.<span class="text-blue-300">coords</span>.<span class="text-blue-300">longitude</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;(<span class="text-blue-300">error</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">'获取位置失败:'</span>, <span class="text-blue-300">error</span>.<span class="text-blue-300">message</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 计时器 API</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">timerId</span> = <span class="text-blue-300">setTimeout</span>(() => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"延迟执行"</span>);</div>
                <div class="code-line">}, <span class="text-yellow-400">2000</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-300">clearTimeout</span>(<span class="text-blue-300">timerId</span>); <span class="text-blue-400">// 取消计时器</span></div>
            </div>
        

            </div>


        </section>

        <section id="section-16" class="mb-16">


            <h2 class="text-3xl font-bold mb-8 text-center">


                <span class="gradient-text">16. 浏览器：文档，事件，接口 (Browser: Document, Events, Interfaces)</span>


            </h2>


            


            <div class="language-content" data-lang="javascript">


                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - 文档、事件与接口</h4>

            <p class="mb-4">浏览器提供了丰富的API来操作文档、处理事件和实现各种接口。</p>
            
            <h3 class="text-2xl font-semibold mb-4 text-blue-300">文档对象模型 (DOM)</h3>
            <p class="mb-4">DOM允许JavaScript访问和操作HTML文档的元素。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 获取元素</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">element</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementById</span>(<span class="text-green-300">"myId"</span>);</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">elements</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementsByClassName</span>(<span class="text-green-300">"myClass"</span>);</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">queryElement</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">querySelector</span>(<span class="text-green-300">".myClass"</span>);</div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">queryElements</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">querySelectorAll</span>(<span class="text-green-300">"p"</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 操作元素</span></div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">innerHTML</span> = <span class="text-green-300">"新的内容"</span>;</div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">style</span>.<span class="text-blue-300">color</span> = <span class="text-green-300">"red"</span>;</div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">setAttribute</span>(<span class="text-green-300">"class"</span>, <span class="text-green-300">"newClass"</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 创建和插入元素</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">newDiv</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">createElement</span>(<span class="text-green-300">"div"</span>);</div>
                <div class="code-line"><span class="text-blue-300">newDiv</span>.<span class="text-blue-300">textContent</span> = <span class="text-green-300">"新创建的元素"</span>;</div>
                <div class="code-line"><span class="text-blue-300">newDiv</span>.<span class="text-blue-300">className</span> = <span class="text-green-300">"dynamic-element"</span>;</div>
                <div class="code-line"><span class="text-blue-300">document</span>.<span class="text-blue-300">body</span>.<span class="text-blue-300">appendChild</span>(<span class="text-blue-300">newDiv</span>);</div>
            </div>
            
            <h3 class="text-2xl font-semibold mt-6 mb-4 text-blue-300">事件处理 (Event Handling)</h3>
            <p class="mb-4">事件是用户与网页交互的基础，包括点击、键盘输入、鼠标移动等。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// 事件监听器</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">button</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementById</span>(<span class="text-green-300">"myButton"</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 添加事件监听器</span></div>
                <div class="code-line"><span class="text-blue-300">button</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'click'</span>, (<span class="text-blue-300">event</span>) => {</div>
                <div class="code-line">    <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'按钮被点击了！'</span>);</div>
                <div class="code-line">    <span class="text-blue-300">event</span>.<span class="text-blue-300">preventDefault</span>(); <span class="text-blue-400">// 阻止默认行为</span></div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 键盘事件</span></div>
                <div class="code-line"><span class="text-blue-300">document</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'keydown'</span>, (<span class="text-blue-300">event</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">`按键: ${</span><span class="text-blue-300">event</span>.<span class="text-blue-300">key</span><span class="text-green-300">}`</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">event</span>.<span class="text-blue-300">key</span> === <span class="text-green-300">'Escape'</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"ESC键被按下"</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 鼠标事件</span></div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'mouseenter'</span>, (<span class="text-blue-300">event</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">event</span>.<span class="text-blue-300">target</span>.<span class="text-blue-300">style</span>.<span class="text-blue-300">backgroundColor</span> = <span class="text-green-300">'lightblue'</span>;</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-300">element</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'mouseleave'</span>, (<span class="text-blue-300">event</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">event</span>.<span class="text-blue-300">target</span>.<span class="text-blue-300">style</span>.<span class="text-blue-300">backgroundColor</span> = <span class="text-green-300">''</span>;</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 触摸事件（移动端）</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">touchArea</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementById</span>(<span class="text-green-300">'touchArea'</span>);</div>
                <div class="code-line"><span class="text-blue-300">touchArea</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'touchstart'</span>, (<span class="text-blue-300">event</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">touch</span> = <span class="text-blue-300">event</span>.<span class="text-blue-300">touches</span>[<span class="text-yellow-400">0</span>];</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">`触摸位置: (${</span><span class="text-blue-300">touch</span>.<span class="text-blue-300">clientX</span><span class="text-green-300">}, ${</span><span class="text-blue-300">touch</span>.<span class="text-blue-300">clientY</span><span class="text-green-300">})`</span>);</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 滚动事件</span></div>
                <div class="code-line"><span class="text-blue-300">window</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'scroll'</span>, (<span class="text-blue-300">event</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">scrollY</span> = <span class="text-blue-300">window</span>.<span class="text-blue-300">scrollY</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">scrollY</span> > <span class="text-yellow-400">100</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">"已滚动超过100像素"</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">});</div>
            </div>
            </div>
            
            <h3 class="text-2xl font-semibold mt-6 mb-4 text-blue-300">浏览器接口 (Browser Interfaces)</h3>
            <p class="mb-4">现代浏览器提供了一系列API来实现高级功能。</p>
            <div class="code-block">
                <div class="code-line"><span class="text-blue-400">// History API - 操作浏览器历史记录</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">state</span> = { <span class="text-blue-300">page</span>: <span class="text-green-300">'home'</span> };</div>
                <div class="code-line"><span class="text-blue-300">history</span>.<span class="text-blue-300">pushState</span>(<span class="text-blue-300">state</span>, <span class="text-green-300">'Home'</span>, <span class="text-green-300">'/home'</span>);</div>
                <div class="code-line"><span class="text-blue-300">history</span>.<span class="text-blue-300">back</span>(); <span class="text-blue-400">// 返回上一页</span></div>
                <div class="code-line"><span class="text-blue-300">history</span>.<span class="text-blue-300">forward</span>(); <span class="text-blue-400">// 前进一页</span></div>
                <div class="code-line"><span class="text-blue-300">history</span>.<span class="text-blue-300">go</span>(-<span class="text-yellow-400">1</span>); <span class="text-blue-400">// 后退一页</span></div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 获取当前历史记录状态</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">currentState</span> = <span class="text-blue-300">history</span>.<span class="text-blue-300">state</span>;</div>
                <div class="code-line"><span class="text-purple-400">if</span> (<span class="text-blue-300">currentState</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">`当前页面: ${</span><span class="text-blue-300">currentState</span>.<span class="text-blue-300">page</span><span class="text-green-300">}`</span>);</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 处理历史记录变化事件</span></div>
                <div class="code-line"><span class="text-blue-300">window</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'popstate'</span>, (<span class="text-blue-300">event</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'历史记录已更改'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'新状态:', <span class="text-blue-300">event</span>.<span class="text-blue-300">state</span>);</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// Clipboard API - 剪贴板操作</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-blue-300">copyToClipboard</span>(<span class="text-blue-300">text</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">navigator</span>.<span class="text-blue-300">clipboard</span>.<span class="text-blue-300">writeText</span>(<span class="text-blue-300">text</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'文本已复制到剪贴板'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">err</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">'复制失败:', <span class="text-blue-300">err</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 从剪贴板读取文本</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-blue-300">readFromClipboard</span>() {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">text</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">navigator</span>.<span class="text-blue-300">clipboard</span>.<span class="text-blue-300">readText</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'剪贴板内容:', <span class="text-blue-300">text</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">text</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">err</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">'读取剪贴板失败:', <span class="text-blue-300">err</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// Intersection Observer API - 检测元素是否在视口中</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">observerOptions</span> = {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">root</span>: <span class="text-blue-300">null</span>, <span class="text-blue-400">// 使用视口</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">rootMargin</span>: <span class="text-green-300">'0px'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">threshold</span>: <span class="text-yellow-400">0.5</span> <span class="text-blue-400">// 当50%的元素可见时触发</span></div>
                <div class="code-line">};</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">observer</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">IntersectionObserver</span>((<span class="text-blue-300">entries</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entries</span>.<span class="text-blue-300">forEach</span>((<span class="text-blue-300">entry</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">entry</span>.<span class="text-blue-300">isIntersecting</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'元素进入视口'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entry</span>.<span class="text-blue-300">target</span>.<span class="text-blue-300">classList</span>.<span class="text-blue-300">add</span>(<span class="text-green-300">'visible'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">else</span> {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'元素离开视口'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entry</span>.<span class="text-blue-300">target</span>.<span class="text-blue-300">classList</span>.<span class="text-blue-300">remove</span>(<span class="text-green-300">'visible'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line">}, <span class="text-blue-300">observerOptions</span>);</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 开始观察元素</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">observeElements</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">querySelectorAll</span>(<span class="text-green-300">'.observe-element'</span>);</div>
                <div class="code-line"><span class="text-blue-300">observeElements</span>.<span class="text-blue-300">forEach</span>((<span class="text-blue-300">el</span>) => <span class="text-blue-300">observer</span>.<span class="text-blue-300">observe</span>(<span class="text-blue-300">el</span>));</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// Resize Observer API - 监听元素尺寸变化</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">resizeObserver</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">ResizeObserver</span>((<span class="text-blue-300">entries</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">for</span> (<span class="text-purple-400">const</span> <span class="text-blue-300">entry</span> <span class="text-purple-400">of</span> <span class="text-blue-300">entries</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">`元素尺寸: ${</span><span class="text-blue-300">entry</span>.<span class="text-blue-300">contentRect</span>.<span class="text-blue-300">width</span><span class="text-green-300">} x ${</span><span class="text-blue-300">entry</span>.<span class="text-blue-300">contentRect</span>.<span class="text-blue-300">height</span><span class="text-green-300">}`</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-300">resizeObserver</span>.<span class="text-blue-300">observe</span>(<span class="text-blue-300">document</span>.<span class="text-blue-300">getElementById</span>(<span class="text-green-300">'resizeTarget'</span>));</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// Mutation Observer API - 监听DOM变化</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">mutationObserver</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">MutationObserver</span>((<span class="text-blue-300">mutations</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">mutations</span>.<span class="text-blue-300">forEach</span>((<span class="text-blue-300">mutation</span>) => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">mutation</span>.<span class="text-blue-300">type</span> === <span class="text-green-300">'childList'</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">`添加了 ${</span><span class="text-blue-300">mutation</span>.<span class="text-blue-300">addedNodes</span>.<span class="text-blue-300">length</span><span class="text-green-300">} 个节点`</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">`删除了 ${</span><span class="text-blue-300">mutation</span>.<span class="text-blue-300">removedNodes</span>.<span class="text-blue-300">length</span><span class="text-green-300">} 个节点`</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-300">mutationObserver</span>.<span class="text-blue-300">observe</span>(<span class="text-blue-300">document</span>.<span class="text-blue-300">body</span>, {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">childList</span>: <span class="text-purple-400">true</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">subtree</span>: <span class="text-purple-400">true</span></div>
                <div class="code-line">});</div>
            </div>
        

            </div>


        </section>

        <!-- 17. WebTransport 数据传输 -->
        <section id="section-17" class="mb-16">

            <h2 class="text-3xl font-bold mb-8 text-center">

                <span class="gradient-text">17. WebTransport 数据传输</span>

            </h2>

            

            <div class="language-content" data-lang="javascript">

                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - WebTransport 高效数据传输</h4>

            <p class="text-slate-300 mb-4">WebTransport 是基于 HTTP/3 的现代传输协议，提供双向、加密、低延迟的数据传输，适用于实时应用如游戏、视频会议和金融交易。</p>

            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="code-line"><span class="text-blue-400">// 创建 WebTransport 连接</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">connectWebTransport</span>() {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">transport</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">WebTransport</span>(<span class="text-green-300">'https://example.com/wt'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">transport</span>.<span class="text-blue-300">ready</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'WebTransport 连接已建立！'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理连接关闭</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">transport</span>.<span class="text-blue-300">closed</span>.<span class="text-blue-300">then</span>(<span class="text-blue-300">()</span> => {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'WebTransport 连接已关闭！'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'WebTransport 连接失败：'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
            </div>

            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="code-line"><span class="text-blue-400">// 创建双向流</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">createBidirectionalStream</span>(<span class="text-blue-300">transport</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">stream</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">transport</span>.<span class="text-blue-300">createBidirectionalStream</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">writer</span> = <span class="text-blue-300">stream</span>.<span class="text-blue-300">writable</span>.<span class="text-blue-300">getWriter</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">reader</span> = <span class="text-blue-300">stream</span>.<span class="text-blue-300">readable</span>.<span class="text-blue-300">getReader</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 发送数据</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">data</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">TextEncoder</span>().<span class="text-blue-300">encode</span>(<span class="text-green-300">'Hello WebTransport!'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">writer</span>.<span class="text-blue-300">write</span>(<span class="text-blue-300">data</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">writer</span>.<span class="text-blue-300">close</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 接收数据</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">result</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">reader</span>.<span class="text-blue-300">read</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (!<span class="text-blue-300">result</span>.<span class="text-blue-300">done</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">response</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">TextDecoder</span>().<span class="text-blue-300">decode</span>(<span class="text-blue-300">result</span>.<span class="text-blue-300">value</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'收到响应：'</span>, <span class="text-blue-300">response</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">reader</span>.<span class="text-blue-300">releaseLock</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'流操作失败：'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
            </div>

            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="code-line"><span class="text-blue-400">// 发送和接收数据报</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">setupDatagrams</span>(<span class="text-blue-300">transport</span>) {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 发送数据报</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">datagramWriter</span> = <span class="text-blue-300">transport</span>.<span class="text-blue-300">datagrams</span>.<span class="text-blue-300">writable</span>.<span class="text-blue-300">getWriter</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">datagramData</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">TextEncoder</span>().<span class="text-blue-300">encode</span>(<span class="text-green-300">'Datagram message'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">datagramWriter</span>.<span class="text-blue-300">write</span>(<span class="text-blue-300">datagramData</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 接收数据报</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">datagramReader</span> = <span class="text-blue-300">transport</span>.<span class="text-blue-300">datagrams</span>.<span class="text-blue-300">readable</span>.<span class="text-blue-300">getReader</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">async function</span> <span class="text-yellow-300">readDatagrams</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">while</span> (<span class="text-purple-400">true</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">result</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">datagramReader</span>.<span class="text-blue-300">read</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">result</span>.<span class="text-blue-300">done</span>) <span class="text-purple-400">break</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">message</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">TextDecoder</span>().<span class="text-blue-300">decode</span>(<span class="text-blue-300">result</span>.<span class="text-blue-300">value</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'收到数据报：'</span>, <span class="text-blue-300">message</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">readDatagrams</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'数据报操作失败：'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
            </div>
        
            </div>

        </section>

        <!-- 18. WebCodecs 编解码 -->
        <section id="section-18" class="mb-16">

            <h2 class="text-3xl font-bold mb-8 text-center">

                <span class="gradient-text">18. WebCodecs 编解码</span>

            </h2>

            

            <div class="language-content" data-lang="javascript">

                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - WebCodecs 音视频编解码</h4>

            <div class="bg-slate-800/50 backdrop-blur-md rounded-xl p-6 border border-slate-700 mb-8">
                <p class="text-slate-300 mb-4">
                    WebCodecs API 提供了对视频和音频编解码器的直接访问，允许开发者对媒体流进行精细控制，适用于视频编辑、实时流媒体和图像处理等场景。
                </p>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">18.1 视频编码器</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebCodecs 视频编码器</div>
                <div class="code-line"><span class="text-blue-400">// 配置视频编码器</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">configureVideoEncoder</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">encoder</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">VideoEncoder</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">output</span>: <span class="text-blue-300">chunk</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'编码后的视频帧：'</span>, <span class="text-blue-300">chunk</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">error</span>: <span class="text-blue-300">error</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'编码错误：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">encoder</span>.<span class="text-blue-300">configure</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">codec</span>: <span class="text-green-300">'avc1.42001E'</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">width</span>: <span class="text-yellow-300">1280</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">height</span>: <span class="text-yellow-300">720</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">bitrate</span>: <span class="text-yellow-300">5000000</span>, <span class="text-blue-400">// 5 Mbps</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">framerate</span>: <span class="text-yellow-300">30</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 返回配置好的编码器</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">encoder</span>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'配置编码器失败：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">}
                <div class="code-line"></div>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">18.2 视频解码器</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebCodecs 视频解码器</div>
                <div class="code-line"><span class="text-blue-400">// 配置视频解码器</span>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">configureVideoDecoder</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">decoder</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">VideoDecoder</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">output</span>: <span class="text-blue-300">frame</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'解码后的视频帧：'</span>, <span class="text-blue-300">frame</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理视频帧</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">frame</span>.<span class="text-blue-300">close</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">error</span>: <span class="text-blue-300">error</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'解码错误：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">decoder</span>.<span class="text-blue-300">configure</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">codec</span>: <span class="text-green-300">'avc1.42001E'</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">width</span>: <span class="text-yellow-300">1280</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">height</span>: <span class="text-yellow-300">720</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 返回配置好的解码器</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">decoder</span>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'配置解码器失败：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">}
                <div class="code-line"></div>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">18.3 音频编码器</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebCodecs 音频编码器</div>
                <div class="code-line"><span class="text-blue-400">// 配置音频编码器</span>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">configureAudioEncoder</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">encoder</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">AudioEncoder</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">output</span>: <span class="text-blue-300">chunk</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'编码后的音频帧：'</span>, <span class="text-blue-300">chunk</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">error</span>: <span class="text-blue-300">error</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'编码错误：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">encoder</span>.<span class="text-blue-300">configure</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">codec</span>: <span class="text-green-300">'opus'</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">sampleRate</span>: <span class="text-yellow-300">48000</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">numberOfChannels</span>: <span class="text-yellow-300">2</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">bitrate</span>: <span class="text-yellow-300">128000</span> <span class="text-blue-400">// 128 kbps</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 返回配置好的编码器</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">encoder</span>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'配置编码器失败：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">}
                <div class="code-line"></div>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">18.4 视频处理管道</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebCodecs 完整视频处理管道</div>
                <div class="code-line"><span class="text-blue-400">// 创建完整的视频处理管道</span>
                <div class="code-line"><span class="text-purple-400">class</span> <span class="text-yellow-300">VideoProcessingPipeline</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">constructor</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">encoder</span> = <span class="text-purple-400">null</span>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">decoder</span> = <span class="text-purple-400">null</span>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">videoTrack</span> = <span class="text-purple-400">null</span>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 初始化管道</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">async</span> <span class="text-blue-300">initialize</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">encoder</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">this</span>.<span class="text-blue-300">createEncoder</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">decoder</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">this</span>.<span class="text-blue-300">createDecoder</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建视频编码器</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">createEncoder</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-purple-400">new</span> <span class="text-blue-300">Promise</span>((<span class="text-blue-300">resolve</span>, <span class="text-blue-300">reject</span>) => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">encoder</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">VideoEncoder</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">output</span>: <span class="text-blue-300">chunk</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 将编码后的数据传递给解码器</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">decoder</span>.<span class="text-blue-300">decode</span>(<span class="text-blue-300">chunk</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">error</span>: <span class="text-blue-300">error</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'编码错误：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">reject</span>(<span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">encoder</span>.<span class="text-blue-300">configure</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">codec</span>: <span class="text-green-300">'avc1.42001E'</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">width</span>: <span class="text-yellow-300">640</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">height</span>: <span class="text-yellow-300">480</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">bitrate</span>: <span class="text-yellow-300">3000000</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">framerate</span>: <span class="text-yellow-300">30</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">resolve</span>(<span class="text-blue-300">encoder</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建视频解码器</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">createDecoder</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-purple-400">new</span> <span class="text-blue-300">Promise</span>((<span class="text-blue-300">resolve</span>, <span class="text-blue-300">reject</span>) => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">decoder</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">VideoDecoder</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">output</span>: <span class="text-blue-300">frame</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理解码后的视频帧</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">processVideoFrame</span>(<span class="text-blue-300">frame</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">error</span>: <span class="text-blue-300">error</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'解码错误：'</span>, <span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">reject</span>(<span class="text-blue-300">error</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">decoder</span>.<span class="text-blue-300">configure</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">codec</span>: <span class="text-green-300">'avc1.42001E'</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">width</span>: <span class="text-yellow-300">640</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">height</span>: <span class="text-yellow-300">480</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">resolve</span>(<span class="text-blue-300">decoder</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理视频帧</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">processVideoFrame</span>(<span class="text-blue-300">frame</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 这里可以添加图像处理逻辑</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'处理视频帧：'</span>, <span class="text-blue-300">frame</span>.<span class="text-blue-300">timestamp</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">frame</span>.<span class="text-blue-300">close</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 启动摄像头并处理视频流</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">async</span> <span class="text-blue-300">startCamera</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">stream</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">navigator</span>.<span class="text-blue-300">mediaDevices</span>.<span class="text-blue-300">getUserMedia</span>({ 
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">video</span>: { <span class="text-blue-300">width</span>: <span class="text-yellow-300">640</span>, <span class="text-blue-300">height</span>: <span class="text-yellow-300">480</span> }
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">videoTrack</span> = <span class="text-blue-300">stream</span>.<span class="text-blue-300">getVideoTracks</span>()[<span class="text-yellow-300">0</span>];
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">processor</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">MediaStreamTrackProcessor</span>({ <span class="text-blue-300">track</span>: <span class="text-blue-300">this</span>.<span class="text-blue-300">videoTrack</span> });
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">reader</span> = <span class="text-blue-300">processor</span>.<span class="text-blue-300">readable</span>.<span class="text-blue-300">getReader</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">this</span>.<span class="text-blue-300">processStream</span>(<span class="text-blue-300">reader</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理视频流</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">async</span> <span class="text-blue-300">processStream</span>(<span class="text-blue-300">reader</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">while</span> (<span class="text-purple-400">true</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">{ done, value: frame }</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">reader</span>.<span class="text-blue-300">read</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (done) <span class="text-purple-400">break</span>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 编码视频帧</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">encoder</span>.<span class="text-blue-300">encode</span>(<span class="text-blue-300">frame</span>);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">frame</span>.<span class="text-blue-300">close</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 关闭管道</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">close</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">this</span>.<span class="text-blue-300">encoder</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">encoder</span>.<span class="text-blue-300">close</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">this</span>.<span class="text-blue-300">decoder</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">decoder</span>.<span class="text-blue-300">close</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">this</span>.<span class="text-blue-300">videoTrack</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">this</span>.<span class="text-blue-300">videoTrack</span>.<span class="text-blue-300">stop</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">}
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 使用示例</span>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">runVideoPipeline</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">pipeline</span> = <span class="text-purple-400">new</span> <span class="text-yellow-300">VideoProcessingPipeline</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">pipeline</span>.<span class="text-blue-300">initialize</span>();
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">pipeline</span>.<span class="text-blue-300">startCamera</span>();
                <div class="code-line">}
                <div class="code-line"></div>
            </div>
        
            </div>

        </section>

        <!-- 19. WebAssembly 汇编 -->
        <section id="section-19" class="mb-16">

            <h2 class="text-3xl font-bold mb-8 text-center">

                <span class="gradient-text">19. WebAssembly 汇编</span>

            </h2>

            

            <div class="language-content" data-lang="javascript">

                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - WebAssembly 高性能计算</h4>

            <div class="bg-slate-800/50 backdrop-blur-md rounded-xl p-6 border border-slate-700 mb-8">
                <p class="text-slate-300 mb-4">
                    WebAssembly (Wasm) 是一种低级的类汇编语言，提供了接近原生的执行速度，适用于高性能计算、游戏、图像处理等场景。
                </p>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">19.1 WebAssembly 模块加载</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># 加载 WebAssembly 模块</div>
                <div class="code-line"><span class="text-blue-400">// 从 URL 加载 WebAssembly 模块</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">loadWebAssemblyModule</span>(<span class="text-blue-300">url</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 加载 .wasm 文件</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">response</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">fetch</span>(<span class="text-blue-300">url</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (!<span class="text-blue-300">response</span>.<span class="text-blue-300">ok</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">throw new</span> <span class="text-blue-300">Error</span>(<span class="text-green-300">'Failed to load WebAssembly module'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 编译并实例化模块</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">bytes</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">response</span>.<span class="text-blue-300">arrayBuffer</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">module</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">WebAssembly</span>.<span class="text-blue-300">compile</span>(<span class="text-blue-300">bytes</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 实例化模块，可传入 JavaScript 对象作为导入</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">importObject</span> = {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>: {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">log</span>: <span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">instance</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">WebAssembly</span>.<span class="text-blue-300">instantiate</span>(<span class="text-blue-300">module</span>, <span class="text-blue-300">importObject</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">instance</span>.<span class="text-blue-300">exports</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'WebAssembly 加载失败：'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">throw</span> <span class="text-blue-300">error</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 使用示例</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">runWasmExample</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">exports</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">loadWebAssemblyModule</span>(<span class="text-green-300">'example.wasm'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 调用 WebAssembly 导出的函数</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'Wasm 导出的函数：'</span>, <span class="text-blue-300">exports</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">exports</span>.<span class="text-blue-300">add</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">exports</span>.<span class="text-blue-300">add</span>(<span class="text-yellow-300">5</span>, <span class="text-yellow-300">7</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'5 + 7 ='</span>, <span class="text-blue-300">result</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'执行失败：'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">19.2 WebAssembly 内存管理</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebAssembly 内存操作</div>
                <div class="code-line"><span class="text-blue-400">// 创建 WebAssembly 内存</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">memory</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">WebAssembly</span>.<span class="text-blue-300">Memory</span>({ 
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">initial</span>: <span class="text-yellow-300">1</span>, <span class="text-blue-400">// 初始内存页数（1页 = 64KB）</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">maximum</span>: <span class="text-yellow-300">10</span> <span class="text-blue-400">// 最大内存页数</span></div>
                <div class="code-line">});</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 从内存中读取数据</span></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">readStringFromMemory</span>(<span class="text-blue-300">offset</span>, <span class="text-blue-300">length</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">buffer</span> = <span class="text-blue-300">new</span> <span class="text-blue-300">Uint8Array</span>(<span class="text-blue-300">memory</span>.<span class="text-blue-300">buffer</span>, <span class="text-blue-300">offset</span>, <span class="text-blue-300">length</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return new</span> <span class="text-blue-300">TextDecoder</span>().<span class="text-blue-300">decode</span>(<span class="text-blue-300">buffer</span>);</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 向内存中写入数据</span></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">writeStringToMemory</span>(<span class="text-blue-300">string</span>, <span class="text-blue-300">offset</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">encoder</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">TextEncoder</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">bytes</span> = <span class="text-blue-300">encoder</span>.<span class="text-blue-300">encode</span>(<span class="text-blue-300">string</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">buffer</span> = <span class="text-blue-300">new</span> <span class="text-blue-300">Uint8Array</span>(<span class="text-blue-300">memory</span>.<span class="text-blue-300">buffer</span>, <span class="text-blue-300">offset</span>, <span class="text-blue-300">bytes</span>.<span class="text-blue-300">length</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">buffer</span>.<span class="text-blue-300">set</span>(<span class="text-blue-300">bytes</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">bytes</span>.<span class="text-blue-300">length</span>;</div>
                <div class="code-line">}</div>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">19.3 从 JavaScript 调用 WebAssembly</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># JavaScript 与 WebAssembly 交互</div>
                <div class="code-line"><span class="text-blue-400">// 完整的 WebAssembly 交互示例</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">wasmInteractionExample</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建内存</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">memory</span> = <span class="text-purple-400">new</span> <span class="text-blue-300">WebAssembly</span>.<span class="text-blue-300">Memory</span>({ <span class="text-blue-300">initial</span>: <span class="text-yellow-300">1</span> });</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// WebAssembly 模块二进制数据（示例）</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">wasmBytes</span> = <span class="text-blue-300">new</span> <span class="text-blue-300">Uint8Array</span>([
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x61</span>, <span class="text-yellow-300">0x73</span>, <span class="text-yellow-300">0x6d</span>, <span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x00</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x07</span>, <span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x60</span>, <span class="text-yellow-300">0x02</span>, <span class="text-yellow-300">0x7f</span>, <span class="text-yellow-300">0x7f</span>, <span class="text-yellow-300">0x01</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0x7f</span>, <span class="text-yellow-300">0x03</span>, <span class="text-yellow-300">0x02</span>, <span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x07</span>, <span class="text-yellow-300">0x07</span>, <span class="text-yellow-300">0x01</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0x03</span>, <span class="text-yellow-300">0x61</span>, <span class="text-yellow-300">0x64</span>, <span class="text-yellow-300">0x64</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x0a</span>, <span class="text-yellow-300">0x12</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x08</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x20</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x20</span>, <span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x6a</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0x0b</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x20</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x20</span>, <span class="text-yellow-300">0x01</span>, <span class="text-yellow-300">0x6a</span>, <span class="text-yellow-300">0x0c</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x10</span>, <span class="text-yellow-300">0x00</span>, <span class="text-yellow-300">0x0b</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;]);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 实例化模块</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">result</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">WebAssembly</span>.<span class="text-blue-300">instantiate</span>(<span class="text-blue-300">wasmBytes</span>, { <span class="text-blue-300">js</span>: { <span class="text-blue-300">mem</span>: <span class="text-blue-300">memory</span> } });</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 调用导出的 add 函数</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">sum</span> = <span class="text-blue-300">result</span>.<span class="text-blue-300">instance</span>.<span class="text-blue-300">exports</span>.<span class="text-blue-300">add</span>(<span class="text-yellow-300">10</span>, <span class="text-yellow-300">20</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'10 + 20 ='</span>, <span class="text-blue-300">sum</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-red-300">error</span>(<span class="text-green-300">'WebAssembly 错误：'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line">}</div>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">19.4 使用 Emscripten 编译 C/C++ 到 WebAssembly</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># Emscripten 编译示例</div>
                <div class="code-line"><span class="text-blue-400">// 示例 C 代码（example.c）</span></div>
                <div class="code-line"><span class="text-purple-400">#include</span> &lt;stdio.h&gt;</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">int</span> <span class="text-yellow-300">add</span>(<span class="text-purple-400">int</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">int</span> <span class="text-blue-300">b</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">a</span> + <span class="text-blue-300">b</span>;
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">float</span> <span class="text-yellow-300">multiply</span>(<span class="text-purple-400">float</span> <span class="text-blue-300">a</span>, <span class="text-purple-400">float</span> <span class="text-blue-300">b</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">a</span> * <span class="text-blue-300">b</span>;
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-blue-400">// 编译命令：emcc example.c -o example.js -s EXPORTED_FUNCTIONS='["_add", "_multiply"]' -s EXPORTED_RUNTIME_METHODS='["cwrap"]'</span></div>
            </div>
        
            </div>

        </section>

        <!-- 20. WebGPU 计算与渲染 -->
        <section id="section-20" class="mb-16">

            <h2 class="text-3xl font-bold mb-8 text-center">

                <span class="gradient-text">20. WebGPU 计算与渲染</span>

            </h2>

            

            <div class="language-content" data-lang="javascript">

                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - WebGPU 下一代图形计算</h4>

            <div class="bg-slate-800/50 backdrop-blur-md rounded-xl p-6 border border-slate-700 mb-8">
                <p class="text-slate-300 mb-4">
                    WebGPU 是下一代 Web 图形 API，提供高性能的 3D 图形渲染和通用计算能力，支持现代 GPU 特性如 ray tracing 和 compute shaders。
                </p>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">20.1 WebGPU 设备初始化</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebGPU 设备初始化</div>
                <div class="code-line"><span class="text-blue-400">// 初始化 WebGPU 设备</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">initializeWebGPU</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">canvas</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">getElementById</span>(<span class="text-green-300">'gpuCanvas'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (!<span class="text-blue-300">navigator</span>.<span class="text-blue-300">gpu</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">throw new</span> <span class="text-blue-300">Error</span>(<span class="text-green-300">'WebGPU 不被支持'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 请求适配器</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">adapter</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">navigator</span>.<span class="text-blue-300">gpu</span>.<span class="text-blue-300">requestAdapter</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (!<span class="text-blue-300">adapter</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">throw new</span> <span class="text-blue-300">Error</span>(<span class="text-green-300">'无法获取 WebGPU 适配器'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建设备</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">device</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">adapter</span>.<span class="text-blue-300">requestDevice</span>({</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">requiredFeatures</span>: [],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">requiredLimits</span>: {</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">maxStorageBuffersPerShaderStage</span>: <span class="text-yellow-300">16</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 获取上下文</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">context</span> = <span class="text-blue-300">canvas</span>.<span class="text-blue-300">getContext</span>(<span class="text-green-300">'webgpu'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (!<span class="text-blue-300">context</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">throw new</span> <span class="text-blue-300">Error</span>(<span class="text-green-300">'无法获取 WebGPU 上下文'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 配置上下文</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">format</span> = <span class="text-blue-300">navigator</span>.<span class="text-blue-300">gpu</span>.<span class="text-blue-300">getPreferredCanvasFormat</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">context</span>.<span class="text-blue-300">configure</span>({</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">format</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">alphaMode</span>: <span class="text-green-300">'premultiplied'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">canvas</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">context</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">format</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;};
                <div class="code-line">}
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">20.2 渲染三角形</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebGPU 渲染三角形</div>
                <div class="code-line"><span class="text-blue-400">// 绘制三角形示例</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">drawTriangle</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 初始化设备</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> { <span class="text-blue-300">device</span>, <span class="text-blue-300">canvas</span>, <span class="text-blue-300">context</span>, <span class="text-blue-300">format</span> } = <span class="text-purple-400">await</span> <span class="text-blue-300">initializeWebGPU</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 顶点数据</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">vertices</span> = <span class="text-blue-300">new</span> <span class="text-blue-300">Float32Array</span>([
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0.0</span>, <span class="text-yellow-300">0.5</span>, <span class="text-yellow-300">0.0</span>,  <span class="text-yellow-300">1.0</span>, <span class="text-yellow-300">0.0</span>, <span class="text-yellow-300">0.0</span>, <span class="text-yellow-300">1.0</span>, <span class="text-green-300">// 顶部红色</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">-0.5</span>, <span class="text-yellow-300">-0.5</span>, <span class="text-yellow-300">0.0</span>,  <span class="text-yellow-300">0.0</span>, <span class="text-yellow-300">1.0</span>, <span class="text-yellow-300">0.0</span>, <span class="text-yellow-300">1.0</span>, <span class="text-green-300">// 左下角绿色</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-yellow-300">0.5</span>, <span class="text-yellow-300">-0.5</span>, <span class="text-yellow-300">0.0</span>,  <span class="text-yellow-300">0.0</span>, <span class="text-yellow-300">0.0</span>, <span class="text-yellow-300">1.0</span>, <span class="text-yellow-300">1.0</span>, <span class="text-green-300">// 右下角蓝色</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;]);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建顶点缓冲区</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">vertexBuffer</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createBuffer</span>({</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">size</span>: <span class="text-blue-300">vertices</span>.<span class="text-blue-300">byteLength</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">usage</span>: <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">VERTEX</span> | <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">COPY_DST</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 将数据复制到缓冲区</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>.<span class="text-blue-300">queue</span>.<span class="text-blue-300">writeBuffer</span>(<span class="text-blue-300">vertexBuffer</span>, <span class="text-yellow-300">0</span>, <span class="text-blue-300">vertices</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 顶点着色器</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">vertexShaderCode</span> = `
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@vertex
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn main(@location(0) position: vec3<f32>, @location(1) color: vec4<f32>) -> @builtin(position) vec4<f32> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return vec4(position, 1.0);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;`;</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 片段着色器</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">fragmentShaderCode</span> = `
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@fragment
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn main() -> @location(0) vec4<f32> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return vec4(1.0, 0.5, 0.0, 1.0);
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;`;</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建着色器模块</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">vertexShader</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createShaderModule</span>({ <span class="text-blue-300">code</span>: <span class="text-blue-300">vertexShaderCode</span> });</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">fragmentShader</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createShaderModule</span>({ <span class="text-blue-300">code</span>: <span class="text-blue-300">fragmentShaderCode</span> });</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 顶点布局</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">vertexBufferLayout</span> = {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">arrayStride</span>: <span class="text-yellow-300">28</span>, <span class="text-green-300">// 4 字节 x (3 个位置坐标 + 4 个颜色分量)</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">attributes</span>: [
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">shaderLocation</span>: <span class="text-yellow-300">0</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">offset</span>: <span class="text-yellow-300">0</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">format</span>: <span class="text-green-300">'float32x3'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">shaderLocation</span>: <span class="text-yellow-300">1</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">offset</span>: <span class="text-yellow-300">12</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">format</span>: <span class="text-green-300">'float32x4'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;};</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 渲染管线</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">pipeline</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createRenderPipeline</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">layout</span>: <span class="text-blue-300">'auto'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">vertex</span>: {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">module</span>: <span class="text-blue-300">vertexShader</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entryPoint</span>: <span class="text-green-300">'main'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">buffers</span>: [<span class="text-blue-300">vertexBufferLayout</span>],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">fragment</span>: {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">module</span>: <span class="text-blue-300">fragmentShader</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entryPoint</span>: <span class="text-green-300">'main'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">targets</span>: [
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">format</span>: <span class="text-blue-300">format</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">primitive</span>: {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">topology</span>: <span class="text-green-300">'triangle-list'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 渲染通道描述符</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">renderPassDescriptor</span> = {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">colorAttachments</span>: [
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">view</span>: <span class="text-blue-300">context</span>.<span class="text-blue-300">getCurrentTexture</span>().<span class="text-blue-300">createView</span>(),</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">clearValue</span>: { <span class="text-blue-300">r</span>: <span class="text-yellow-300">0.1</span>, <span class="text-blue-300">g</span>: <span class="text-yellow-300">0.1</span>, <span class="text-blue-300">b</span>: <span class="text-yellow-300">0.1</span>, <span class="text-blue-300">a</span>: <span class="text-yellow-300">1.0</span> },</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">loadOp</span>: <span class="text-green-300">'clear'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">storeOp</span>: <span class="text-green-300">'store'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;};</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 渲染命令编码器</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">commandEncoder</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createCommandEncoder</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 开始渲染通道</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">passEncoder</span> = <span class="text-blue-300">commandEncoder</span>.<span class="text-blue-300">beginRenderPass</span>(<span class="text-blue-300">renderPassDescriptor</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置渲染管线</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">passEncoder</span>.<span class="text-blue-300">setPipeline</span>(<span class="text-blue-300">pipeline</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置顶点缓冲区</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">passEncoder</span>.<span class="text-blue-300">setVertexBuffer</span>(<span class="text-yellow-300">0</span>, <span class="text-blue-300">vertexBuffer</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 绘制三角形</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">passEncoder</span>.<span class="text-blue-300">draw</span>(<span class="text-yellow-300">3</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 结束渲染通道</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">passEncoder</span>.<span class="text-blue-300">end</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 提交命令</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>.<span class="text-blue-300">queue</span>.<span class="text-blue-300">submit</span>([<span class="text-blue-300">commandEncoder</span>.<span class="text-blue-300">finish</span>()]);</div>
                <div class="code-line">}</div>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">20.3 计算管线示例</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebGPU 计算管线</div>
                <div class="code-line"><span class="text-blue-400">// 使用 WebGPU 进行向量加法</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">vectorAddition</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 初始化设备</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> { <span class="text-blue-300">device</span> } = <span class="text-purple-400">await</span> <span class="text-blue-300">initializeWebGPU</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 输入数据</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">a</span> = <span class="text-blue-300">new</span> <span class="text-blue-300">Float32Array</span>([<span class="text-yellow-300">1.0</span>, <span class="text-yellow-300">2.0</span>, <span class="text-yellow-300">3.0</span>, <span class="text-yellow-300">4.0</span>]);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">b</span> = <span class="text-blue-300">new</span> <span class="text-blue-300">Float32Array</span>([<span class="text-yellow-300">5.0</span>, <span class="text-yellow-300">6.0</span>, <span class="text-yellow-300">7.0</span>, <span class="text-yellow-300">8.0</span>]);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建缓冲区</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">bufferA</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createBuffer</span>({</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">size</span>: <span class="text-blue-300">a</span>.<span class="text-blue-300">byteLength</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">usage</span>: <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">STORAGE</span> | <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">COPY_DST</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">bufferB</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createBuffer</span>({</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">size</span>: <span class="text-blue-300">b</span>.<span class="text-blue-300">byteLength</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">usage</span>: <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">STORAGE</span> | <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">COPY_DST</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">bufferResult</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createBuffer</span>({</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">size</span>: <span class="text-blue-300">a</span>.<span class="text-blue-300">byteLength</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">usage</span>: <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">STORAGE</span> | <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">COPY_SRC</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 将数据写入缓冲区</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>.<span class="text-blue-300">queue</span>.<span class="text-blue-300">writeBuffer</span>(<span class="text-blue-300">bufferA</span>, <span class="text-yellow-300">0</span>, <span class="text-blue-300">a</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>.<span class="text-blue-300">queue</span>.<span class="text-blue-300">writeBuffer</span>(<span class="text-blue-300">bufferB</span>, <span class="text-yellow-300">0</span>, <span class="text-blue-300">b</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 计算着色器</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">computeShaderCode</span> = `
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@group(0) @binding(0)
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var<storage, read> a: array<f32>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@group(0) @binding(1)
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var<storage, read> b: array<f32>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@group(0) @binding(2)
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var<storage, write> result: array<f32>;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@compute
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@workgroup_size(4)
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let i = global_id.x;
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result[i] = a[i] + b[i];
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;`;</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建计算着色器模块</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">computeShader</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createShaderModule</span>({ <span class="text-blue-300">code</span>: <span class="text-blue-300">computeShaderCode</span> });</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建绑定组布局</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">bindGroupLayout</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createBindGroupLayout</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entries</span>: [
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">binding</span>: <span class="text-yellow-300">0</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">visibility</span>: <span class="text-blue-300">GPUShaderStage</span>.<span class="text-blue-300">COMPUTE</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">buffer</span>: {},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">binding</span>: <span class="text-yellow-300">1</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">visibility</span>: <span class="text-blue-300">GPUShaderStage</span>.<span class="text-blue-300">COMPUTE</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">buffer</span>: {},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">binding</span>: <span class="text-yellow-300">2</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">visibility</span>: <span class="text-blue-300">GPUShaderStage</span>.<span class="text-blue-300">COMPUTE</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">buffer</span>: { <span class="text-blue-300">type</span>: <span class="text-green-300">'storage'</span> },</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建绑定组</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">bindGroup</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createBindGroup</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">layout</span>: <span class="text-blue-300">bindGroupLayout</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entries</span>: [
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">binding</span>: <span class="text-yellow-300">0</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">resource</span>: { <span class="text-blue-300">buffer</span>: <span class="text-blue-300">bufferA</span> },</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">binding</span>: <span class="text-yellow-300">1</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">resource</span>: { <span class="text-blue-300">buffer</span>: <span class="text-blue-300">bufferB</span> },</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">binding</span>: <span class="text-yellow-300">2</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">resource</span>: { <span class="text-blue-300">buffer</span>: <span class="text-blue-300">bufferResult</span> },</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建计算管线</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">computePipeline</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createComputePipeline</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">layout</span>: <span class="text-blue-300">device</span>.<span class="text-blue-300">createPipelineLayout</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">bindGroupLayouts</span>: [<span class="text-blue-300">bindGroupLayout</span>],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}),</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">compute</span>: {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">module</span>: <span class="text-blue-300">computeShader</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">entryPoint</span>: <span class="text-green-300">'main'</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建命令编码器</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">commandEncoder</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createCommandEncoder</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建计算通道</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">computePass</span> = <span class="text-blue-300">commandEncoder</span>.<span class="text-blue-300">beginComputePass</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置计算管线</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">computePass</span>.<span class="text-blue-300">setPipeline</span>(<span class="text-blue-300">computePipeline</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置绑定组</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">computePass</span>.<span class="text-blue-300">setBindGroup</span>(<span class="text-yellow-300">0</span>, <span class="text-blue-300">bindGroup</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 执行计算</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">computePass</span>.<span class="text-blue-300">dispatchWorkgroups</span>(<span class="text-yellow-300">1</span>); <span class="text-green-300">// 4 个线程 / 每个工作组 4 个线程</span></div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 结束计算通道</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">computePass</span>.<span class="text-blue-300">end</span>();</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 提交命令</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>.<span class="text-blue-300">queue</span>.<span class="text-blue-300">submit</span>([<span class="text-blue-300">commandEncoder</span>.<span class="text-blue-300">finish</span>()]);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 读取结果</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">resultBuffer</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createBuffer</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">size</span>: <span class="text-blue-300">a</span>.<span class="text-blue-300">byteLength</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">usage</span>: <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">COPY_DST</span> | <span class="text-blue-300">GPUBufferUsage</span>.<span class="text-blue-300">MAP_READ</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">copyEncoder</span> = <span class="text-blue-300">device</span>.<span class="text-blue-300">createCommandEncoder</span>();</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">copyEncoder</span>.<span class="text-blue-300">copyBufferToBuffer</span>(
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">bufferResult</span>, <span class="text-yellow-300">0</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">resultBuffer</span>, <span class="text-yellow-300">0</span>,</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">a</span>.<span class="text-blue-300">byteLength</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">device</span>.<span class="text-blue-300">queue</span>.<span class="text-blue-300">submit</span>([<span class="text-blue-300">copyEncoder</span>.<span class="text-blue-300">finish</span>()]);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 映射缓冲区并读取结果</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">await</span> <span class="text-blue-300">resultBuffer</span>.<span class="text-blue-300">mapAsync</span>(<span class="text-blue-300">GPUMapMode</span>.<span class="text-blue-300">READ</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">result</span> = <span class="text-blue-300">new</span> <span class="text-blue-300">Float32Array</span>(<span class="text-blue-300">resultBuffer</span>.<span class="text-blue-300">getMappedRange</span>());</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'向量加法结果:'</span>, <span class="text-blue-300">result</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 清理</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">resultBuffer</span>.<span class="text-blue-300">unmap</span>();</div>
                <div class="code-line">}
            </div>
        
            </div>

        </section>

        <!-- 21. WebXR 虚拟/增强/混合现实 -->
        <section id="section-21" class="mb-16">

            <h2 class="text-3xl font-bold mb-8 text-center">

                <span class="gradient-text">21. WebXR 虚拟/增强/混合现实</span>

            </h2>

            

            <div class="language-content" data-lang="javascript">

                <h4 class="text-lg font-medium mb-4 text-purple-400">JavaScript - WebXR 沉浸式体验</h4>

            <div class="bg-slate-800/50 backdrop-blur-md rounded-xl p-6 border border-slate-700 mb-8">
                <p class="text-slate-300 mb-4">
                    WebXR API 为 Web 应用提供了访问虚拟现实（VR）、增强现实（AR）和混合现实（MR）设备的能力，包括头显、控制器和传感器。
                </p>
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">21.1 WebXR 基础设置</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># WebXR 基础设置</div>
                <div class="code-line"><span class="text-blue-400">// 检查浏览器是否支持 WebXR</span></div>
                <div class="code-line"><span class="text-purple-400">if</span> (!<span class="text-blue-300">navigator</span>.<span class="text-blue-300">xr</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">alert</span>(<span class="text-green-300">'您的浏览器不支持 WebXR'</span>);
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">setupXR</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 获取 XR 会话模式</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">supportedSession</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">navigator</span>.<span class="text-blue-300">xr</span>.<span class="text-blue-300">isSessionSupported</span>(<span class="text-green-300">'immersive-vr'</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">supportedSession</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'VR 模式可用'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">else</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'VR 模式不可用，尝试 AR 模式'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">arSupported</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">navigator</span>.<span class="text-blue-300">xr</span>.<span class="text-blue-300">isSessionSupported</span>(<span class="text-green-300">'immersive-ar'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">arSupported</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'AR 模式可用'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">else</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'没有可用的沉浸式会话模式'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">}
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">21.2 创建 XR 会话</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># 创建 XR 会话</div>
                <div class="code-line"><span class="text-blue-400">// 请求创建 VR 会话</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">createVRSession</span>() {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">try</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">xrSession</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">navigator</span>.<span class="text-blue-300">xr</span>.<span class="text-blue-300">requestSession</span>(<span class="text-green-300">'immersive-vr'</span>, {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">requiredFeatures</span>: [<span class="text-green-300">'local-floor'</span>, <span class="text-green-300">'bounded-floor'</span>],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">optionalFeatures</span>: [<span class="text-green-300">'hand-tracking'</span>, <span class="text-green-300">'layers'</span>],</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置 XR 会话事件</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">xrSession</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'end'</span>, <span class="text-blue-300">onSessionEnded</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> <span class="text-blue-300">xrSession</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;} <span class="text-purple-400">catch</span> (<span class="text-blue-300">error</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">error</span>(<span class="text-green-300">'创建会话失败:'</span>, <span class="text-blue-300">error</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">onSessionEnded</span>(<span class="text-blue-300">event</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'XR 会话已结束'</span>);</div>
                <div class="code-line">}
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">21.3 渲染 XR 场景</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># 渲染 XR 场景</div>
                <div class="code-line"><span class="text-blue-400">// 设置渲染器和 XR 参考空间</span></div>
                <div class="code-line"><span class="text-purple-400">async function</span> <span class="text-yellow-300">setupRenderer</span>(<span class="text-blue-300">xrSession</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建 WebGL 上下文</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">canvas</span> = <span class="text-blue-300">document</span>.<span class="text-blue-300">createElement</span>(<span class="text-green-300">'canvas'</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">gl</span> = <span class="text-blue-300">canvas</span>.<span class="text-blue-300">getContext</span>(<span class="text-green-300">'webgl2'</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 将画布附加到文档</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">document</span>.<span class="text-blue-300">body</span>.<span class="text-blue-300">appendChild</span>(<span class="text-blue-300">canvas</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建 XR 参考空间</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">referenceSpace</span> = <span class="text-purple-400">await</span> <span class="text-blue-300">xrSession</span>.<span class="text-blue-300">requestReferenceSpace</span>(<span class="text-green-300">'local-floor'</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 创建 XR 渲染状态</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">renderState</span> = <span class="text-blue-300">await</span> <span class="text-blue-300">xrSession</span>.<span class="text-blue-300">updateRenderState</span>({
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">baseLayer</span>: <span class="text-purple-400">new</span> <span class="text-blue-300">XRWebGLLayer</span>(<span class="text-blue-300">xrSession</span>, <span class="text-blue-300">gl</span>),</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置动画循环</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">xrSession</span>.<span class="text-blue-300">requestAnimationFrame</span>(<span class="text-blue-300">onXRFrame</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">return</span> {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">canvas</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">gl</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">referenceSpace</span>,
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">renderState</span>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;};
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">onXRFrame</span>(<span class="text-blue-300">time</span>, <span class="text-blue-300">xrFrame</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">xrSession</span> = <span class="text-blue-300">xrFrame</span>.<span class="text-blue-300">session</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">xrWebGLLayer</span> = <span class="text-blue-300">xrSession</span>.<span class="text-blue-300">renderState</span>.<span class="text-blue-300">baseLayer</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">gl</span> = <span class="text-blue-300">xrWebGLLayer</span>.<span class="text-blue-300">context</span>;</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 获取视图矩阵</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">viewerPose</span> = <span class="text-blue-300">xrFrame</span>.<span class="text-blue-300">getViewerPose</span>(<span class="text-blue-300">referenceSpace</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">viewerPose</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置视口</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">gl</span>.<span class="text-blue-300">bindFramebuffer</span>(<span class="text-blue-300">gl</span>.<span class="text-blue-300">FRAMEBUFFER</span>, <span class="text-blue-300">xrWebGLLayer</span>.<span class="text-blue-300">framebuffer</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 对每个视图进行渲染</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">viewerPose</span>.<span class="text-blue-300">views</span>.<span class="text-blue-300">forEach</span>(<span class="text-purple-400">(view</span>) => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">const</span> <span class="text-blue-300">viewport</span> = <span class="text-blue-300">xrWebGLLayer</span>.<span class="text-blue-300">getViewport</span>(<span class="text-blue-300">view</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">gl</span>.<span class="text-blue-300">viewport</span>(<span class="text-blue-300">viewport</span>.<span class="text-blue-300">x</span>, <span class="text-blue-300">viewport</span>.<span class="text-blue-300">y</span>, <span class="text-blue-300">viewport</span>.<span class="text-blue-300">width</span>, <span class="text-blue-300">viewport</span>.<span class="text-blue-300">height</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置视图和投影矩阵</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">viewMatrix</span> = <span class="text-blue-300">view</span>.<span class="text-blue-300">transform</span>.<span class="text-blue-300">inverse</span>.<span class="text-blue-300">matrix</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">projectionMatrix</span> = <span class="text-blue-300">view</span>.<span class="text-blue-300">projectionMatrix</span>;</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 这里可以添加渲染逻辑</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 请求下一帧</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">xrSession</span>.<span class="text-blue-300">requestAnimationFrame</span>(<span class="text-blue-300">onXRFrame</span>);</div>
                <div class="code-line">}
            </div>

            <h3 class="text-2xl font-semibold mb-4 gradient-text">21.4 处理控制器输入</h3>
            <div class="code-block rounded-lg p-4 code-font text-sm">
                <div class="text-slate-400 mb-2"># 处理控制器输入</div>
                <div class="code-line"><span class="text-blue-400">// 追踪 XR 输入源</span></div>
                <div class="code-line"><span class="text-purple-400">const</span> <span class="text-blue-300">inputSources</span> = [];</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">setupInputHandling</span>(<span class="text-blue-300">xrSession</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 输入源连接事件</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">xrSession</span>.<span class="text-blue-300">addEventListener</span>(<span class="text-green-300">'inputsourceschange'</span>, <span class="text-blue-300">onInputSourcesChange</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 初始输入源</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">inputSources</span>.<span class="text-blue-300">push</span>(...<span class="text-blue-300">xrSession</span>.<span class="text-blue-300">inputSources</span>);</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">onInputSourcesChange</span>(<span class="text-blue-300">event</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理连接的输入源</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">event</span>.<span class="text-blue-300">added</span>.<span class="text-blue-300">forEach</span>(<span class="text-purple-400">inputSource</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">inputSources</span>.<span class="text-blue-300">push</span>(<span class="text-blue-300">inputSource</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 设置输入源事件</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">inputSource</span>.<span class="text-blue-300">gamepad</span> && <span class="text-blue-300">setupGamepadEvents</span>(<span class="text-blue-300">inputSource</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理断开的输入源</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">event</span>.<span class="text-blue-300">removed</span>.<span class="text-blue-300">forEach</span>(<span class="text-purple-400">inputSource</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">index</span> = <span class="text-blue-300">inputSources</span>.<span class="text-blue-300">indexOf</span>(<span class="text-blue-300">inputSource</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">index</span> !== <span class="text-yellow-300">-1</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">inputSources</span>.<span class="text-blue-300">splice</span>(<span class="text-blue-300">index</span>, <span class="text-yellow-300">1</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line">}</div>
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">setupGamepadEvents</span>(<span class="text-blue-300">inputSource</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 游戏手柄事件处理</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'控制器已连接:'</span>, <span class="text-blue-300">inputSource</span>.<span class="text-blue-300">hand</span>);</div>
                <div class="code-line">}
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">processInput</span>(<span class="text-blue-300">xrFrame</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">inputSources</span>.<span class="text-blue-300">forEach</span>(<span class="text-purple-400">inputSource</span> => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 获取输入源姿态</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">inputPose</span> = <span class="text-blue-300">xrFrame</span>.<span class="text-blue-300">getInputPose</span>(<span class="text-blue-300">inputSource</span>, <span class="text-blue-300">referenceSpace</span>);</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">inputPose</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理位置和旋转</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">position</span> = <span class="text-blue-300">inputPose</span>.<span class="text-blue-300">transform</span>.<span class="text-blue-300">position</span>;</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">const</span> <span class="text-blue-300">orientation</span> = <span class="text-blue-300">inputPose</span>.<span class="text-blue-300">transform</span>.<span class="text-blue-300">orientation</span>;</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 处理游戏手柄输入</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">inputSource</span>.<span class="text-blue-300">gamepad</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">processGamepadInput</span>(<span class="text-blue-300">inputSource</span>.<span class="text-blue-300">gamepad</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line">}
                <div class="code-line"></div>
                <div class="code-line"><span class="text-purple-400">function</span> <span class="text-yellow-300">processGamepadInput</span>(<span class="text-blue-300">gamepad</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 检查按钮按下状态</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">gamepad</span>.<span class="text-blue-300">buttons</span>.<span class="text-blue-300">forEach</span>((<span class="text-blue-300">button</span>, <span class="text-blue-300">index</span>) => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">button</span>.<span class="text-blue-300">pressed</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'按钮按下:'</span>, <span class="text-blue-300">index</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line"></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-400">// 检查摇杆输入</span></div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">gamepad</span>.<span class="text-blue-300">axes</span>.<span class="text-blue-300">forEach</span>((<span class="text-blue-300">axis</span>, <span class="text-blue-300">index</span>) => {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-purple-400">if</span> (<span class="text-blue-300">Math</span>.<span class="text-blue-300">abs</span>(<span class="text-blue-300">axis</span>) > <span class="text-yellow-300">0.1</span>) {
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="text-blue-300">console</span>.<span class="text-blue-300">log</span>(<span class="text-green-300">'摇杆移动:'</span>, <span class="text-blue-300">index</span>, <span class="text-blue-300">axis</span>);</div>
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
                <div class="code-line">&nbsp;&nbsp;&nbsp;&nbsp;});</div>
                <div class="code-line">}
            </div>
        
            </div>

        </section>

        </div>
    </div>
</main>

<footer class="bg-slate-800/50 backdrop-blur p-6 mt-12">
    <div class="container mx-auto text-center text-slate-400">
        <p>© 2025 JavaScript 教程 - 完整指南</p>
    </div>
</footer>

    <script>
        // 移动端菜单切换
        // 注意：由于布局已改为侧边栏，移动端菜单切换功能需要更新
        const menuToggle = document.getElementById('menuToggle');
        const nav = document.querySelector('nav');
        
        if(menuToggle && nav) {
            menuToggle.addEventListener('click', () => {
                nav.classList.toggle('hidden');
                nav.classList.toggle('md:hidden');
            });
        }

        // 平滑滚动
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
